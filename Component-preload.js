/**
* This file was auto-generated by SAP Web IDE build and includes all
* the source files required by SAPUI5 runtime for performance optimization.
* PLEASE DO NOT EDIT THIS FILE!! Changes will be overwritten the next time the build is run.
*/
jQuery.sap.registerPreloadedModules({
	"version": "2.0",
	"name": "cus/crm/opportunity/CRM_OPPRTNTYExtension/Component-preload",
	"modules": {
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/S5Custom.view.xml": "<!--Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.-->\r\n<core:View xmlns:core=\"sap.ui.core\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:la=\"sap.ui.layout\" xmlns:ca=\"sap.ca.ui\" xmlns=\"sap.m\"\r\n\txmlns:form=\"sap.ui.layout.form\" xmlns:layout=\"sap.ui.layout\" controllerName=\"cus.crm.opportunity.view.S5\"\r\n\txmlns:html=\"http://www.w3.org/1999/xhtml\" xmlns:custom=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\">\r\n\t<Page id=\"createPage\" title=\"{i18n>CREATE_TITLE}\" class=\"sapUiFioriObjectPage\" showNavButton=\"true\" navButtonPress=\"toDetail\"\r\n\t\tenableScrolling=\"true\">\r\n\t\t<content>\r\n\t\t\t<la:form.SimpleForm id=\"custForm1\" minWidth=\"1024\" maxContainerCols=\"2\" editable=\"true\" layout=\"ResponsiveGridLayout\"\r\n\t\t\t\ttitle=\"{i18n>CUSTOMER_DATA}\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"3\" emptySpanM=\"3\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<la:content>\r\n\t\t\t\t\t<Label text=\"Loan Type\" visible=\"false\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"loanType\" visible=\"false\" items=\"{custJson>/ZsorgF4Set/results}\" selectedKey=\"{custJson>/Sorg}\"\r\n\t\t\t\t\t\tselectionChange=\"onComboChanged\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Short}\" text=\"{custJson>Stext}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Existing BP\"></Label>\r\n\t\t\t\t\t<Switch state=\"true\" customTextOff=\"No\" customTextOn=\"Yes\" id=\"CustSw_id\" type=\"Default\" change=\"_onExistingCustSwich\"/>\r\n\t\t\t\t\t<Label text=\"Lead Type\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"leadType\" items=\"{custJson>/ZloanTypeF4Set/results}\" selectionChange=\"onComboChanged\" selectedKey=\"\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Attribute}\" text=\"{custJson>Attributetxt}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label id=\"cusLblCustomer\" text=\"Bp No./ Name\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"customer\" liveChange=\"onAccountInputFieldChanged\" value=\"{account}\" suggestionItemSelected=\"onAccountSuggestItemSelected\"\r\n\t\t\t\t\t\tvalueHelpRequest=\"showAccountF4\" valueHelpOnly=\"false\" showValueHelp=\"true\"></Input>\r\n\t\t\t\t\t<Label id=\"cusLblBusAggr\" text=\"Business agreement No.\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"BusAggr\" liveChange=\"Numchnge\" visible=\"false\"></Input>\t\r\n\t\t\t\t\t<Label text=\"Applicant Type\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"applicantType\" visible=\"false\" selectedKey=\"{custJson>/BPTYPE}\" selectionChange=\"onApplicantChanged\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"1\" text=\"Individual\"></core:Item>\r\n\t\t\t\t\t\t\t<core:Item key=\"2\" text=\"Corporate\"></core:Item>\r\n\t\t\t\t\t\t\t<core:Item key=\"3\" text=\"Group\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Customer Name\" id=\"customerName\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusFirstName\" value=\"{custJson>/NAMEFIRST}\" placeholder=\"First Name\" liveChange=\"onMandatoryFieldChanged\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"XL1 L2 M2 S12\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Input id=\"cusMiddleName\" value=\"{custJson>/NAMEMIDDLE}\" placeholder=\"Middle Name\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Input id=\"cusLastName\" value=\"{custJson>/NAMELAST}\" placeholder=\"Last Name\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Name 1\" id=\"Name1\" visible=\"false\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"FirstName\" visible=\"false\" value=\"{custJson>/NAMEFIRST}\" placeholder=\"First Name\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Name 2\" id=\"Name2\" visible=\"false\"></Label>\r\n\t\t\t\t\t<Input id=\"LastName\" visible=\"false\" value=\"{custJson>/NAMELAST}\" placeholder=\"Last Name\" class=\"capitalize\"\r\n\t\t\t\t\t\tliveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Address Line1\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusAdd1\" value=\"{custJson>/ADDRESS1}\" liveChange=\"onMandatoryFieldChanged\" maxLength=\"40\"></Input>\r\n\t\t\t\t\t<Label text=\"Address Line2\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusAdd2\" value=\"{custJson>/ADDRESS2}\" liveChange=\"onMandatoryFieldChanged\" maxLength=\"40\"></Input>\r\n\t\t\t\t\t<Label text=\"Landmark\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusAdd3\" value=\"{custJson>/ADDRESS3}\" liveChange=\"onMandatoryFieldChanged\" maxLength=\"40\"></Input>\r\n\t\t\t\t\t<Label text=\"Pin code\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusPinCode\" maxLength=\"6\" value=\"{custJson>/POST_CODE1}\" change=\"onPostalChange\" liveChange=\"onMandatoryFieldChanged\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L2 M2 S12\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Input editable=\"false\" id=\"cusDistrict\" placeholder=\"District\" value=\"{custJson>/City2}\" enabled=\"false\"></Input>\r\n\t\t\t\t\t<Label text=\"City/State\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusCity\" enabled=\"false\" placeholder=\"City\" selectionChange=\"onComboCityChanged\" selectedKey=\"\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L2 M2 S12\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Input editable=\"false\" id=\"cusState\" placeholder=\"Region\" value=\"{custJson>/REGION}\" enabled=\"false\"></Input>\r\n\t\t\t\t\t<Label text=\"Cell No\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input value=\"+91 \" id=\"mob\" enabled=\"false\"></Input>\r\n\t\t\t\t\t<Input id=\"cusMobile\" maxLength=\"10\" visible=\"true\" value=\"{custJson>/MOBILE}\" liveChange=\"onMandatoryFieldChanged\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L4 M4 S6\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Label text=\"Landline No\" ></Label>\r\n\t\t\t\t\t<Input id=\"cusStd\" placeholder=\"STD Code\" value=\"{custJson>/TelExtens}\" liveChange=\"onMandatoryFieldChanged\" visible=\"true\" maxLength=\"5\"></Input>\r\n\t\t\t\t\t<Input id=\"cusPhone\" value=\"{custJson>/PHONE}\" liveChange=\"onMandatoryFieldChanged\" visible=\"true\" maxLength=\"10\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L3 M3 S6\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Label text=\"Owning existing Tata Vehicles\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"tmlCustomer\" visible=\"true\" selectedKey=\"{custJson>/Ztml}\" value=\"\" selectionChange=\"onComboChanged\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"Y\" text=\"Yes\"></core:Item>\r\n\t\t\t\t\t\t\t<core:Item key=\"N\" text=\"No\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Fleet Size\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusFleetSize\" items=\"{custJson>/fleetSize/results}\" selectionChange=\"onComboChanged\" selectedKey=\"{custJson>/FLEETSIZE}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>fSize}\" text=\"{custJson>fSize}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"XL1 L2 M2 S4\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Cust. Segment\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusSeg\" items=\"{custJson>/Zcustseg/results}\" selectedKey=\"{custJson>/CUSTSEGMENT}\" selectionChange=\"onComboChanged\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Zzcustseg}\" text=\"{custJson>DESC}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Fleet Application\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusFleetApp\" items=\"{custJson>/ZFLEET_APP_MASTS/results}\" selectedKey=\"{custJson>/FLEETAPPL}\" selectionChange=\"onComboChanged\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Fleetapp}\" text=\"{custJson>Fleetapp}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Branch\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusDealerCVPV\" items=\"{custJson>/ZsalesofficeF4Set/results}\" selectionChange=\"onBranchChanged\"\r\n\t\t\t\t\t\tselectedKey=\"{custJson>/Branch}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Short}\" text=\"{custJson>Stext}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L2 M2 S12\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<!--\t<Label text=\"Distribution Channel\"></Label>-->\r\n\t\t\t\t\t<ComboBox id=\"cusDistchan\" items=\"{custJson>/Zcrmc_distchanF4Set/results}\" placeholder=\"Distribution Channel\"\r\n\t\t\t\t\t\tselectionChange=\"onDistchnChanged\" selectedKey=\"{custJson>/Zchannel}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Distchan}\" text=\"{custJson>Description}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Sourcing Channel\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusDealerSelect\" items=\"{custJson>/ZBU_DESCRIPSet/results}\" selectedKey=\"{custJson>/DEALERNAME}\"\r\n\t\t\t\t\t\tselectionChange=\"onComboChanged\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Partner}\" text=\"{custJson>BuDescrip}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Dealer Location\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusDealerLocation\" value=\"{custJson>/DEALERLOC}\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t</la:content>\r\n\t\t\t</la:form.SimpleForm>\r\n\t\t\t<Table id=\"idProdTable\" headerText=\"{i18n>CURR_REQ_DATA}\" noDataText=\"Please select the Vehicle\" inset=\"false\" growing=\"true\"\r\n\t\t\t\tgrowingScrollToLoad=\"true\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<Toolbar id=\"productBasketToolbar_S411\">\r\n\t\t\t\t\t\t<Title id=\"productLabel_S411\" text=\"{i18n>PRODUCT_BASKET}\"/>\r\n\t\t\t\t\t\t<ToolbarSpacer id=\"productSpacer_S411\"></ToolbarSpacer>\r\n\t\t\t\t\t\t<Button id=\"ProductButton11\" icon=\"sap-icon://add\" enabled=\"false\" press=\"addProductTableRow\" tooltip=\"{i18n>ADD}\"></Button>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Product\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Variant\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Quantity\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column width=\"2em\"></Column>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ColumnListItem id=\"idProdTableColumnListItem\">\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<ComboBox selectionChange=\"onProductChange\"></ComboBox>\r\n\t\t\t\t\t\t\t<ComboBox selectionChange=\"onComboCityChanged\"></ComboBox>\r\n\t\t\t\t\t\t\t<Input liveChange=\"onComboChanged\" id=\"Qty_Id\"/>\r\n\t\t\t\t\t\t\t<Button icon=\"sap-icon://sys-cancel-2\" tooltip=\"{i18n>CANCEL}\" type=\"Transparent\" press=\"deleteProductTableRow\"></Button>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</Table>\r\n\t\t\t<la:form.SimpleForm id=\"custForm2\" minWidth=\"1024\" maxContainerCols=\"2\" editable=\"true\" layout=\"ResponsiveGridLayout\" labelSpanL=\"3\"\r\n\t\t\t\tlabelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<la:content>\r\n\t\t\t\t\t<Label text=\"Lead Status\" required=\"true\"></Label>\r\n\t\t\t\t\t<Select id=\"statusdropdown\" items=\"{json>/UserStatuses}\" class=\"pos_input\" change=\"statusdropdownChnge\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{json>UserStatusCode}\" text=\"{json>UserStatusText}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t\t<Label text=\"Next Followup\" required=\"true\"/>\r\n\t\t\t\t\t<DatePicker id=\"cusDatePickerNextFollowup\"\r\n\t\t\t\t\t\tvalue=\"{ path: 'custJson>/NEXTFOLLOWUP' , type: 'sap.ui.model.type.Date',formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"\r\n\t\t\t\t\t\tchange=\"onMandatoryFieldChanged\"></DatePicker>\r\n\t\t\t\t\t<Label text=\"Tentative Purchase Date\" required=\"true\"/>\r\n\t\t\t\t\t<DatePicker id=\"cusDatePickerTentative\"\r\n\t\t\t\t\t\tvalue=\"{path: 'custJson>/TENTIVEDATE', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"\r\n\t\t\t\t\t\tchange=\"onMandatoryFieldChanged\"></DatePicker>\r\n\t\t\t\t\t<Label text=\"Visit Date\" required=\"true\"/>\r\n\t\t\t\t\t<DatePicker id=\"cusDatePickerVisit\"\r\n\t\t\t\t\t\tvalue=\"{path: 'custJson>/VISITDATE' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"\r\n\t\t\t\t\t\tchange=\"onMandatoryFieldChanged\"></DatePicker>\r\n\t\t\t\t\t<Label text=\"Remark\" />\r\n\t\t\t\t\t<TextArea id=\"cusRemark\" rows=\"5\" liveChange=\"onComboChanged\" value=\"{custJson>/LeadComment}\"></TextArea>\r\n\t\t\t\t</la:content>\r\n\t\t\t</la:form.SimpleForm>\r\n\t\t\t<!-- Extension point to add additional opportunity create content on top -->\r\n\t\t\t<core:ExtensionPoint name=\"opportunityCreateContentTopExtension\"></core:ExtensionPoint>\r\n\t\t\t<la:form.SimpleForm id=\"form1\" minWidth=\"1024\" title=\"{i18n>GENERAL_DATA}\" maxContainerCols=\"2\" editable=\"true\"\r\n\t\t\t\tlayout=\"ResponsiveGridLayout\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\"\r\n\t\t\t\tvisible=\"false\">\r\n\t\t\t\t<la:content>\r\n\t\t\t\t\t<Label text=\"{i18n>TYPE}\" id=\"laTypeInput\"></Label>\r\n\t\t\t\t\t<Text id=\"TxtTypeInput\"/>\r\n\t\t\t\t\t<Label id=\"opportunityName_Label\" text=\"{i18n>NAME}\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"desc\" value=\"\" maxLength=\"40\" placeholder=\"{i18n>MAX_CHARS}\" liveChange=\"descriptionChanged\"></Input>\r\n\t\t\t\t\t<Label id=\"opportunityAccount_Label\" text=\"{i18n>ACCOUNT}\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"customer1\" liveChange=\"onAccountInputFieldChanged\" value=\"{account}\" suggestionItemSelected=\"onAccountSuggestItemSelected\"\r\n\t\t\t\t\t\tvalueHelpRequest=\"showAccountF4\" valueHelpOnly=\"false\" showValueHelp=\"true\"></Input>\r\n\t\t\t\t\t<Label id=\"opportunityContact_Label\" text=\"{i18n>MAIN_CONTACT}\"></Label>\r\n\t\t\t\t\t<Input id=\"inputMainContact\" liveChange=\"onContactInputFieldChanged\" value=\"{contact}\" suggestionItemSelected=\"onContactSuggestItemSelected\"\r\n\t\t\t\t\t\tvalueHelpRequest=\"showContactF4\" valueHelpOnly=\"false\" showValueHelp=\"true\"></Input>\r\n\t\t\t\t\t<Label id=\"empRespLabel_S5\" text=\"{i18n>S4.FORM.EMPLOYEE_RESPONSIBLE}\"\r\n\t\t\t\t\t\tvisible=\"{path : 'versioning>/BackendSchemaVersion', formatter : 'cus.crm.opportunity.util.Formatter.formatEmployeeRespField'}\"></Label>\r\n\t\t\t\t\t<Input id=\"inputEmpResponsible_S5\"\r\n\t\t\t\t\t\tvisible=\"{path : 'versioning>/BackendSchemaVersion',formatter : 'cus.crm.opportunity.util.Formatter.formatEmployeeRespField'}\"\r\n\t\t\t\t\t\tliveChange=\"onEmployeeInputFieldChanged\" value=\"{employee}\" suggestionItemSelected=\"onEmployeeSuggestItemSelected\"\r\n\t\t\t\t\t\tvalueHelpRequest=\"showEmployeeF4\" valueHelpOnly=\"false\" showValueHelp=\"true\"></Input>\r\n\t\t\t\t\t<Label id=\"opportunityPriority_Label\" text=\"{i18n>PRIORITY}\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"priority_val\" items=\"{json>/Priorities}\" class=\"pos_input\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{json>PriorityCode}\" text=\"{json>PriorityText}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t</la:content>\r\n\t\t\t</la:form.SimpleForm>\r\n\t\t\t<la:form.SimpleForm visible=\"false\" id=\"form2\" minWidth=\"1024\" title=\"{i18n>FORECAST_TITLE}\" maxContainerCols=\"2\" editable=\"true\"\r\n\t\t\t\tlayout=\"ResponsiveGridLayout\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<Label id=\"opportunityWhtdVolume_Label\" text=\"{i18n>UNWEIGHTED_VOLUME}\"></Label>\r\n\t\t\t\t<Input id=\"volume\" value=\"\" maxLength=\"13\" liveChange=\"volumeChanged\"></Input>\r\n\t\t\t\t<Input id=\"currency\" value=\"{curr}\" placeholder=\"{i18n>CURRENCY}\" showValueHelp=\"true\" showSuggestion=\"true\"\r\n\t\t\t\t\tvalueHelpRequest=\"showCurrencyF4\" liveChange=\"onCurrencyInputFieldChanged\" suggestionItemSelected=\"onCurrencySuggestItemSelected\"\r\n\t\t\t\t\tvalueHelpOnly=\"false\" suggestionItems=\"{json>/Currencies}\">\r\n\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t<core:Item text=\"{json>CurrencyKey}\"></core:Item>\r\n\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t</Input>\r\n\t\t\t\t<Label id=\"forecastLabel_S5\" text=\"{i18n>FORECAST}\"></Label>\r\n\t\t\t\t<Switch enabled=\"true\" id=\"Switch\"></Switch>\r\n\t\t\t</la:form.SimpleForm>\r\n\t\t\t<la:form.SimpleForm visible=\"false\" id=\"form3\" minWidth=\"1024\" title=\"{i18n>DATES}\" maxContainerCols=\"2\" editable=\"true\"\r\n\t\t\t\tlayout=\"ResponsiveGridLayout\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<la:content>\r\n\t\t\t\t\t<Label id=\"opportunityStrtDate_Label\" text=\"{i18n>START_DATE}\"></Label>\r\n\t\t\t\t\t<DatePicker id=\"datePickerStartDate\" displayFormat=\"medium\"></DatePicker>\r\n\t\t\t\t\t<Label id=\"opportunityClsDate_Label\" text=\"{i18n>CLOSE_DATE}\" required=\"true\"></Label>\r\n\t\t\t\t\t<DatePicker id=\"datePickerCloseDate\" displayFormat=\"medium\" change=\"enableSaveBtn\"></DatePicker>\r\n\t\t\t\t</la:content>\r\n\t\t\t</la:form.SimpleForm>\r\n\t\t\t<la:form.SimpleForm visible=\"false\" id=\"form4\" minWidth=\"1024\" title=\"{i18n>SALES_CYCLE}\" maxContainerCols=\"2\" editable=\"true\"\r\n\t\t\t\tlayout=\"ResponsiveGridLayout\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<la:content>\r\n\t\t\t\t\t<Label id=\"opportunityStatus_Label\" text=\"{i18n>STATUS}\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"statusdropdown1\" items=\"{json>/UserStatuses}\" class=\"pos_input\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{json>UserStatusCode}\" text=\"{json>UserStatusText}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label id=\"opportunityStage_Label\" text=\"{i18n>STAGE}\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"stagedropdown\" items=\"{json>/SalesStages}\" class=\"pos_input\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{json>SalesStageCode}\" text=\"{json>SalesStageDescription}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label id=\"opportunityCos_Label\" text=\"{i18n>CHANCE_OF_SUCCESS_%}\"></Label>\r\n\t\t\t\t\t<Input id=\"chanceofSuccess\" value=\"\" liveChange=\"chanceOfSuccessChanged\"></Input>\r\n\t\t\t\t</la:content>\r\n\t\t\t</la:form.SimpleForm>\r\n\t\t\t<la:form.SimpleForm visible=\"false\">\r\n\t\t\t\t<la:content>\r\n\t\t\t\t\t<Label id=\"tit1\" text=\"\"></Label>\r\n\t\t\t\t</la:content>\r\n\t\t\t</la:form.SimpleForm>\r\n\t\t\t<!-- Sales Area -->\r\n\t\t\t<!-- Extension point to add additional sales Area tab content on top -->\r\n\t\t\t<core:ExtensionPoint name=\"salesAreaCreateContentTopExtension\"></core:ExtensionPoint>\r\n\t\t\t<Panel id=\"hide\" visible=\"false\" class=\"sapUiFormEdit-CTX divisionPadding\" title=\"{i18n>SALES_AREA}\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Title text=\"{i18n>SALES_AREA}\"/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<content>\r\n\t\t\t\t\t<la:form.SimpleForm id=\"salesorganization_id\" minWidth=\"1024\" maxContainerCols=\"2\" editable=\"true\" layout=\"ResponsiveGridLayout\"\r\n\t\t\t\t\t\tlabelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t\t\t<la:content>\r\n\t\t\t\t\t\t\t<Text id=\"salesorganization_Text\"></Text>\r\n\t\t\t\t\t\t\t<Label id=\"salesorganization_label\" text=\"{i18n>SALES_ORGANIZATION}\"\r\n\t\t\t\t\t\t\t\tvisible=\"{parts: [{path :'json>/SalesOrganizationDescription'},{path : 'json>/SalesOrganization'}], formatter : 'cus.crm.opportunity.util.Formatter.formatSalesOrganization'}\"></Label>\r\n\t\t\t\t\t\t\t<Input id=\"salesOrganization\"\r\n\t\t\t\t\t\t\t\tvisible=\"{parts: [{path :'json>/SalesOrganizationDescription'},{path : 'json>/SalesOrganization'}], formatter : 'cus.crm.opportunity.util.Formatter.formatSalesOrganization'}\"\r\n\t\t\t\t\t\t\t\tvalue=\"{salesArea}\" suggestionItemSelected=\"showSalesAreaF4\" valueHelpRequest=\"showSalesAreaF4\" valueHelpOnly=\"false\" showValueHelp=\"true\"></Input>\r\n\t\t\t\t\t\t</la:content>\r\n\t\t\t\t\t</la:form.SimpleForm>\r\n\t\t\t\t\t<la:form.SimpleForm id=\"distributionchannel_id\" minWidth=\"1024\" maxContainerCols=\"2\" editable=\"false\" layout=\"ResponsiveGridLayout\"\r\n\t\t\t\t\t\tlabelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t\t\t<la:content>\r\n\t\t\t\t\t\t\t<Label id=\"distributionchannel_label\" text=\"{i18n>DISTRIBUTION_CHANNEL}\"></Label>\r\n\t\t\t\t\t\t\t<Text id=\"distributionchannel_Text\"></Text>\r\n\t\t\t\t\t\t</la:content>\r\n\t\t\t\t\t</la:form.SimpleForm>\r\n\t\t\t\t\t<la:form.SimpleForm id=\"division_id\" minWidth=\"1024\" maxContainerCols=\"2\" editable=\"false\" layout=\"ResponsiveGridLayout\" labelSpanL=\"3\"\r\n\t\t\t\t\t\tlabelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t\t\t<la:content>\r\n\t\t\t\t\t\t\t<Label id=\"division_label\" text=\"{i18n>DIVISION}\"></Label>\r\n\t\t\t\t\t\t\t<Text id=\"division_Text\"></Text>\r\n\t\t\t\t\t\t</la:content>\r\n\t\t\t\t\t</la:form.SimpleForm>\r\n\t\t\t\t\t<core:ExtensionPoint name=\"salesAreaCreateContentBottomExtension\"></core:ExtensionPoint>\r\n\t\t\t\t</content>\r\n\t\t\t</Panel>\r\n\t\t\t<core:ExtensionPoint name=\"opportunityCreateContentBottomExtension\"></core:ExtensionPoint>\r\n\t\t\t<Table visible=\"false\" id=\"productBasket\" items=\"{json>/Products}\" noDataText=\"{i18n>EMPTY_PROD}\" headerText=\"{i18n>PRODUCT_BASKET}\"\r\n\t\t\t\theaderDesign=\"Standard\" class=\"table_resize divisionPadding\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<Toolbar id=\"productToolbar_S5\">\r\n\t\t\t\t\t\t<Title text=\"{i18n>PRODUCT_BASKET}\"/>\r\n\t\t\t\t\t\t<ToolbarSpacer id=\"productSpacer_S5\"></ToolbarSpacer>\r\n\t\t\t\t\t\t<Button id=\"opportunityAddProd_Button\" icon=\"sap-icon://add\" tooltip=\"{i18n>ADD}\" press=\"onAddProduct\"></Button>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns>\r\n\t\t\t\t\t<!-- Extension point to add additional product tab column -->\r\n\t\t\t\t\t<core:ExtensionPoint name=\"opportunityProductTabColoumExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t<Column id=\"basketColumn1_S5\" vAlign=\"Middle\" width=\"35%\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"opportunityProdBasketProd_Label\" text=\"{i18n>PRODUCT}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn2_S5\" vAlign=\"Middle\" width=\"20%\" hAlign=\"Right\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"opportunityProdBasketQuant_Label\" text=\"{i18n>QUANTITY}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn3_S5\" vAlign=\"Middle\" width=\"15%\" minScreenWidth=\"Tablet\" demandPopin=\"true\" hAlign=\"Right\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"unitPriceLabel_S5\" text=\"{i18n>UNIT_PRICE}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn4_S5\" vAlign=\"Middle\" width=\"20%\" hAlign=\"Right\" minScreenWidth=\"Tablet\" demandPopin=\"true\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"vol_S5\" text=\"{i18n>VOLUME}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn5_S5\" vAlign=\"Middle\" width=\"10%\" minScreenWidth=\"Tablet\" hAlign=\"Right\" demandPopin=\"true\">\r\n\t\t\t\t\t\t<header></header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<!-- Extension point to add additional product tab column at the end -->\r\n\t\t\t\t\t<core:ExtensionPoint name=\"opportunityProductTabColoumendExtension\"></core:ExtensionPoint>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ColumnListItem id=\"basketTemplate_S5\">\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional opportunity create product \r\n\t\t\t\t\t\t\t\ttable cells -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityProductTabCellsExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t<la:VerticalLayout id=\"productBasketVLayout_S5\" hAlign=\"Left\">\r\n\t\t\t\t\t\t\t\t<la:content>\r\n\t\t\t\t\t\t\t\t\t<Label id=\"prodname\" design=\"Bold\" text=\"{path : 'json>ProductGuid', formatter : 'cus.crm.opportunity.util.Formatter.formatProductName'}\"></Label>\r\n\t\t\t\t\t\t\t\t\t<Label id=\"productClassificationValue_S5\"\r\n\t\t\t\t\t\t\t\t\t\ttext=\"{path: 'json>ProductGuid',formatter : 'cus.crm.opportunity.util.Formatter.formatProdClassification'}\"></Label>\r\n\t\t\t\t\t\t\t\t</la:content>\r\n\t\t\t\t\t\t\t</la:VerticalLayout>\r\n\t\t\t\t\t\t\t<la:HorizontalLayout id=\"basketHLayout_S5\" width=\"150px\" custom:field=\"QUANTITY\">\r\n\t\t\t\t\t\t\t\t<la:content>\r\n\t\t\t\t\t\t\t\t\t<Input width=\"75px\" id=\"qty\" value=\"{json>Quantity}\" liveChange=\"quantityChanged\" class=\"numberRTL\"></Input>\r\n\t\t\t\t\t\t\t\t\t<ObjectNumber custom:field=\"QUANTITY\" id=\"unit1\" number=\"\" numberUnit=\"{json>Unit}\" class=\"UnitPadding\"/>\r\n\t\t\t\t\t\t\t\t</la:content>\r\n\t\t\t\t\t\t\t</la:HorizontalLayout>\r\n\t\t\t\t\t\t\t<ObjectNumber custom:field=\"NETVALUE\" id=\"netValue_S5\" number=\"{json>NetValue}\" numberUnit=\"{json>CurrencyCode}\"/>\r\n\t\t\t\t\t\t\t<Input width=\"75px\" id=\"expectedNetValue_S5\" value=\"{json>TotalExpectedNetValue}\" editable=\"true\" liveChange=\"volumeChanged\"\r\n\t\t\t\t\t\t\t\tclass=\"numberRTL\" maxLength=\"13\"></Input>\r\n\t\t\t\t\t\t\t<Button id=\"cancel\" icon=\"sap-icon://sys-cancel-2\" type=\"Transparent\" tooltip=\"{i18n>DELETE_ITEM}\" press=\"deleteProduct\"></Button>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional opportunity create product \r\n\t\t\t\t\t\t\t\ttable cells at the end -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityProductTabCellsEndExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</Table>\r\n\t\t\t<Table id=\"partnerBasket\" items=\"{json>/SalesTeam}\" visible=\"false\" noDataText=\"{i18n>EMPTY_PARTNER}\" headerText=\"{i18n>PARTNER_BASKET}\"\r\n\t\t\t\theaderDesign=\"Standard\" class=\"table_resize divisionPadding\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<Toolbar id=\"partnerToolbar_S5\">\r\n\t\t\t\t\t\t<Title text=\"{i18n>PARTNER_BASKET}\"/>\r\n\t\t\t\t\t\t<ToolbarSpacer id=\"partnerSpacer_S5\"></ToolbarSpacer>\r\n\t\t\t\t\t\t<!--<Button id=\"opportunityAddPartnr_Button\" icon=\"sap-icon://add\" tooltip=\"{i18n>ADD}\" press=\"onShowParticipants\"></Button>-->\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns>\r\n\t\t\t\t\t<!-- Extension point to add additional opportunity product tab column -->\r\n\t\t\t\t\t<core:ExtensionPoint name=\"opportunityPartnerTabColoumExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t<Column id=\"basketColumn1_S5_P\" vAlign=\"Middle\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"opportunityPartnerBasketId_Label\" text=\"{i18n>PARTNER}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn2_S5_P\" vAlign=\"Middle\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"opportunityPartnerBasketName_Label\" text=\"{i18n>PARTNER_FUNCTION}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<!-- Extension point to add additional opportunity partner tab column \r\n\t\t\t\t\t\tat the end -->\r\n\t\t\t\t\t<core:ExtensionPoint name=\"opportunityPartnerTabColoumendExtension\"></core:ExtensionPoint>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<items id=\"partnerslistitem\">\r\n\t\t\t\t\t<ColumnListItem id=\"basketTemplate_S5_P\">\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional opportunity edit product table \r\n\t\t\t\t\t\t\t\tcells -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityPartnerTabCellsExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t<la:VerticalLayout id=\"partnerBasketVLayout_S5\" hAlign=\"Left\">\r\n\t\t\t\t\t\t\t\t<la:content>\r\n\t\t\t\t\t\t\t\t\t<Label id=\"partnerId\" design=\"Bold\" text=\"{json>Name}\"></Label>\r\n\t\t\t\t\t\t\t\t</la:content>\r\n\t\t\t\t\t\t\t</la:VerticalLayout>\r\n\t\t\t\t\t\t\t<la:VerticalLayout id=\"partnerBasketVLayout2_S5\" hAlign=\"Left\">\r\n\t\t\t\t\t\t\t\t<la:content>\r\n\t\t\t\t\t\t\t\t\t<Label id=\"partnerDescription\" text=\"{json>PartnerFunction}\"></Label>\r\n\t\t\t\t\t\t\t\t</la:content>\r\n\t\t\t\t\t\t\t</la:VerticalLayout>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional opportunity create product \r\n\t\t\t\t\t\t\t\ttable cells at the end -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityPartnerTabCellsEndExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</Table>\r\n\t\t</content>\r\n\t</Page>\r\n</core:View>",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/S5Custom.controller.js": "jQuery.sap.require(\"sap.ca.scfld.md.controller.BaseDetailController\");\r\njQuery.sap.require(\"sap.ca.ui.utils.busydialog\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.schema\");\r\njQuery.sap.require(\"sap.m.MessageToast\");\r\njQuery.sap.require(\"sap.m.MessageBox\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.Util\");\r\nsap.ui.controller(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.view.S5Custom\", {\r\n\r\n\tonAfterRendering: function() {\r\n\t\tvar NextfollowDp = this.getView().byId(\"cusDatePickerNextFollowup\");\r\n\t\tvar TentDp = this.getView().byId(\"cusDatePickerTentative\");\r\n\t\tvar VisitDp = this.getView().byId(\"cusDatePickerVisit\");\r\n\r\n\t\t$(\"#\" + NextfollowDp.sId + \"> Input\").attr(\"readonly\", \"readonly\");\r\n\t\t$(\"#\" + TentDp.sId + \"> Input\").attr(\"readonly\", \"readonly\");\r\n\t\t$(\"#\" + VisitDp.sId + \"> Input\").attr(\"readonly\", \"readonly\");\r\n\r\n\t},\r\n\tResetFunc: function() {\r\n\t\tthis.byId(\"cusLblCustomer\").setVisible(true);\r\n\t\tthis.byId(\"customer\").setVisible(true);\r\n\t\tthis.byId(\"BusAggr\").setVisible(false);\r\n\t\tthis.byId(\"BusAggr\").setValue();\r\n\t\tthis.byId(\"applicantType\").setVisible(false);\r\n\t\tthis.byId(\"FirstName\").setVisible(false);\r\n\t\tthis.byId(\"LastName\").setVisible(false);\r\n\t\tthis.byId(\"cusFirstName\").setVisible(true);\r\n\t\tthis.byId(\"cusMiddleName\").setVisible(true);\r\n\t\tthis.byId(\"cusLastName\").setVisible(true);\r\n\t\tthis.byId(\"customerName\").setVisible(true);\r\n\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\tthis.byId(\"tmlCustomer\").setVisible(true);\r\n\r\n\t\t//////////////////////////////////\r\n\t\tthis.byId(\"customer\").setValue(\"\");\r\n\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\tthis.byId(\"cusMiddleName\").setValue(\"\");\r\n\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\tthis.byId(\"cusDistrict\").setValue(\"\");\r\n\t\tthis.byId(\"cusCity\").setValue(\"\");\r\n\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\r\n\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\r\n\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\tthis.byId(\"cusSeg\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetApp\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerCVPV\").setSelectedKey(\"\");\r\n\t\tthis.byId(\"cusDistchan\").setSelectedKey(\"\");\r\n\t\tthis.byId(\"cusDealerCVPV\").setValue(\"\");\r\n\t\tthis.byId(\"statusdropdown\").setSelectedKey(\"\");\r\n\t\tthis.byId(\"leadType\").setValue(\"\");\r\n\t\tthis.byId(\"cusRemark\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\tvar dateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\tpattern: \"dd.MM.yyyy\",\r\n\t\t\tUTC: false\r\n\t\t});\r\n\t\tthis.byId(\"cusDatePickerVisit\").setValue(dateFormat.format(new Date(), false));\r\n\t\tthis.byId(\"cusDealerSelect\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\t/////////// set value state error ///////////\r\n\t\tif (this.byId(\"applicantType\").getVisible()) {\r\n\t\t\tthis.byId(\"applicantType\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t}\r\n\r\n\t\tthis.byId(\"FirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"LastName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusFirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusMiddleName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusLastName\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\tthis.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd1\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd2\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd3\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusPinCode\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.None);\r\n\t},\r\n\r\n\tonCancel: function() {\r\n\t\tif (this._checkDataLoss()) {\r\n\t\t\tvar c = sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"CONTINUE\");\r\n\t\t\tvar C = sap.m.MessageBox.Action.CANCEL;\r\n\t\t\tsap.m.MessageBox.show(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"DATA_LOSS\"), {\r\n\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\ttitle: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"WARNING\"),\r\n\t\t\t\tactions: [\r\n\t\t\t\t\tc,\r\n\t\t\t\t\tC\r\n\t\t\t\t],\r\n\t\t\t\tonClose: jQuery.proxy(function(a) {\r\n\t\t\t\t\tif (a == c) {\r\n\t\t\t\t\t\tvar r = {};\r\n\t\t\t\t\t\tr.isConfirmed = true;\r\n\t\t\t\t\t\tthis.datalossDismissed(r);\r\n\t\t\t\t\t} else if (a == C) {}\r\n\t\t\t\t}, this)\r\n\t\t\t});\r\n\t\t} else\r\n\t\t\tthis.datalossDismissed({\r\n\t\t\t\tisConfirmed: true\r\n\t\t\t});\r\n\t},\r\n\tdatalossDismissed: function(r) {\r\n\t\tif (r.isConfirmed === false)\r\n\t\t\treturn;\r\n\t\tif (!this.followupOppt)\r\n\t\t\tvar c = this.ContextPath;\r\n\t\telse\r\n\t\t\tvar c = \"Opportunities(guid'\" + this.ContextPath + \"')\";\r\n\t\tif (!sap.ui.Device.system.phone && !this.fullScreen && !this.fullScreenFromTask && !this.newOpportunityFromAccount && !this.fullfollowupOppt &&\r\n\t\t\t!this.fullScreenFromLead) {\r\n\t\t\tif (c == \" \") {\r\n\t\t\t\tc = \"Opportunities\";\r\n\t\t\t}\r\n\t\t\tthis.oRouter.navTo(\"detail\", {\r\n\t\t\t\tcontextPath: c\r\n\t\t\t}, true);\r\n\t\t} else if (!sap.ui.Device.system.phone && (this.fullScreen || this.newOpportunityFromAccount)) {\r\n\t\t\twindow.history.back();\r\n\t\t} else if (!sap.ui.Device.system.phone && (this.fullScreenFromTask || this.fullfollowupOppt || this.fullScreenFromLead)) {\r\n\t\t\twindow.history.go(-1);\r\n\t\t} else\r\n\t\t\tthis._navBack();\r\n\t\tthis._clear_data();\r\n\t\tthis._enableMasterFooter(\"\");\r\n\t\tthis.byId(\"customer\").setValue(\"\");\r\n\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\tthis.byId(\"cusDistrict\").setValue(\"\");\r\n\t\tthis.byId(\"cusCity\").setValue(\"\");\r\n\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\t\tthis.byId(\"applicantType\").setSelectedKey(\"\");\r\n\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\tthis.byId(\"cusSeg\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetApp\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerCVPV\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerSelect\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\tthis.byId(\"cusDistchan\").setValue(\"\");\r\n\t\tthis.byId(\"cusDatePickerNextFollowup\").setValue(\"\");\r\n\t\tthis.byId(\"cusDatePickerTentative\").setValue(\"\");\r\n\t\tvar dateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\tpattern: \"dd.MM.yyyy\",\r\n\t\t\tUTC: false\r\n\t\t});\r\n\t\tthis.byId(\"cusDatePickerVisit\").setValue(dateFormat.format(new Date(), false));\r\n\t\t//\tthis.byId(\"cusDatePickerVisit\").setValue(\"\");\r\n\t\t//\tthis.byId(\"cusDatePickerVisit\").setValue(\"\");\r\n\t\tthis.byId(\"statusdropdown\").setValue(\"\");\r\n\t\tthis.byId(\"statusdropdown\").setSelectedKey(\"\");\r\n\t\tthis.byId(\"cusRemark\").setValue(\"\");\r\n\t\tthis.byId(\"leadType\").setValue(\"\");\r\n\r\n\t\tthis._custData.ZProduct.results = {};\r\n\r\n\t\tif (this.bBpDeterminationEnabled && this.bOrgDeterminationEnabled) {\r\n\t\t\tthis.resetMultiDetermFlags();\r\n\t\t}\r\n\t},\r\n\tonSave: function() {\r\n\t\tvar v = true;\r\n\t\tif (this.extHookOnSave) {\r\n\t\t\tv = this.extHookOnSave();\r\n\t\t}\r\n\t\tif (!v) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.byId(\"inputMainContact\").getValue() !== \"\" && this.contactId === undefined) {\r\n\t\t\tthis.showContactF4();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.byId(\"inputMainContact\").getValue() === \"\") {\r\n\t\t\tthis.contactId = undefined;\r\n\t\t}\r\n\r\n\t\tthis.dataConfirm({\r\n\t\t\tisConfirmed: true\r\n\t\t});\r\n\r\n\t\tthis.byId(\"customer\").setValue(\"\");\r\n\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\tthis.byId(\"cusMiddleName\").setValue(\"\");\r\n\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\tthis.byId(\"cusDistrict\").setValue(\"\");\r\n\t\tthis.byId(\"cusCity\").setValue(\"\");\r\n\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\t\tthis.byId(\"applicantType\").setSelectedKey(\"\");\r\n\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\tthis.byId(\"cusSeg\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetApp\").setValue(\"\");\r\n\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerCVPV\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerSelect\").setValue(\"\");\r\n\t\tthis.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\tthis.byId(\"cusDistchan\").setValue(\"\");\r\n\t\tthis.byId(\"cusDatePickerNextFollowup\").setValue(\"\");\r\n\t\tthis.byId(\"cusDatePickerTentative\").setValue(\"\");\r\n\t\tvar dateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\tpattern: \"dd.MM.yyyy\",\r\n\t\t\tUTC: false\r\n\t\t});\r\n\t\tthis.getView().byId(\"cusDatePickerVisit\").setValue(dateFormat.format(new Date(), false));\r\n\r\n\t\tthis.byId(\"statusdropdown\").setValue(\"\");\r\n\t\tthis.byId(\"statusdropdown\").setSelectedKey(\"\");\r\n\t\tthis.byId(\"cusRemark\").setValue(\"\");\r\n\r\n\t\tthis._custData.ZProduct.results = {};\r\n\r\n\t\tthis.getView().getModel(\"controllers\").getData().s2Controller;\r\n\r\n\t\tvar a = this.getView().getModel(\"controllers\").getData().s2Controller.getList().getBinding(\"items\");\r\n\r\n\t\ta.refresh(true);\r\n\r\n\t},\r\n\r\n\tdataConfirm: function(r) {\r\n\t\tif (r.isConfirmed) {\r\n\t\t\tif (this.WinStatusCode === this.byId(\"statusdropdown\").getSelectedKey()) {\r\n\t\t\t\tthis.getView().byId(\"chanceofSuccess\").setValue(100);\r\n\t\t\t}\r\n\t\t\tif (this.LostStatusCode === this.byId(\"statusdropdown\").getSelectedKey()) {\r\n\t\t\t\tthis.getView().byId(\"chanceofSuccess\").setValue(0);\r\n\t\t\t}\r\n\t\t\tvar u = \"\";\r\n\t\t\tvar a = \"\";\r\n\r\n\t\t\tif (this.byId(\"statusdropdown\").getSelectedKey() == \"\") {\r\n\t\t\t\tu = this.UserStatusCode;\r\n\t\t\t\ta = this.UserStatusText;\r\n\t\t\t} else {\r\n\t\t\t\tu = this.byId(\"statusdropdown\").getSelectedKey();\r\n\t\t\t\ta = this.byId(\"statusdropdown\").getSelectedItem().getText();\r\n\t\t\t}\r\n\t\t\tvar s = this.byId(\"datePickerStartDate\").getDateValue();\r\n\t\t\tvar e = this.byId(\"datePickerCloseDate\").getDateValue();\r\n\t\t\tvar b = s.getFullYear() + \"-\" + (s.getMonth() + 1) + \"-\" + s.getDate() + \"T00:00:00\";\r\n\t\t\tvar c = e.getFullYear() + \"-\" + (e.getMonth() + 1) + \"-\" + e.getDate() + \"T00:00:00\";\r\n\t\t\tvar follDate;\r\n\t\t\tvar tentDate;\r\n\t\t\tvar visitDate;\r\n\r\n\t\t\tvar follDatePicker = this.byId(\"cusDatePickerNextFollowup\").getDateValue();\r\n\t\t\tif (follDatePicker != null) {\r\n\t\t\t\tfollDate = follDatePicker.getFullYear() + \"-\" + (follDatePicker.getMonth() + 1) + \"-\" + follDatePicker.getDate() + \"T00:00:00\";\r\n\t\t\t}\r\n\t\t\tvar tentDatePicker = this.byId(\"cusDatePickerTentative\").getDateValue();\r\n\t\t\tif (tentDatePicker != null) {\r\n\t\t\t\ttentDate = tentDatePicker.getFullYear() + \"-\" + (tentDatePicker.getMonth() + 1) + \"-\" + tentDatePicker.getDate() + \"T00:00:00\";\r\n\t\t\t}\r\n\t\t\tvar visitDatePicker = this.byId(\"cusDatePickerVisit\").getDateValue();\r\n\t\t\tif (visitDatePicker != null) {\r\n\t\t\t\tvisitDate = visitDatePicker.getFullYear() + \"-\" + (visitDatePicker.getMonth() + 1) + \"-\" + visitDatePicker.getDate() +\r\n\t\t\t\t\t\"T00:00:00\";\r\n\t\t\t}\r\n\t\t\tvar d = \"00000000-0000-0000-0000-000000000000\";\r\n\t\t\tvar m = this.getView().getModel();\r\n\t\t\tvar t = this;\r\n\t\t\tif (this.followupOppt) {\r\n\t\t\t\tthis.PredecessorGUID = this.ContextPath;\r\n\t\t\t} else if (this.fullScreen) {\r\n\t\t\t\tthis.PredecessorGUID = this.appointmentGuid;\r\n\t\t\t\tthis.accountId = this.AccountId;\r\n\t\t\t} else if (this.fullScreenFromTask) {\r\n\t\t\t\tthis.PredecessorGUID = this.taskGuid;\r\n\t\t\t} else if (this.fullScreenFromLead) {\r\n\t\t\t\tthis.PredecessorGUID = this.leadGuid;\r\n\t\t\t\tthis.accountId = this.AccountId;\r\n\t\t\t} else {\r\n\t\t\t\tthis.PredecessorGUID = null;\r\n\t\t\t}\r\n\t\tvar ExstCusFlg = this.byId(\"CustSw_id\").getState() ? \"X\" : \"\";\r\n\t\t\tvar E = {\r\n\t\t\t\tDescription: this.byId(\"desc\").getValue(),\r\n\t\t\t\tProcessType: this.processType,\r\n\t\t\t\tStartDate: b,\r\n\t\t\t\tClosingDate: c,\r\n\t\t\t\tExpectedSalesVolume: \"0.00\", // this.byId(\"volume\").getValue(),\r\n\t\t\t\tSalesStageCode: this.byId(\"stagedropdown\").getSelectedKey(),\r\n\t\t\t\tUserStatusCode: u,\r\n\t\t\t\tUserStatusText: a,\r\n\t\t\t\tPriorityCode: this.byId(\"priority_val\").getSelectedKey(),\r\n\t\t\t\tPriorityText: this.byId(\"priority_val\").getSelectedText(),\r\n\t\t\t\tProspectName: this.byId(\"customer\").getValue(),\r\n\t\t\t\tProspectNumber: this.accountId,\r\n\t\t\t\tMainContactId: this.contactId,\r\n\t\t\t\tMainContactName: this.byId(\"inputMainContact\").getValue(),\r\n\t\t\t\tChanceOfSuccess: this.byId(\"chanceofSuccess\").getValue(),\r\n\t\t\t\tForecastRelevance: this.byId(\"Switch\").getState(),\r\n\t\t\t\tCurrencyCode: this.byId(\"currency\").getValue(),\r\n\t\t\t\tBPTYPE: this.byId(\"applicantType\").getSelectedKey(),\r\n\t\t\t\tSorg: this.byId(\"loanType\").getSelectedKey(),\r\n\t\t\t\tBuag: this.byId(\"BusAggr\").getValue(),\r\n\t\t\t\tNAMEFIRST: this.byId(\"cusFirstName\").getValue(),\r\n\t\t\t\tNAMEMIDDLE: this.byId(\"cusMiddleName\").getValue(),\r\n\t\t\t\tNAMELAST: this.byId(\"cusLastName\").getValue(),\r\n\t\t\t\tADDRESS1: this.byId(\"cusAdd1\").getValue(),\r\n\t\t\t\tADDRESS2: this.byId(\"cusAdd2\").getValue(),\r\n\t\t\t\tADDRESS3: this.byId(\"cusAdd3\").getValue(),\r\n\t\t\t\tPHONE: this.byId(\"cusPhone\").getValue(),\r\n\t\t\t\tTelExtens: this.byId(\"cusStd\").getValue(),\r\n\t\t\t\tPOST_CODE1: this.byId(\"cusPinCode\").getValue(),\r\n\t\t\t\tDISTRICT: this.byId(\"cusDistrict\").getValue(),\r\n\t\t\t\tCITY1: this.byId(\"cusCity\").getValue(),\r\n\t\t\t\tREGION: this.byId(\"cusState\").getValue(),\r\n\t\t\t\tMOBILE: this.byId(\"cusMobile\").getValue(),\r\n\t\t\t\tCUSTSEGMENT: this.byId(\"cusSeg\").getSelectedKey(),\r\n\t\t\t\tFLEETSIZE: this.byId(\"cusFleetSize\").getSelectedKey(),\r\n\t\t\t\tFLEETAPPL: this.byId(\"cusFleetApp\").getSelectedKey(),\r\n\t\t\t\tDEALERNAME: this.byId(\"cusDealerSelect\").getSelectedKey(),\r\n\t\t\t\tDEALERLOC: this.byId(\"cusDealerLocation\").getValue(),\r\n\t\t\t\tBranch: this.byId(\"cusDealerCVPV\").getSelectedKey(),\r\n\t\t\t\tZchannel: this.byId(\"cusDistchan\").getSelectedKey(),\r\n\t\t\t\tLeadComment: this.byId(\"cusRemark\").getValue(),\r\n\t\t\t\tZtml: this.byId(\"tmlCustomer\").getSelectedKey(),\r\n\t\t\t\tZleadtype: this.byId(\"leadType\").getSelectedKey(),\r\n\t\t\t\tZzecus:ExstCusFlg,\r\n\t\t\t\tNEXTFOLLOWUP: follDate,\r\n\t\t\t\tTENTIVEDATE: tentDate,\r\n\t\t\t\tVISITDATE: visitDate,\r\n\r\n\t\t\t\tGuid: d,\r\n\t\t\t\tStatuses: [{\r\n\t\t\t\t\tHeaderGuid: d,\r\n\t\t\t\t\tStatusProfile: this.StatusProfile,\r\n\t\t\t\t\tUserStatusCode: u,\r\n\t\t\t\t\tUserStatusText: a,\r\n\t\t\t\t\tStatusOrderNumber: \"01\"\r\n\t\t\t\t}],\r\n\t\t\t\tProducts: [],\r\n\t\t\t\tZProduct: [],\r\n\t\t\t\tSalesTeam: []\r\n\t\t\t};\r\n\r\n\t\t\tif (parseFloat(this.sBackendVersion) >= 4) {\r\n\t\t\t\tE.SalesOrganization = this.acc_salesorgid;\r\n\t\t\t\tE.SalesOrganizationDescription = this.acc_salesorgdesc;\r\n\t\t\t\tE.DistributionChannel = this.acc_dischaid;\r\n\t\t\t\tE.DistributionChannelDescription = this.acc_dischadesc;\r\n\t\t\t\tE.Division = this.acc_divid;\r\n\t\t\t\tE.DivisionDescription = this.acc_divdesc;\r\n\t\t\t}\r\n\t\t\tif (parseFloat(this.sBackendVersion) >= 2) {\r\n\t\t\t\tif (this.byId(\"inputEmpResponsible_S5\").getValue() !== \"\") {\r\n\t\t\t\t\tE[\"EmployeeResponsibleNumber\"] = this.oSelectedEmployee.employeeID ? this.oSelectedEmployee.employeeID : this.EmployeeResponsibleNumber;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tE[\"EmployeeResponsibleNumber\"] = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (parseFloat(this.sBackendVersion) >= 3) {\r\n\t\t\t\tE[\"PredecessorGUID\"] = this.PredecessorGUID;\r\n\t\t\t}\r\n\r\n\t\t\tvar p = this.getView().byId(\"productBasket\").getModel(\"json\").getData().Products;\r\n\t\t\tvar i = 0;\r\n\t\t\tif (p && p.length) {\r\n\t\t\t\tvar f = p.length;\r\n\t\t\t\tvar L;\r\n\t\t\t\tfor (i = 0; i < f; i++) {\r\n\t\t\t\t\tL = p[i];\r\n\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\tHeaderGuid: d,\r\n\t\t\t\t\t\tProcessingMode: \"A\",\r\n\t\t\t\t\t\tProductGuid: L.ProductGuid,\r\n\t\t\t\t\t\tProductId: L.ProductId,\r\n\t\t\t\t\t\tProductName: L.ProductName,\r\n\t\t\t\t\t\tQuantity: L.Quantity,\r\n\t\t\t\t\t\tTotalExpectedNetValue: L.TotalExpectedNetValue,\r\n\t\t\t\t\t\tUnit: L.Unit\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (this.extHookExtendProductEntry) {\r\n\t\t\t\t\t\tthis.extHookExtendProductEntry(g, L);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tE.Products.push(g);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar ProductTab = this.byId(\"idProdTable\");\r\n\t\t\tvar Items = ProductTab.getItems();\r\n\t\t\tif (Items.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < Items.length; i++) {\r\n\t\t\t\t\tvar _saveingRecord = {\r\n\t\t\t\t\t\t\"Guid\": \"00000000-0000-0000-0000-000000000001\", //_zProduct.results[i].Guid,\r\n\t\t\t\t\t\t\"RecordId\": \"00000000-0000-0000-0000-000000000001\",\r\n\t\t\t\t\t\t// \"OobjectId\": _zProduct.results[i].OobjectId,\r\n\t\t\t\t\t\t\"CategoryId\": Items[i].getCells()[0].getSelectedKey(),\r\n\t\t\t\t\t\t\"ProductId\": Items[i].getCells()[1].getSelectedKey(),\r\n\t\t\t\t\t\t\"Quantity\": Items[i].getCells()[2].getValue()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tE.ZProduct.push(_saveingRecord);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar h;\r\n\t\t\tif (parseFloat(this.sBackendVersion) >= 4 && this.getView().byId(\"partnerBasket\").getModel(\"json\").getData().SalesTeam) {\r\n\t\t\t\th = this.getView().byId(\"partnerBasket\").getModel(\"json\").getData().SalesTeam;\r\n\t\t\t\tif (h.length > 0) {\r\n\t\t\t\t\tif (this.followupOppt) {\r\n\t\t\t\t\t\tvar n = new Array();\r\n\t\t\t\t\t\tvar o = new Array();\r\n\t\t\t\t\t\tif (this.oldList.oData.hasOwnProperty(\"Competitor\")) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < this.oldList.oData[\"Competitor\"].length; i++) {\r\n\t\t\t\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\t\t\t\tpartner: \"Competitor\",\r\n\t\t\t\t\t\t\t\t\tname: this.oldList.oData[\"Competitor\"][i].value,\r\n\t\t\t\t\t\t\t\t\tkey: this.oldList.oData[\"Competitor\"][i].key\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\to.push(g);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar v = this.participantsF4MultiselectFragment.getModel(\"json\").getProperty(\"/PartnerFunctions\");\r\n\t\t\t\t\t\tfor (var k = 0; k < v.length; k++) {\r\n\t\t\t\t\t\t\tif (this.oldList.oData[v[k].PartnerFunctionName])\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < this.oldList.oData[v[k].PartnerFunctionName].length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (this.deletedFromMain)\r\n\t\t\t\t\t\t\t\t\t\tif (this.deletedFromMain.oData[v[k].PartnerFunctionName])\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < this.deletedFromMain.oData[v[k].PartnerFunctionName].length; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.deletedFromMain.oData[v[k].PartnerFunctionName][j].key == this.oldList.oData[v[k].PartnerFunctionName][i].key) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpartner: v[k].PartnerFunctionName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: this.deletedFromMain.oData[v[k].PartnerFunctionName][j].value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: this.deletedFromMain.oData[v[k].PartnerFunctionName][j].key\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tn.push(g);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var l = 0; l < h.length; l++) {\r\n\t\t\t\t\t\t\tfor (var q = 0; q < n.length; q++) {\r\n\t\t\t\t\t\t\t\tif (h[l].PartnerFunction == n[q].partner && h[l].Key == n[q].key)\r\n\t\t\t\t\t\t\t\t\tn.splice(q, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!this.participantsF4MultiselectFragment.getModel(\"temp\")) {\r\n\t\t\t\t\t\t\tthis.participantsF4MultiselectFragment.setModel(new sap.ui.model.json.JSONModel(), \"temp\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < h.length; i++) {\r\n\t\t\t\t\t\t\tif (!this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + h[i].PartnerFunction)) {\r\n\t\t\t\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\t\t\t\tpartner: h[i].PartnerFunction,\r\n\t\t\t\t\t\t\t\t\tname: h[i].Name,\r\n\t\t\t\t\t\t\t\t\tkey: h[i].Key\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"temp\").setProperty(\"/\" + h[i].PartnerFunction, [g]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\t\t\t\tpartner: h[i].PartnerFunction,\r\n\t\t\t\t\t\t\t\t\tname: h[i].Name,\r\n\t\t\t\t\t\t\t\t\tkey: h[i].Key\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + h[i].PartnerFunction).push(g);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < n.length; i++) {\r\n\t\t\t\t\t\t\tif (!this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + n[i].partner)) {\r\n\t\t\t\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\t\t\t\tpartner: n[i].partner,\r\n\t\t\t\t\t\t\t\t\tname: n[i].name,\r\n\t\t\t\t\t\t\t\t\tkey: n[i].key\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"temp\").setProperty(\"/\" + n[i].partner, [g]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\t\t\t\tpartner: n[i].partner,\r\n\t\t\t\t\t\t\t\t\tname: n[i].name,\r\n\t\t\t\t\t\t\t\t\tkey: n[i].key\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + n[i].partner).push(g);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < v.length; i++) {\r\n\t\t\t\t\t\t\tif (this.oldList.oData[v[i].PartnerFunctionName])\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < this.oldList.oData[v[i].PartnerFunctionName].length; j++) {\r\n\t\t\t\t\t\t\t\t\tif (this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName))) {\r\n\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName))\r\n\t\t\t\t\t\t\t\t\t\t\t.length; k++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName))[k]\r\n\t\t\t\t\t\t\t\t\t\t\t\t.partner == v[i].PartnerFunctionName && this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tencodeURIComponent(v[i].PartnerFunctionName))[k].key == this.oldList.oData[v[i].PartnerFunctionName][j].key)\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName)).splice(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tk, 1);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < v.length; i++) {\r\n\t\t\t\t\t\t\tif (this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName)))\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName))\r\n\t\t\t\t\t\t\t\t\t.length; j++) {\r\n\t\t\t\t\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\t\t\t\t\tpartner: this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName))[\r\n\t\t\t\t\t\t\t\t\t\t\tj].partner,\r\n\t\t\t\t\t\t\t\t\t\tname: this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName))[\r\n\t\t\t\t\t\t\t\t\t\t\tj].name,\r\n\t\t\t\t\t\t\t\t\t\tkey: this.participantsF4MultiselectFragment.getModel(\"temp\").getProperty(\"/\" + encodeURIComponent(v[i].PartnerFunctionName))[\r\n\t\t\t\t\t\t\t\t\t\t\tj].key\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\to.push(g);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < o.length; i++) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < h.length; j++) {\r\n\t\t\t\t\t\t\t\tif (o[i].partner == h[j].PartnerFunction && o[i].key == h[j].Key)\r\n\t\t\t\t\t\t\t\t\th.splice(j, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.participantsF4MultiselectFragment.getModel(\"SelectedPartnerCategoryMainDelete\"))\r\n\t\t\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"SelectedPartnerCategoryMainDelete\").destroy();\r\n\t\t\t\t\tif (this.participantsF4MultiselectFragment.getModel(\"temp\"))\r\n\t\t\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"temp\").destroy();\r\n\t\t\t\t\tthis.newItems = o;\r\n\t\t\t\t\tthis.deletedItems = n;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\th = \"\";\r\n\t\t\t}\r\n\t\t\tif (h.length > 0) {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\tvar P = this.participantsF4MultiselectFragment.getModel(\"json\").getProperty(\"/PartnerFunctions\");\r\n\t\t\t\tif (P == undefined || P.length === 0) {\r\n\t\t\t\t\tP = this.partnerDeterminationMap[this.processType];\r\n\t\t\t\t}\r\n\t\t\t\tvar w = this.participantsF4MultiselectFragment.getModel(\"PartnersBasedOnType\");\r\n\t\t\t\tif (h && h.length) {\r\n\t\t\t\t\tvar f = h.length;\r\n\t\t\t\t\tfor (i = 0; i < f; i++) {\r\n\t\t\t\t\t\tvar L = h[i];\r\n\t\t\t\t\t\tvar x;\r\n\t\t\t\t\t\tfor (var y = 0; y < P.length; y++) {\r\n\t\t\t\t\t\t\tif (P[y].PartnerFunctionName == L.PartnerFunction) {\r\n\t\t\t\t\t\t\t\tx = P[y].PartnerFunctionCode;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar g = {\r\n\t\t\t\t\t\t\tHeaderGuid: d,\r\n\t\t\t\t\t\t\tPartnerFunctionCode: x,\r\n\t\t\t\t\t\t\tPartnerNumber: L.Key,\r\n\t\t\t\t\t\t\tPartnerName: L.Name,\r\n\t\t\t\t\t\t\tPartnerFunctionText: L.PartnerFunction\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (this.extHookExtendSalesItemEntry) {\r\n\t\t\t\t\t\t\tthis.extHookExtendSalesItemEntry(g, L);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tE.SalesTeam.push(g);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar z = this.getView().byId(\"partnerBasket\").getItems();\r\n\t\t\t\tfor (var A = 0; A < z.length; A++) {\r\n\t\t\t\t\tthis.getView().byId(\"partnerBasket\").removeItem(z[A]);\r\n\t\t\t\t\tz[A].destroy();\r\n\t\t\t\t}\r\n\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"json\").getData().PartnerFunctions = this.partnerDeterminationMap[this.processType];\r\n\t\t\t\tvar B = this.participantsF4MultiselectFragment.getModel(\"json\").getProperty(\"/PartnerFunctions\");\r\n\t\t\t\tfor (var C = 0; C < B.length; C++) {\r\n\t\t\t\t\tif (this.participantsF4MultiselectFragment.getContent()[0].getPages()[0].getContent()[0].getItems()[C]) {\r\n\t\t\t\t\t\tthis.participantsF4MultiselectFragment.getContent()[0].getPages()[0].getContent()[0].getItems()[C].setInfo(\" \");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"json\").destroy();\r\n\t\t\t\tif (this.participantsF4MultiselectFragment.getModel(\"PartnersBasedOnType\")) {\r\n\t\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"PartnersBasedOnType\").destroy();\r\n\t\t\t\t}\r\n\t\t\t\tthis.participantsF4MultiselectFragment.getModel(\"SelectedPartnerCategory\").destroy();\r\n\t\t\t\tthis.byId(\"partnerBasket\").getModel(\"json\").updateBindings();\r\n\t\t\t}\r\n\t\t\tif (this.extHookSaveOentry) {\r\n\t\t\t\tthis.extHookSaveOentry(E);\r\n\t\t\t}\r\n\t\t\tm.refreshSecurityToken();\r\n\t\t\tthis.setBtnEnabled(\"sv\", false);\r\n\t\t\tsap.ca.ui.utils.busydialog.requireBusyDialog();\r\n\t\t\tvar D = this;\r\n\t\t\tvar m = this.getView().getModel();\r\n\t\t\tvar F = [];\r\n\t\t\tvar G = [];\r\n\t\t\tvar H = this.followupOppt;\r\n\t\t\tvar I = this.newItems;\r\n\t\t\tvar J = this.deletedItems;\r\n\t\t\tif (!I)\r\n\t\t\t\tI = [];\r\n\t\t\tif (!J)\r\n\t\t\t\tJ = [];\r\n\t\t\tvar P = this.partnerDeterminationMap[this.processType];\r\n\t\t\tvar t = this;\r\n\t\t\tvar K = false;\r\n\t\t\tvar M = this.sBackendVersion;\r\n\t\t\tvar N;\r\n\r\n\t\t\tm.create(\"/Opportunities\", E, null, function(O, Q) {\r\n\t\t\t\tvar R = t.getView().getModel(\"controllers\").getData().s2Controller;\r\n\t\t\t\tif (R) {\r\n\t\t\t\t\tR.opportunityID = O.Id;\r\n\t\t\t\t}\r\n\t\t\t\tif (H && (I.length > 0 || J.length > 0) && parseFloat(M) >= 4) {\r\n\t\t\t\t\tfor (var i = 0; i < I.length; i++) {\r\n\t\t\t\t\t\tvar S;\r\n\t\t\t\t\t\tfor (var k = 0; k < P.length; k++) {\r\n\t\t\t\t\t\t\tif (P[k].PartnerFunctionName == I[i].partner)\r\n\t\t\t\t\t\t\t\tS = P[k].PartnerFunctionCode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tE = {\r\n\t\t\t\t\t\t\tHeaderGuid: O.Guid,\r\n\t\t\t\t\t\t\tPartnerNumber: I[i].key,\r\n\t\t\t\t\t\t\tPartnerFunctionCode: S\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tF.push(m.createBatchOperation(\"OpportunitySalesTeamSet\", \"POST\", E, null));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < J.length; i++) {\r\n\t\t\t\t\t\tvar S;\r\n\t\t\t\t\t\tfor (var k = 0; k < P.length; k++) {\r\n\t\t\t\t\t\t\tif (P[k].PartnerFunctionName == J[i].partner)\r\n\t\t\t\t\t\t\t\tS = P[k].PartnerFunctionCode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tE = {\r\n\t\t\t\t\t\t\tHeaderGuid: O.Guid,\r\n\t\t\t\t\t\t\tPartnerNumber: J[i].key,\r\n\t\t\t\t\t\t\tPartnerFunctionCode: S\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar T = [\r\n\t\t\t\t\t\t\t\"OpportunitySalesTeamSet(HeaderGuid=guid'\",\r\n\t\t\t\t\t\t\tE.HeaderGuid,\r\n\t\t\t\t\t\t\t\"',PartnerNumber='\",\r\n\t\t\t\t\t\t\tE.PartnerNumber,\r\n\t\t\t\t\t\t\t\"',PartnerFunctionCode='\",\r\n\t\t\t\t\t\t\tE.PartnerFunctionCode,\r\n\t\t\t\t\t\t\t\"')\"\r\n\t\t\t\t\t\t].join(\"\");\r\n\t\t\t\t\t\tG.push(m.createBatchOperation(T, \"DELETE\", null, null));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (F.length > 0)\r\n\t\t\t\t\t\tm.addBatchChangeOperations(F);\r\n\t\t\t\t\tif (G.length > 0)\r\n\t\t\t\t\t\tm.addBatchChangeOperations(G);\r\n\t\t\t\t\tm.submitBatch(jQuery.proxy(function(X) {\r\n\t\t\t\t\t\tfor (var j = 0; j < X.__batchResponses.length; j++) {\r\n\t\t\t\t\t\t\tswitch (j) {\r\n\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\tif (X.__batchResponses[0]) {\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < X.__batchResponses[0].__changeResponses.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (X.__batchResponses[0].__changeResponses[i].statusCode < 400) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tK = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\tN = X.__batchResponses[0].__changeResponses[i].statusText;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tif (X.__batchResponses[1]) {\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < X.__batchResponses[1].__changeResponses.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (X.__batchResponses[1].__changeResponses[i].statusCode < 400) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tK = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\tN = X.__batchResponses[0].__changeResponses[i].statusText;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, t), jQuery.proxy(function(X) {\r\n\t\t\t\t\t\tt.handleErrors(X);\r\n\t\t\t\t\t}, t));\r\n\t\t\t\t}\r\n\t\t\t\tif (K)\r\n\t\t\t\t\tsap.m.MessageToast.show(N);\r\n\t\t\t\tif (!D.fullScreen && !D.fullScreenFromTask && !D.fullfollowupOppt && !D.newOpportunityFromAccount && !D.fullScreenFromLead)\r\n\t\t\t\t\tt._enableMasterFooter(Q.data.Guid);\r\n\t\t\t\tt.ContextPath = \"Opportunities(guid'\" + Q.data.Guid + \"')\";\r\n\t\t\t\tif (D.followupOppt || D.fullScreen || D.fullScreenFromTask || D.fullScreenFromLead) {\r\n\t\t\t\t\tsap.ui.getCore().getEventBus().publish(\"cus.crm.opportunity\", \"followUpOpportunityCreated\", {\r\n\t\t\t\t\t\tcontextPath: t.ContextPath\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar U = sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"followupsuccessful\");\r\n\t\t\t\t\tsap.m.MessageToast.show(U, {\r\n\t\t\t\t\t\tcloseOnBrowserNavigation: false\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsap.ui.getCore().getEventBus().publish(\"cus.crm.opportunity\", \"opportunityCreated\");\r\n\t\t\t\t\tsap.m.MessageToast.show(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_SUCCESS\"), {\r\n\t\t\t\t\t\tcloseOnBrowserNavigation: false\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tt._clear_data();\r\n\t\t\t\tif (t.bBpDeterminationEnabled && t.bOrgDeterminationEnabled) {\r\n\t\t\t\t\tt.resetMultiDetermFlags();\r\n\t\t\t\t}\r\n\t\t\t\tvar V = false;\r\n\t\t\t\tif (t.extHookNavigateAfterCreate) {\r\n\t\t\t\t\tV = t.extHookNavigateAfterCreate(O, Q);\r\n\t\t\t\t}\r\n\t\t\t\tif (V) {\r\n\t\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\tvar W = t.ContextPath;\r\n\t\t\t\tif (!sap.ui.Device.system.phone && !D.fullScreen && !D.fullScreenFromTask && !D.fullScreenFromLead && !D.fullfollowupOppt && !D.newOpportunityFromAccount)\r\n\t\t\t\t\tt.oRouter.navTo(\"detail\", {\r\n\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t}, true);\r\n\t\t\t\telse if (!sap.ui.Device.system.phone && D.fullScreen) {\r\n\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t} else if (!sap.ui.Device.system.phone && D.fullfollowupOppt) {\r\n\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t} else if (!sap.ui.Device.system.phone && (D.fullScreenFromTask || D.fullScreenFromLead)) {\r\n\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t} else if (!sap.ui.Device.system.phone && D.newOpportunityFromAccount) {\r\n\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t} else if (sap.ui.Device.system.phone && (D.fullScreen || D.fullScreenFromTask || D.fullScreenFromLead || D.fullfollowupOppt || D.newOpportunityFromAccount)) {\r\n\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t} else\r\n\t\t\t\t\tt._navBack();\r\n\r\n\t\t\t}, function(O) {\r\n\t\t\t\tt.displayResponseErrorMessage(O, sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_FAILED\"));\r\n\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\tt.setBtnEnabled(\"sv\", true);\r\n\t\t\t});\r\n\t\t} else\r\n\t\t\treturn;\r\n\t},\r\n\t/*\t\tt.H = H;\r\n\t\t\tt.I = I;\r\n\t\t\tt.j = j;\r\n\t\t\tt.J = J;\r\n\t\t\tt.M = M;\r\n\t\t\tt.P = P;\r\n\t\t\tt.E = E;\r\n\t\t\tt.F = F;\r\n\t\t\tt.G = G;\r\n\t\t\tt.m = m;\r\n\t\t\tt.K = K;\r\n\t\t\tt.N = N;\r\n\t\t\tt.D = D;\r\n\t\t\tvar readop = [];\r\n\t\t\tvar createop = [];\r\n\t\t\tcreateop.push(m.createBatchOperation(\"/Opportunities\", \"POST\", E));\r\n\t\t\tm.addBatchChangeOperations(createop);\r\n\t\t\t\r\n\t\t\treadop.push(m.createBatchOperation(\"/DuplicateSet\", \"GET\"));\r\n\t\t\tm.addBatchReadOperations(readop);\r\n\t\t\t//var oReadOperation2 = m.createBatchOperation(\"/DuplicateSet\", \"GET\");\r\n\t\t\t//var aReadOperations = [oReadOperation1,oReadOperation2];\r\n\t\t\t//\tm.addBatchOperations(aReadOperations);\r\n\r\n\t\t\t//oModel.submitBatch(function(oData, oResponse, aErrorResponses) {\r\n\t\t\tm.submitBatch(function(O, Q) {\r\n\t\t\t\t//\tm.create(\"/Opportunities\", E, null, function(O, Q) {\r\n\t\t\t\tif (O.__batchResponses[1].response.statusCode === \"400\") {\r\n\r\n\t\t\t\t\tvar json = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\tjson.setData(O.__batchResponses[1].data);\r\n\r\n\t\t\t\t\t// this.DuplicateFragment = null;\r\n\t\t\t\t\t//  t.DuplicateFragment = new sap.ui.xmlfragment(t.createId(\"DuplicateTab\"),\"cus.crm.opportunity.CRM_OPPRTNTYExtension.view.DuplicateTab\", this);\r\n\t\t\t\t\tif (!t.DuplicateFragment) {\r\n\t\t\t\t\t\tt.DuplicateFragment = new sap.ui.xmlfragment(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.view.DuplicateTab\", t);\r\n\t\t\t\t\t\t//\tthis.DuplicateFragment.setModel(json);\r\n\r\n\t\t\t\t\t\tsap.ui.getCore().byId(\"idDupliTable\").setModel(json);\r\n\t\t\t\t\t\tt.DuplicateFragment.setModel(this.oI18nModel, \"i18n\");\r\n\r\n\t\t\t\t\t\t//\tt.DuplicateFragment.addButton({\r\n\t\t\t\t\t\t// \t\tbeginButton:new sap.m.Button({\r\n\t\t\t\t\t\t// \t\ttext: \"Cancel\",\r\n\t\t\t\t\t\t// \t\tpress: function (H,I,j,J,M,P,E,F,G,m,K,N,D,Q) {\r\n\t\t\t\t\t\t// \t\t\tt.DuplicateFragment.close();\r\n\t\t\t\t\t\t// \t\t\tvar Fsave=\"X\";\r\n\t\t\t\t\t\t// \t\t\tvar CUSTOMERID=\"\";\r\n\t\t\t\t\t\t// \t\t\tt.DuplucateMethod(H,I,j,J,M,p,E,F,G,m,K,N,D,Q,Fsave,CUSTOMERID);\r\n\t\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t// \t}),\r\n\t\t\t\t\t\t// \tendButton:new sap.m.Button({\r\n\t\t\t\t\t\t// \t\ttext: \"Continue\",\r\n\t\t\t\t\t\t// \t\tpress: function (H,I,j,J,M,P,E,F,G,m,K,N,D,Q) {\r\n\t\t\t\t\t\t// \t\t\tt.DuplicateFragment.close();\r\n\t\t\t\t\t\t// \t\t\tvar Fsave=\"X\";\r\n\t\t\t\t\t\t// \t\t\tvar CUSTOMERID=t.BPPartner;\r\n\t\t\t\t\t\t// \t\t\tt.DuplucateMethod(H,I,j,J,M,p,E,F,G,m,K,N,D,Q,Fsave,CUSTOMERID);\r\n\t\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t// \t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\t\tt.DuplicateFragment.open();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar O = O.__batchResponses[0].data;\r\n\t\t\t\t\tvar R = t.getView().getModel(\"controllers\").getData().s2Controller;\r\n\t\t\t\t\tif (R) {\r\n\t\t\t\t\t\tR.opportunityID = O.Id;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (H && (I.length > 0 || J.length > 0) && parseFloat(M) >= 4) {\r\n\t\t\t\t\t\tfor (var i = 0; i < I.length; i++) {\r\n\t\t\t\t\t\t\tvar S;\r\n\t\t\t\t\t\t\tfor (var k = 0; k < P.length; k++) {\r\n\t\t\t\t\t\t\t\tif (P[k].PartnerFunctionName == I[i].partner)\r\n\t\t\t\t\t\t\t\t\tS = P[k].PartnerFunctionCode;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tE = {\r\n\t\t\t\t\t\t\t\tHeaderGuid: O.Guid,\r\n\t\t\t\t\t\t\t\tPartnerNumber: I[i].key,\r\n\t\t\t\t\t\t\t\tPartnerFunctionCode: S\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tF.push(m.createBatchOperation(\"OpportunitySalesTeamSet\", \"POST\", E, null));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < J.length; i++) {\r\n\t\t\t\t\t\t\tvar S;\r\n\t\t\t\t\t\t\tfor (var k = 0; k < P.length; k++) {\r\n\t\t\t\t\t\t\t\tif (P[k].PartnerFunctionName == J[i].partner)\r\n\t\t\t\t\t\t\t\t\tS = P[k].PartnerFunctionCode;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tE = {\r\n\t\t\t\t\t\t\t\tHeaderGuid: O.Guid,\r\n\t\t\t\t\t\t\t\tPartnerNumber: J[i].key,\r\n\t\t\t\t\t\t\t\tPartnerFunctionCode: S\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tvar T = [\r\n\t\t\t\t\t\t\t\t\"OpportunitySalesTeamSet(HeaderGuid=guid'\",\r\n\t\t\t\t\t\t\t\tE.HeaderGuid,\r\n\t\t\t\t\t\t\t\t\"',PartnerNumber='\",\r\n\t\t\t\t\t\t\t\tE.PartnerNumber,\r\n\t\t\t\t\t\t\t\t\"',PartnerFunctionCode='\",\r\n\t\t\t\t\t\t\t\tE.PartnerFunctionCode,\r\n\t\t\t\t\t\t\t\t\"')\"\r\n\t\t\t\t\t\t\t].join(\"\");\r\n\t\t\t\t\t\t\tG.push(m.createBatchOperation(T, \"DELETE\", null, null));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (F.length > 0)\r\n\t\t\t\t\t\t\tm.addBatchChangeOperations(F);\r\n\t\t\t\t\t\tif (G.length > 0)\r\n\t\t\t\t\t\t\tm.addBatchChangeOperations(G);\r\n\t\t\t\t\t\tm.submitBatch(jQuery.proxy(function(X) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < X.__batchResponses.length; j++) {\r\n\t\t\t\t\t\t\t\tswitch (j) {\r\n\t\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\t\tif (X.__batchResponses[0]) {\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < X.__batchResponses[0].__changeResponses.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (X.__batchResponses[0].__changeResponses[i].statusCode < 400) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tK = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tN = X.__batchResponses[0].__changeResponses[i].statusText;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\tif (X.__batchResponses[1]) {\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < X.__batchResponses[1].__changeResponses.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (X.__batchResponses[1].__changeResponses[i].statusCode < 400) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tK = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tN = X.__batchResponses[0].__changeResponses[i].statusText;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, t), jQuery.proxy(function(X) {\r\n\t\t\t\t\t\t\tt.handleErrors(X);\r\n\t\t\t\t\t\t}, t));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (K)\r\n\t\t\t\t\t\tsap.m.MessageToast.show(N);\r\n\t\t\t\t\tif (!D.fullScreen && !D.fullScreenFromTask && !D.fullfollowupOppt && !D.newOpportunityFromAccount && !D.fullScreenFromLead)\r\n\t\t\t\t\t\tt._enableMasterFooter(Q.data.Guid);\r\n\t\t\t\t\tt.ContextPath = \"Opportunities(guid'\" + Q.data.Guid + \"')\";\r\n\t\t\t\t\tif (D.followupOppt || D.fullScreen || D.fullScreenFromTask || D.fullScreenFromLead) {\r\n\t\t\t\t\t\tsap.ui.getCore().getEventBus().publish(\"cus.crm.opportunity\", \"followUpOpportunityCreated\", {\r\n\t\t\t\t\t\t\tcontextPath: t.ContextPath\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar U = sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"followupsuccessful\");\r\n\t\t\t\t\t\tsap.m.MessageToast.show(U, {\r\n\t\t\t\t\t\t\tcloseOnBrowserNavigation: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsap.ui.getCore().getEventBus().publish(\"cus.crm.opportunity\", \"opportunityCreated\");\r\n\t\t\t\t\t\tsap.m.MessageToast.show(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_SUCCESS\"), {\r\n\t\t\t\t\t\t\tcloseOnBrowserNavigation: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tt._clear_data();\r\n\t\t\t\t\tif (t.bBpDeterminationEnabled && t.bOrgDeterminationEnabled) {\r\n\t\t\t\t\t\tt.resetMultiDetermFlags();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar V = false;\r\n\t\t\t\t\tif (t.extHookNavigateAfterCreate) {\r\n\t\t\t\t\t\tV = t.extHookNavigateAfterCreate(O, Q);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (V) {\r\n\t\t\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\t\tvar W = t.ContextPath;\r\n\t\t\t\t\tif (!sap.ui.Device.system.phone && !D.fullScreen && !D.fullScreenFromTask && !D.fullScreenFromLead && !D.fullfollowupOppt && !D.newOpportunityFromAccount)\r\n\t\t\t\t\t\tt.oRouter.navTo(\"detail\", {\r\n\t\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\telse if (!sap.ui.Device.system.phone && D.fullScreen) {\r\n\t\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t} else if (!sap.ui.Device.system.phone && D.fullfollowupOppt) {\r\n\t\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t} else if (!sap.ui.Device.system.phone && (D.fullScreenFromTask || D.fullScreenFromLead)) {\r\n\t\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t} else if (!sap.ui.Device.system.phone && D.newOpportunityFromAccount) {\r\n\t\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t} else if (sap.ui.Device.system.phone && (D.fullScreen || D.fullScreenFromTask || D.fullScreenFromLead || D.fullfollowupOppt || D\r\n\t\t\t\t\t\t\t.newOpportunityFromAccount)) {\r\n\t\t\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\t\t\tcontextPath: W\r\n\t\t\t\t\t\t}, true);\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tt._navBack();\r\n\t\t\t\t}\r\n\r\n\t\t\t}, function(O) {\r\n\t\t\t\t//\tt.displayResponseErrorMessage(O, sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_FAILED\"));\r\n\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\tt.setBtnEnabled(\"sv\", true);\r\n\r\n\t\t\t\t//\tvar sFilter1 = new sap.ui.model.Filter(\"Businesspartner\", \"EQ\",t.BusPartnerId);\r\n\t\t\t\tt.oModel.read(\"/DuplicateSet\", {\r\n\t\t\t\t\tsuccess: jQuery.proxy(t._onPostalReadSuccess1, this),\r\n\t\t\t\t\terror: jQuery.proxy(t._onPostalReadError, this)\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t\t\r\n\t\t} else\r\n\t\t\treturn;\r\n\t},*/\r\n\thandleDetailPress: function(evt) {\r\n\t\tvar obj = evt.getSource().getBindingContext().getObject();\r\n\t\tthis.BPPartner = obj.BusinessPartner;\r\n\t},\r\n\tItemPress: function(evt) {\r\n\t\tvar obj = evt.getSource().getSelectedItem().getBindingContext().getObject();\r\n\t\tthis.BPPartner = obj.Businesspartner;\r\n\t\tsap.ui.getCore().byId(\"ProceedDup_id\").setVisible(true);\r\n\t\t//\tsap.ui.getCore().byId(\"\").setVisible(true);\r\n\t},\r\n\tDuplucateMethod: function(H, I, j, J, M, p, E, F, G, m, K, N, D, Fsave, CUSTOMERID) {\r\n\t\tvar t = this;\r\n\t\tif (CUSTOMERID !== undefined) {\r\n\t\t\tE.CUSTOMERID = CUSTOMERID;\r\n\t\t}\r\n\t\tE.Fsave = Fsave;\r\n\t\tthis.getView().getModel().create(\"/Opportunities\", E, null, function(O, Q) {\r\n\t\t\tvar R = t.getView().getModel(\"controllers\").getData().s2Controller;\r\n\t\t\tif (R) {\r\n\t\t\t\tR.opportunityID = O.Id;\r\n\t\t\t}\r\n\t\t\tif (H && (I.length > 0 || J.length > 0) && parseFloat(M) >= 4) {\r\n\t\t\t\tfor (var i = 0; i < I.length; i++) {\r\n\t\t\t\t\tvar S;\r\n\t\t\t\t\tfor (var k = 0; k < P.length; k++) {\r\n\t\t\t\t\t\tif (P[k].PartnerFunctionName == I[i].partner)\r\n\t\t\t\t\t\t\tS = P[k].PartnerFunctionCode;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tE = {\r\n\t\t\t\t\t\tHeaderGuid: O.Guid,\r\n\t\t\t\t\t\tPartnerNumber: I[i].key,\r\n\t\t\t\t\t\tPartnerFunctionCode: S\r\n\t\t\t\t\t};\r\n\t\t\t\t\tF.push(m.createBatchOperation(\"OpportunitySalesTeamSet\", \"POST\", E, null));\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < J.length; i++) {\r\n\t\t\t\t\tvar S;\r\n\t\t\t\t\tfor (var k = 0; k < P.length; k++) {\r\n\t\t\t\t\t\tif (P[k].PartnerFunctionName == J[i].partner)\r\n\t\t\t\t\t\t\tS = P[k].PartnerFunctionCode;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tE = {\r\n\t\t\t\t\t\tHeaderGuid: O.Guid,\r\n\t\t\t\t\t\tPartnerNumber: J[i].key,\r\n\t\t\t\t\t\tPartnerFunctionCode: S\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar T = [\r\n\t\t\t\t\t\t\"OpportunitySalesTeamSet(HeaderGuid=guid'\",\r\n\t\t\t\t\t\tE.HeaderGuid,\r\n\t\t\t\t\t\t\"',PartnerNumber='\",\r\n\t\t\t\t\t\tE.PartnerNumber,\r\n\t\t\t\t\t\t\"',PartnerFunctionCode='\",\r\n\t\t\t\t\t\tE.PartnerFunctionCode,\r\n\t\t\t\t\t\t\"')\"\r\n\t\t\t\t\t].join(\"\");\r\n\t\t\t\t\tG.push(m.createBatchOperation(T, \"DELETE\", null, null));\r\n\t\t\t\t}\r\n\t\t\t\tif (F.length > 0)\r\n\t\t\t\t\tm.addBatchChangeOperations(F);\r\n\t\t\t\tif (G.length > 0)\r\n\t\t\t\t\tm.addBatchChangeOperations(G);\r\n\t\t\t\tm.submitBatch(jQuery.proxy(function(X) {\r\n\t\t\t\t\tfor (var j = 0; j < X.__batchResponses.length; j++) {\r\n\t\t\t\t\t\tswitch (j) {\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\tif (X.__batchResponses[0]) {\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < X.__batchResponses[0].__changeResponses.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tif (X.__batchResponses[0].__changeResponses[i].statusCode < 400) {\r\n\t\t\t\t\t\t\t\t\t\t\tK = true;\r\n\t\t\t\t\t\t\t\t\t\t\tN = X.__batchResponses[0].__changeResponses[i].statusText;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tif (X.__batchResponses[1]) {\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < X.__batchResponses[1].__changeResponses.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tif (X.__batchResponses[1].__changeResponses[i].statusCode < 400) {\r\n\t\t\t\t\t\t\t\t\t\t\tK = true;\r\n\t\t\t\t\t\t\t\t\t\t\tN = X.__batchResponses[0].__changeResponses[i].statusText;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, t), jQuery.proxy(function(X) {\r\n\t\t\t\t\tt.handleErrors(X);\r\n\t\t\t\t}, t));\r\n\t\t\t}\r\n\t\t\tif (K)\r\n\t\t\t\tsap.m.MessageToast.show(N);\r\n\t\t\tif (!D.fullScreen && !D.fullScreenFromTask && !D.fullfollowupOppt && !D.newOpportunityFromAccount && !D.fullScreenFromLead)\r\n\t\t\t\tt._enableMasterFooter(Q.data.Guid);\r\n\t\t\tt.ContextPath = \"Opportunities(guid'\" + Q.data.Guid + \"')\";\r\n\t\t\tif (D.followupOppt || D.fullScreen || D.fullScreenFromTask || D.fullScreenFromLead) {\r\n\t\t\t\tsap.ui.getCore().getEventBus().publish(\"cus.crm.opportunity\", \"followUpOpportunityCreated\", {\r\n\t\t\t\t\tcontextPath: t.ContextPath\r\n\t\t\t\t});\r\n\t\t\t\tvar U = sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"followupsuccessful\");\r\n\t\t\t\tsap.m.MessageToast.show(U, {\r\n\t\t\t\t\tcloseOnBrowserNavigation: false\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsap.ui.getCore().getEventBus().publish(\"cus.crm.opportunity\", \"opportunityCreated\");\r\n\t\t\t\tsap.m.MessageToast.show(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_SUCCESS\"), {\r\n\t\t\t\t\tcloseOnBrowserNavigation: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tt._clear_data();\r\n\t\t\tif (t.bBpDeterminationEnabled && t.bOrgDeterminationEnabled) {\r\n\t\t\t\tt.resetMultiDetermFlags();\r\n\t\t\t}\r\n\t\t\tvar V = false;\r\n\t\t\tif (t.extHookNavigateAfterCreate) {\r\n\t\t\t\tV = t.extHookNavigateAfterCreate(O, Q);\r\n\t\t\t}\r\n\t\t\tif (V) {\r\n\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\tvar W = t.ContextPath;\r\n\t\t\tif (!sap.ui.Device.system.phone && !D.fullScreen && !D.fullScreenFromTask && !D.fullScreenFromLead && !D.fullfollowupOppt && !D.newOpportunityFromAccount)\r\n\t\t\t\tt.oRouter.navTo(\"detail\", {\r\n\t\t\t\t\tcontextPath: W\r\n\t\t\t\t}, true);\r\n\t\t\telse if (!sap.ui.Device.system.phone && D.fullScreen) {\r\n\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\tcontextPath: W\r\n\t\t\t\t}, true);\r\n\t\t\t} else if (!sap.ui.Device.system.phone && D.fullfollowupOppt) {\r\n\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\tcontextPath: W\r\n\t\t\t\t}, true);\r\n\t\t\t} else if (!sap.ui.Device.system.phone && (D.fullScreenFromTask || D.fullScreenFromLead)) {\r\n\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\tcontextPath: W\r\n\t\t\t\t}, true);\r\n\t\t\t} else if (!sap.ui.Device.system.phone && D.newOpportunityFromAccount) {\r\n\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\tcontextPath: W\r\n\t\t\t\t}, true);\r\n\t\t\t} else if (sap.ui.Device.system.phone && (D.fullScreen || D.fullScreenFromTask || D.fullScreenFromLead || D.fullfollowupOppt || D.newOpportunityFromAccount)) {\r\n\t\t\t\tt.oRouter.navTo(\"display\", {\r\n\t\t\t\t\tcontextPath: W\r\n\t\t\t\t}, true);\r\n\t\t\t} else\r\n\t\t\t\tt._navBack();\r\n\r\n\t\t}, function(O) {\r\n\t\t\tt.displayResponseErrorMessage(O, sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_FAILED\"));\r\n\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\tt.setBtnEnabled(\"sv\", true);\r\n\t\t});\r\n\r\n\t},\r\n\tDuplicateContinue: function(evt) {\r\n\t\tvar t = this;\r\n\t\tt.DuplicateFragment.close();\r\n\t\tvar Fsave = \"X\";\r\n\t\tvar CUSTOMERID = t.BPPartner;\r\n\t\tt.DuplicateFragment.close();\r\n\t\tt.DuplucateMethod(t.H, t.I, t.j, t.J, t.M, t.p, t.E, t.F, t.G, t.m, t.K, t.N, t.D, Fsave, CUSTOMERID);\r\n\t},\r\n\tDuplicateCancel: function(evt) {\r\n\t\tvar t = this;\r\n\t\tt.DuplicateFragment.close();\r\n\t\tvar Fsave = \"X\";\r\n\t\tvar CUSTOMERID = undefined;\r\n\t\t//\tt.DuplicateFragment.close();\r\n\t\tt.DuplucateMethod(t.H, t.I, t.j, t.J, t.M, t.p, t.E, t.F, t.G, t.m, t.K, t.N, t.D, Fsave, CUSTOMERID);\r\n\r\n\t},\r\n\tonPostalChange: function() {\r\n\t\tvar _oItem = this.getView().byId(\"cusPinCode\");\r\n\r\n\t\tvar _sPostalCode = this.getView().byId(\"cusPinCode\").getValue();\r\n\t\tif (_sPostalCode !== \"\")\r\n\t\t\t_oItem.setValueState(\"None\");\r\n\t\telse\r\n\t\t\t_oItem.setValueState(\"Error\");\r\n\r\n\t\tif (_sPostalCode !== \"\") {\r\n\t\t\tvar sFilter1 = new sap.ui.model.Filter(\"PostCode1\", \"EQ\", _sPostalCode);\r\n\t\t\tthis.oModel.read(\"/Zpost_codeSet\", {\r\n\t\t\t\tfilters: [sFilter1],\r\n\t\t\t\tsuccess: jQuery.proxy(this._onPostalReadSuccess, this),\r\n\t\t\t\terror: jQuery.proxy(this._onPostalReadError, this)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// this.oModel.setProperty(this._sSelectedAddItemPath + \"/City\", \"\");\r\n\t\t\t// this.oModel.setProperty(this._sSelectedAddItemPath + \"/District\", \"\");\r\n\t\t\t// this.oModel.setProperty(this._sSelectedAddItemPath + \"/Region\", \"\");\r\n\t\t}\r\n\r\n\t},\r\n\t_onPostalReadSuccess: function(d, oResponse) {\r\n\t\tvar json = new sap.ui.model.json.JSONModel(d.results);\r\n\t\t//this.byId(\"cusDistrict\").setModel(json);\r\n\t\tthis.byId(\"cusCity\").setModel(json);\r\n\t\tvar oItemTemplate = new sap.ui.core.ListItem({\r\n\t\t\tkey: \"{City1}\",\r\n\t\t\ttext: \"{City1}\"\r\n\t\t});\r\n\t\tthis.byId(\"cusCity\").bindAggregation(\"items\", {\r\n\t\t\tpath: \"/\",\r\n\t\t\ttemplateShareable: true,\r\n\t\t\t//filters: [_oFilter, _oFilter1],\r\n\t\t\ttemplate: oItemTemplate\r\n\t\t});\r\n\t\tif (d.results.length === 0) {\r\n\r\n\t\t\tsap.m.MessageToast.show(\"Enter a valid pin code\");\r\n\t\t\tthis.getView().byId(\"cusDistrict\").setValue(\"\");\r\n\t\t\tthis.getView().byId(\"cusCity\").setValue(\"\");\r\n\t\t\tthis.getView().byId(\"cusState\").setValue(\"\");\r\n\r\n\t\t\tthis.byId(\"cusCity\").setEnabled(false);\r\n\t\t\treturn;\r\n\r\n\t\t} else if (d.results.length === 1) {\r\n\t\t\tthis.getView().byId(\"cusDistrict\").setValue(d.results[0].City2);\r\n\t\t\tthis.getView().byId(\"cusCity\").setSelectedKey(d.results[0].City1);\r\n\t\t\tthis.getView().byId(\"cusCity\").setValueState(\"None\");\r\n\t\t\tthis.getView().byId(\"cusState\").setValue(d.results[0].Region);\r\n\r\n\t\t\tthis.byId(\"cusCity\").setEnabled(false);\r\n\r\n\t\t} else {\r\n\t\t\t//F4Code\r\n\t\t\tthis.getView().byId(\"cusDistrict\").setValue(d.results[0].City2);\r\n\t\t\tthis.getView().byId(\"cusCity\").setSelectedKey(\"\");\r\n\t\t\tthis.getView().byId(\"cusState\").setValue(d.results[0].Region);\r\n\t\t\t//\tthis.byId(\"cusDistrict\").setEnabled(false);\r\n\t\t\tthis.byId(\"cusCity\").setEnabled(true);\r\n\t\t}\r\n\t},\r\n\t_onPostalReadError: function(oResponse) {\r\n\r\n\t},\r\n\r\n\tshowAccountF4: function(e) {\r\n\t\tthis.accountF4Fragment = null;\r\n\t\tthis.accountF4Fragment = new sap.ui.xmlfragment(this.createId(\"accountF4\"),\r\n\t\t\t\"cus.crm.opportunity.CRM_OPPRTNTYExtension.view.AccountSelectDialogCustom\", this);\r\n\t\tthis.accountF4Fragment.setModel(this.oI18nModel, \"i18n\");\r\n\t\tvar j = new sap.ui.model.json.JSONModel();\r\n\t\tthis.accountF4Fragment.setModel(j);\r\n\r\n\t\tthis.accountF4Fragment.open();\r\n\r\n\t\tvar thataccF4 = this;\r\n\t\tthis.accountF4Fragment.attachBrowserEvent(\"keydown\", function(oEvent) {\r\n\t\t\tif (oEvent.keyCode === 27) {\r\n\t\t\t\tthataccF4.accountF4Fragment.close();\r\n\t\t\t\tthataccF4.accountF4Fragment.destroy();\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\r\n\tonBPSearch: function() {\r\n\r\n\t\tvar FirstName = this.accountF4Fragment.getContent()[0].mAggregations.content[0].getValue();\r\n\t\tvar Lastname = this.accountF4Fragment.getContent()[0].mAggregations.content[1].getValue();\r\n\t\tvar mobNum = this.accountF4Fragment.getContent()[0].mAggregations.content[2].getValue();\r\n\t\tvar contractNumber = this.accountF4Fragment.getContent()[0].mAggregations.content[3].getValue();\r\n\t\tvar rcNumber = this.accountF4Fragment.getContent()[0].mAggregations.content[4].getValue();\r\n\t\tvar chassisNumber = this.accountF4Fragment.getContent()[0].mAggregations.content[5].getValue();\r\n\t\tvar engineNumber = this.accountF4Fragment.getContent()[0].mAggregations.content[6].getValue();\r\n\t\tvar partnerNumber = this.accountF4Fragment.getContent()[0].mAggregations.content[7].getValue();\r\n\r\n\t\tvar l = this.accountF4Fragment.getContent()[1];\r\n\r\n\t\tvar spath = \"/ZBPF4SearchSet\";\r\n\r\n\t\tvar oFilter1 = new sap.ui.model.Filter(\"RCNumber\", sap.ui.model.FilterOperator.EQ, rcNumber);\r\n\t\tvar oFilter2 = new sap.ui.model.Filter(\"ChassisNumber\", sap.ui.model.FilterOperator.EQ, chassisNumber);\r\n\t\tvar oFilter3 = new sap.ui.model.Filter(\"NameFirst\", sap.ui.model.FilterOperator.EQ, FirstName);\r\n\t\tvar oFilter4 = new sap.ui.model.Filter(\"NameLast\", sap.ui.model.FilterOperator.EQ, Lastname);\r\n\r\n\t\tvar oFilter5 = new sap.ui.model.Filter(\"EngineNumber\", sap.ui.model.FilterOperator.EQ, engineNumber);\r\n\t\tvar oFilter6 = new sap.ui.model.Filter(\"Contract\", sap.ui.model.FilterOperator.EQ, contractNumber);\r\n\t\tvar oFilter7 = new sap.ui.model.Filter(\"Mobile\", sap.ui.model.FilterOperator.EQ, mobNum);\r\n\t\tvar oFilter8 = new sap.ui.model.Filter(\"Partner\", sap.ui.model.FilterOperator.EQ, partnerNumber);\r\n\r\n\t\tvar oFilters = [oFilter1, oFilter2, oFilter3, oFilter4, oFilter5, oFilter6, oFilter7, oFilter8];\r\n\t\tl.setModel(this.oModel);\r\n\r\n\t\tl.bindAggregation(\"items\", spath,\r\n\t\t\tfunction(sId, oContext) {\r\n\r\n\t\t\t\tvar oController = this;\r\n\t\t\t\treturn new sap.m.ObjectListItem({\r\n\r\n\t\t\t\t\ttitle: oContext.getProperty(\"FullName\") + \" (\" + oContext.getProperty(\"Partner\") + \")\",\r\n\t\t\t\t\tattributes: [new sap.m.ObjectAttribute({\r\n\r\n\t\t\t\t\t\ttext: \"{Mobile}\"\r\n\r\n\t\t\t\t\t}), new sap.m.ObjectAttribute({\r\n\r\n\t\t\t\t\t\ttext: \"{Address} {City} {Country}\"\r\n\r\n\t\t\t\t\t})],\r\n\t\t\t\t\ttype: sap.m.ListType.Active\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}, null, oFilters);\r\n\r\n\t},\r\n\r\n\t_refreshAccountList: function(s) {\r\n\t\tvar f = [];\r\n\t\tif (s !== \"\") {\r\n\t\t\tf.push(new sap.ui.model.Filter(this.accountFilterName, sap.ui.model.FilterOperator.Contains, s));\r\n\t\t}\r\n\t\tif (!this.accountF4Fragment) {\r\n\t\t\tthis.accountF4Fragment = new sap.ui.xmlfragment(this.createId(\"accountF4\"),\r\n\t\t\t\t\"cus.crm.opportunity.CRM_OPPRTNTYExtension.view.AccountSelectDialogCustom\", this);\r\n\t\t\tvar j = new sap.ui.model.json.JSONModel();\r\n\t\t\tthis.accountF4Fragment.setModel(j);\r\n\t\t\tthis.accountF4Fragment.setModel(this.oI18nModel, \"i18n\");\r\n\t\t}\r\n\t\tvar l = this.accountF4Fragment.getContent()[1];\r\n\t\tl.setModel(this.oModel);\r\n\t\tl.bindAggregation(\"items\", {\r\n\t\t\tpath: \"/AccountCollection\",\r\n\t\t\tparameters: {\r\n\t\t\t\texpand: \"MainAddress\",\r\n\t\t\t\tselect: \"accountID,MainAddress/city,MainAddress/country,name1,fullName\"\r\n\t\t\t},\r\n\t\t\tfilters: f,\r\n\t\t\ttemplate: this.accountF4Template\r\n\t\t});\r\n\t\tl.getBinding(\"items\").attachDataReceived(jQuery.proxy(this._setAccountJsonModel), this);\r\n\t},\r\n\t_setAccountJsonModel: function(e) {\r\n\t\tvar r = e.getParameter(\"data\").results;\r\n\t\tif (r.length === 0) {\r\n\t\t\tthis.accountF4Fragment.getContent()[1].setNoDataText(this.oResourceBundle.getText(\"NO_DATA_TEXT\"));\r\n\t\t}\r\n\t},\r\n\r\n\tcloseAccountF4: function(e) {\r\n\t\tthis.accountF4Fragment.close();\r\n\t\tthis.accountF4Fragment.destroy();\r\n\t},\r\n\tcloseAccountToolbar: function(e) {\r\n\t\tvar l = this.accountF4Fragment.getContent()[1];\r\n\t\tthis.accountF4Fragment.getModel().setData({\r\n\t\t\tAccountCollection: []\r\n\t\t});\r\n\t\tl.setNoDataText(this.oResourceBundle.getText(\"LOADING_TEXT\"));\r\n\t\tvar s = \"\";\r\n\t\tthis._refreshAccountList(s);\r\n\t},\r\n\r\n\tsetAccount: function(e) {\r\n\t\tthis.oSelectedAccount = e.getSource().getSelectedItem().getBindingContext().getObject();\r\n\t\tvar a = this.oSelectedAccount.FullName;\r\n\t\tvar b = this.oSelectedAccount.Partner;\r\n\t\tif (a && a !== \"\") {\r\n\t\t\tthis.byId(\"customer\").setValue(a);\r\n\t\t\tthis.accountName = a;\r\n\t\t} else {\r\n\t\t\tthis.byId(\"customer\").setValue(b);\r\n\t\t\tthis.accountName = b;\r\n\t\t}\r\n\t\tthis.accountId = b;\r\n\t\tthis._setAccountDetails(this.accountId);\r\n\t\tthis.byId(\"customer\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusFirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusLastName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd1\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd2\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd3\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusPinCode\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusPhone\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusStd\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.setEnabledUserField(false);\r\n\t\tthis.byId(\"customer\").setEnabled(true);\r\n\t\tthis.accountF4Fragment.getContent()[1].removeSelections();\r\n\t\tthis._triggerDetermination();\r\n\t\tthis.accountF4Fragment.close();\r\n\t\tthis.accountF4Fragment.destroy();\r\n\t\tthis.enableSaveBtn();\r\n\t},\r\n\t_setAccountDetails: function(accId) {\r\n\t\tthis.oModel.read(\"/ZAccountCollection(accountID='\" + accId + \"',Buag='')\", null, null, true, jQuery.proxy(function(d, r) {\r\n\t\t\tif (d) {\r\n\t\t\t\t\r\n\r\n\t\tif (d.BpType === \"2\" || d.BpType === \"3\") {\r\n\t\t\tthis.byId(\"customerName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusMiddleName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(false);\r\n\t\t\tthis.byId(\"Name1\").setVisible(true);\r\n\t\t\tthis.byId(\"Name2\").setVisible(true);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"LastName\").setVisible(true);\r\n\t\t\t//\tthis.getView().byId(\"Name2\").setRequired(true);\r\n\t\t\tif (d.BpType === \"3\") {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(false);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(false);\r\n\t\t\t\t//\tthis.getView().byId(\"Name2\").setRequired(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if (d.BpType === \"\" || d.BpType === \"1\") {\r\n\t\t\tthis.byId(\"Name1\").setVisible(false);\r\n\t\t\tthis.byId(\"Name2\").setVisible(false);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"LastName\").setVisible(false);\r\n\t\t\tthis.byId(\"customerName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMiddleName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\tthis.byId(\"mob\").setVisible(true);\r\n\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t}\r\n\t\t\t\tthis.byId(\"cusFirstName\").setValue(d.NameFirst);\r\n\t\t\t\tthis.byId(\"cusLastName\").setValue(d.NameLast);\r\n\t\t\t\tthis.byId(\"FirstName\").setValue(d.NameFirst);\r\n\t\t\t\tthis.byId(\"LastName\").setValue(d.NameLast);\r\n\t\t\t\tthis.byId(\"cusMiddleName\").setValue(d.NameMiddle);\r\n\t\t\t\tthis.byId(\"cusAdd1\").setValue(d.Address1);\r\n\t\t\t\tthis.byId(\"cusAdd2\").setValue(d.Address2);\r\n\t\t\t\tthis.byId(\"cusAdd3\").setValue(d.Address3);\r\n\t\t\t\tthis.byId(\"cusMobile\").setValue(d.Mobile);\r\n\t\t\t\tthis.byId(\"cusPhone\").setValue(d.Phone);\r\n\t\t\t\tthis.byId(\"cusStd\").setValue(d.TelExtens);\r\n\t\t\t\tthis.byId(\"cusCity\").setValue(d.City1);\r\n\t\t\t\tthis.byId(\"cusDistrict\").setValue(d.District);\r\n\t\t\t\tthis.byId(\"cusState\").setValue(d.Region);\r\n\t\t\t\tthis.byId(\"cusPinCode\").setValue(d.PostCode1);\r\n\t\t\t\tthis.onPostalChange();\r\n\t\t\t\tthis.BPTYPECheck = d.BpType;\r\n\t\t\t\tif (d.BpType == \"3\") {\r\n\t\t\t\t\tthis.byId(\"cusPhone\").setVisible(false);\r\n\t\t\t\t\tthis.byId(\"cusStd\").setVisible(false);\r\n\t\t\t\t\tthis.byId(\"cusMobile\").setVisible(false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.accountId = \"\";\r\n\t\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusCity\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusDistrict\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t\t}\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tjQuery.sap.log.error(\"Read failed in S4->_setAccountDetails:\" + e.response.body);\r\n\t\t}, this));\r\n\r\n\t},\r\n\r\n\tonAccountSuggestItemSelected: function(e) {\r\n\t\tvar i = e.getParameter(\"selectedItem\");\r\n\t\tvar a = null;\r\n\t\ta = i.data(\"oAccount\");\r\n\t\tthis.accountName = a.fullName === \"\" ? a.accountID : a.fullName;\r\n\t\tthis.accountId = a.accountID;\r\n\t\tthis.byId(\"customer\").setValue(this.accountName);\r\n\t\tthis._setAccountDetails(this.accountId);\r\n\t\tthis.setEnabledUserField(false);\r\n\t\tthis.byId(\"customer\").setEnabled(true);\r\n\t\tthis._triggerDetermination();\r\n\t\tthis.enableSaveBtn();\r\n\t},\r\n\tonAccountInputFieldChanged: function(e) {\r\n\t\tthis.byId(\"customer\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tvar a = e.getSource();\r\n\t\tvar val = e.mParameters.value;\r\n\t\tvar regexp = /^[a-zA-Z0-9 ]+$/;\r\n\t\tvar res = regexp.test(val);\r\n\t\tif (res) {\r\n\t\t\te.getSource().setValue(val);\r\n\t\t} else {\r\n\t\t\tval = val.slice(0, val.length - 1);\r\n\t\t\t//val = e.getSource()._lastValue;\r\n\t\t\te.getSource().setValue(val);\r\n\t\t}\r\n\t\tthis._setAccount(a.getValue());\r\n\t\ta.setShowSuggestion(true);\r\n\t\ta.setFilterSuggests(false);\r\n\t\tvar c = function(A) {\r\n\t\t\ta.removeAllSuggestionItems();\r\n\t\t\tif (a.getValue().length > 0) {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\tfor (i in A) {\r\n\t\t\t\t\tvar o = A[i];\r\n\t\t\t\t\tif (o.fullName.toUpperCase() == a.getValue().toUpperCase()) {\r\n\t\t\t\t\t\tthis._setAccount(o.fullName);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar C = new sap.ui.core.CustomData({\r\n\t\t\t\t\t\tkey: \"oAccount\",\r\n\t\t\t\t\t\tvalue: o\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar I = new sap.ui.core.Item({\r\n\t\t\t\t\t\ttext: o.fullName,\r\n\t\t\t\t\t\tcustomData: C\r\n\t\t\t\t\t});\r\n\t\t\t\t\ta.addSuggestionItem(I);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis._readAccount(a.getValue(), c);\r\n\t},\r\n\t_readAccount: function(s, c) {\r\n\t\tvar t = this,\r\n\t\t\tm = this.getView().getModel();\r\n\t\tthis.oModel.read(\r\n\t\t\t\"/AccountCollection?$expand=MainAddress&$select=accountID,name1,name2,fullName,MainAddress/address,MainAddress/street,MainAddress/mobilePhone,MainAddress/phone,MainAddress/city,MainAddress/country\",\r\n\t\t\tnull, \"$top=10&$filter=substringof(%27\" + encodeURIComponent(s) + \"%27,fullName)\", true,\r\n\t\t\tfunction(d, r) {\r\n\t\t\t\tvar a = jQuery.parseJSON(JSON.stringify(d));\r\n\t\t\t\tif (c)\r\n\t\t\t\t\tc.call(t, a.results);\r\n\t\t\t},\r\n\t\t\tfunction(e) {\r\n\t\t\t\tjQuery.sap.log.error(\"Read failed in S4->_readAccount:\" + e.response.body);\r\n\t\t\t});\r\n\t},\r\n\r\n\t_checkDataLoss: function() {\r\n\t\tvar t = {\r\n\t\t\tDescription: this.byId(\"desc\").getValue(),\r\n\t\t\tExpectedSalesVolume: \"0.00\", //this.byId(\"volume\").getValue(),\r\n\t\t\tCurrencyCode: this.byId(\"currency\").getValue(),\r\n\t\t\tChanceOfSuccess: this.byId(\"chanceofSuccess\").getValue(),\r\n\t\t\tStartDate: this.byId(\"datePickerStartDate\").getValue(),\r\n\t\t\tClosingDate: this.byId(\"datePickerCloseDate\").getValue(),\r\n\t\t\tAccountName: this.byId(\"customer\").getValue(),\r\n\t\t\tMainContactName: this.byId(\"inputMainContact\").getValue(),\r\n\t\t\tEmployeeRespName: this.byId(\"inputEmpResponsible_S5\").getValue(),\r\n\t\t\tSalesStageCode: this.byId(\"stagedropdown\").getSelectedKey(),\r\n\t\t\tUserStatusCode: this.byId(\"statusdropdown\").getSelectedKey(),\r\n\t\t\tPriorityCode: this.byId(\"priority_val\").getSelectedKey(),\r\n\t\t\tForecastRelevance: this.byId(\"Switch\").getState(),\r\n\t\t\tSalesOrg: this.byId(\"salesOrganization\").getValue(),\r\n\r\n\t\t\tNAMEFIRST: this.byId(\"cusFirstName\").getValue(),\r\n\t\t\tNAMELAST: this.byId(\"cusLastName\").getValue(),\r\n\t\t\tADDRESS1: this.byId(\"cusAdd1\").getValue(),\r\n\t\t\tADDRESS2: this.byId(\"cusAdd2\").getValue(),\r\n\t\t\tADDRESS3: this.byId(\"cusAdd3\").getValue(),\r\n\t\t\tPHONE: this.byId(\"cusPhone\").getValue(),\r\n\t\t\tTelExtens: this.byId(\"cusStd\").getValue(),\r\n\t\t\tMOBILE: this.byId(\"cusMobile\").getValue(),\r\n\t\t\tPOST_CODE1: this.byId(\"cusPinCode\").getValue(),\r\n\t\t\tCUSTSEGMENT: this.byId(\"cusSeg\").getSelectedKey(),\r\n\t\t\tFLEETSIZE: this.byId(\"cusFleetSize\").getSelectedKey(),\r\n\t\t\tFLEETAPPL: this.byId(\"cusFleetApp\").getSelectedKey(),\r\n\t\t\tDEALERNAME: this.byId(\"cusDealerSelect\").getSelectedKey(),\r\n\t\t\tDEALERLOC: this.byId(\"cusDealerLocation\").getValue(),\r\n\t\t\tZleadtype: this.byId(\"leadType\").getSelectedKey()\r\n\t\t};\r\n\t\tvar a = this.byId(\"productBasket\").getModel(\"json\").getData();\r\n\t\tvar b = this.byId(\"partnerBasket\").getModel(\"json\").getData();\r\n\t\tthis.jsontempEntry = JSON.stringify(t);\r\n\t\tthis.jsontempProducts = JSON.stringify(a);\r\n\t\tthis.jsontempPartners = JSON.stringify(b);\r\n\t\tif (this.jsonoldEntry !== this.jsontempEntry || this.jsonoldProducts !== this.jsontempProducts || this.jsonoldPartners !== this.jsontempPartners) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\textHookCustomInit: function(e) {\r\n\t\t// Place your hook implementation code here \r\n\t\tthis._custData = [];\r\n\t\tthis._custData.ZProduct = [];\r\n\t\tthis._custData.ZProduct.results = {};\r\n\r\n\t\tthis._custJsonModel = new sap.ui.model.json.JSONModel(this._custData);\r\n\t\tthis._custJsonModel.setSizeLimit(200);\r\n\t\tthis.getView().setModel(this._custJsonModel, \"custJson\");\r\n\t\tvar oData = [];\r\n\t\toData.results = {};\r\n\t\tvar json = new sap.ui.model.json.JSONModel(oData);\r\n\t\tthis.byId(\"cusCity\").setModel(json);\r\n\t\tthis.byId(\"idProdTable\").removeAllItems();\r\n\t\tthis.byId(\"ProductButton11\").setEnabled(false);\r\n\t\tvar dateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\tpattern: \"dd.MM.yyyy\",\r\n\t\t\tUTC: false\r\n\t\t});\r\n\t\tthis.getView().byId(\"cusDatePickerVisit\").setValue(dateFormat.format(new Date(), false));\r\n\t\tthis.bindFleetSize();\r\n\t\tvar t = this;\r\n\t\tthis.byId(\"cusPinCode\").onsapenter = function() {\r\n\t\t\tt.onPostalChange();\r\n\t\t};\r\n\r\n\t\tt.getView().byId(\"leadType\").setValue(\"\");\r\n\t\tthis.oModel.read(\"/ZFLEET_APP_MASTSSet\", null, [], true, jQuery.proxy(function(\r\n\t\t\taData, b) {\r\n\t\t\tt._custData.ZFLEET_APP_MASTS = aData;\r\n\t\t\tt._custJsonModel.setData(t._custData);\r\n\t\t\tt._custJsonModel.updateBindings();\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tthis.handleErrors(e);\r\n\t\t}, this));\r\n\r\n\t\tthis.oModel.read(\"/ZcustsegSet\", null, [], true, jQuery.proxy(function(\r\n\t\t\taData, b) {\r\n\t\t\tt._custData.Zcustseg = aData;\r\n\t\t\tt._custJsonModel.setData(t._custData);\r\n\r\n\t\t\tt._custJsonModel.updateBindings();\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tthis.handleErrors(e);\r\n\t\t}, this));\r\n\r\n\t\tthis.oModel.read(\"/ZsalesofficeF4Set\", null, [], true, jQuery.proxy(function(\r\n\t\t\taData, b) {\r\n\t\t\tt._custData.ZsalesofficeF4Set = aData;\r\n\t\t\tt._custJsonModel.setData(t._custData);\r\n\r\n\t\t\tt._custJsonModel.updateBindings();\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tthis.handleErrors(e);\r\n\t\t}, this));\r\n\r\n\t\tthis.oModel.read(\"/ZsorgF4Set\", null, [], true, jQuery.proxy(function(\r\n\t\t\taData, b) {\r\n\t\t\tt._custData.ZsorgF4Set = aData;\r\n\t\t\tt._custJsonModel.setData(t._custData);\r\n\r\n\t\t\tt._custJsonModel.updateBindings();\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tthis.handleErrors(e);\r\n\t\t}, this));\r\n\r\n\t\tthis.oModel.read(\"/Zcrmc_distchanF4Set\", null, [], true, jQuery.proxy(function(\r\n\t\t\taData, b) {\r\n\t\t\tt._custData.Zcrmc_distchanF4Set = aData;\r\n\t\t\tt._custJsonModel.setData(t._custData);\r\n\r\n\t\t\tt._custJsonModel.updateBindings();\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tthis.handleErrors(e);\r\n\t\t}, this));\r\n\r\n\t\tthis.oModel.read(\"/ZloanTypeF4Set\", null, [], true, jQuery.proxy(function(\r\n\t\t\taData, b) {\r\n\t\t\t//\taData.results.push({Attribute: \"T\", Attributetxt: \"TopUp\"})\t;\r\n\t\t\tt._custData.ZloanTypeF4Set = aData;\r\n\t\t\tt._custJsonModel.setData(t._custData);\r\n\r\n\t\t\tt._custJsonModel.updateBindings();\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tthis.handleErrors(e);\r\n\t\t}, this));\r\n\r\n\t\tthis.getView().byId(\"cusPhone\").attachBrowserEvent(\"keypress\", function(e) {\r\n\t\t\tvar key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];\r\n\t\t\tif (!($.inArray(e.which, key_codes) >= 0)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.getView().byId(\"cusStd\").attachBrowserEvent(\"keypress\", function(e) {\r\n\t\t\tvar key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];\r\n\t\t\tif (!($.inArray(e.which, key_codes) >= 0)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.getView().byId(\"cusMobile\").attachBrowserEvent(\"keypress\", function(e) {\r\n\t\t\tvar key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];\r\n\t\t\tif (!($.inArray(e.which, key_codes) >= 0)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.getView().byId(\"cusPinCode\").attachBrowserEvent(\"keypress\", function(e) {\r\n\t\t\tvar key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];\r\n\t\t\tif (!($.inArray(e.which, key_codes) >= 0)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar fromDate = new Date();\r\n\t\tfromDate.setDate(fromDate.getDate() - 1);\r\n\t\tthis.getView().byId(\"cusDatePickerNextFollowup\").setMinDate(fromDate);\r\n\t\tthis.getView().byId(\"cusDatePickerTentative\").setMinDate(fromDate);\r\n\t\tthis.getView().byId(\"cusDatePickerVisit\").setMaxDate(new Date());\r\n\t\tthis.ResetFunc();\r\n\r\n\t},\r\n\textHookEnableSaveBtn: function(e) {\r\n\t\tthis.setBtnEnabled(\"sv\", true);\r\n\t},\r\n\r\n\textHookOnSave: function() {\r\n\t\t// Place your hook implementation code here \r\n\t\tif (this.validateCustomSavePage() === false) {\r\n\t\t\tsap.ca.ui.message.showMessageToast(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"MANDAT_FIELD\"));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar arr = [\"7\", \"8\", \"9\"];\r\n\t\tvar FDigit = this.byId(\"cusMobile\").getValue()[0];\r\n\t\tif ((this.byId(\"cusMobile\").getValue().length < 10 && this.byId(\"cusMobile\").getVisible() === true) || (arr.indexOf(FDigit) === -1 &&\r\n\t\t\t\tthis.byId(\"cusMobile\").getVisible() === true)) {\r\n\t\t\tthis.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tsap.m.MessageToast.show(\"Enter Valid Mobile Number\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar prodTab = this.byId(\"idProdTable\");\r\n\t\tvar Items = prodTab.getItems();\r\n\t\tif (Items.length === 0 && this.byId(\"BusAggr\").getVisible() === false) {\r\n\t\t\tsap.m.MessageToast.show(\"Select atleast one Product and Variant\");\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\r\n\t\t\tfor (var i = 0; i < Items.length; i++) {\r\n\t\t\t\tif (Items[i].getCells()[0].getSelectedKey() === \"\") {\r\n\t\t\t\t\tItems[i].getCells()[0].setValueState(\"Error\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (Items[i].getCells()[1].getSelectedKey() === \"\") {\r\n\t\t\t\t\tItems[i].getCells()[1].setValueState(\"Error\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (Items[i].getCells()[2].getValue() === \"\") {\r\n\t\t\t\t\tItems[i].getCells()[2].setValueState(\"Error\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\textHookSaveOentry: function(E) {\r\n\t\t// Place your hook implementation code here \r\n\r\n\t},\r\n\tvalidateProductRow: function() {\r\n\t\tvar hasValid = false;\r\n\t\tvar items = this.byId(\"idProdTable\").getItems();\r\n\t\tfor (var i = 0; i < items.length; i++) {\r\n\r\n\t\t\tvar prod = items[i].mAggregations.cells[0].getSelectedKey();\r\n\t\t\tvar varient = items[i].mAggregations.cells[1].getSelectedKey();\r\n\t\t\tvar qty = items[i].mAggregations.cells[2].getValue();\r\n\t\t\tif (prod !== \"\") {\r\n\t\t\t\titems[i].mAggregations.cells[0].setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t} else {\r\n\t\t\t\thasValid = true;\r\n\t\t\t\titems[i].mAggregations.cells[0].setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t}\r\n\t\t\tif (varient !== \"\") {\r\n\r\n\t\t\t\titems[i].mAggregations.cells[1].setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t} else {\r\n\t\t\t\thasValid = true;\r\n\t\t\t\titems[i].mAggregations.cells[1].setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t}\r\n\t\t\tif (qty !== \"\") {\r\n\t\t\t\titems[i].mAggregations.cells[2].setValueState(\"None\");\r\n\t\t\t} else {\r\n\t\t\t\thasValid = true;\r\n\t\t\t\titems[i].mAggregations.cells[2].setValueState(\"Error\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn hasValid;\r\n\t},\r\n\tbindFleetSize: function() {\r\n\t\tvar _aData = [];\r\n\t\t_aData.results = [];\r\n\t\tfor (var i = 0; i < 101; i++) {\r\n\t\t\tvar record = {};\r\n\t\t\tif (i == 100) {\r\n\t\t\t\trecord = {\r\n\t\t\t\t\tfSize: \"Above 100\"\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\trecord = {\r\n\t\t\t\t\tfSize: i\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t_aData.results.push(record);\r\n\t\t}\r\n\t\tvar jModel = this.getView().getModel(\"custJson\");\r\n\t\tjModel.oData.fleetSize = _aData;\r\n\t\tjModel.updateBindings();\r\n\t},\r\n\t/********************Product table functions********************/\r\n\tprdLivechange: function(evt) {\r\n\t\tvar val = evt.getSource();\r\n\t},\r\n\tonComboCityChanged: function(evt) {\r\n\t\tevt.getSource().setValueState(\"None\");\r\n\t},\r\n\r\n\tonProductChange: function(oEvent) {\r\n\t\toEvent.getSource().setValueState(\"None\");\r\n\t\tvar _sProductKey = oEvent.getSource().getSelectedKey();\r\n\t\tthis.PK = _sProductKey;\r\n\t\toEvent.getSource().setSelectedKey(_sProductKey);\r\n\t\tvar _selectedItem = oEvent.getSource().getParent();\r\n\t\tvar _ind = this.byId(\"idProdTable\").getItems().length;\r\n\t\tthis._bindVariants(_sProductKey, _ind);\r\n\t},\r\n\t_bindVariants: function(sKey, _index) {\r\n\t\tvar DC = this.byId(\"cusDealerCVPV\").getSelectedKey();\r\n\t\tvar SC = this.byId(\"cusDistchan\").getSelectedKey();\r\n\t\tvar _sPath = \"/CategoryHelpSet('\" + sKey + \"')/ProductHelpSet?$filter=DistChan eq '\" + SC + \"' and SalesOffice eq '\" + DC + \"'\";\r\n\t\t//\tthis.oModel.read(\"/ZBU_DESCRIPSet\", null, [\"$filter=Branch eq '\" + b + \"' and Zchannel eq '\" + d + \"'\"], true,\r\n\t\tthis._readVariants(_sPath, _index);\r\n\t},\r\n\t_readVariants: function(sPath, iIndex) {\r\n\t\tvar t = this;\r\n\t\tthis.oModel.read(sPath, null, null, true, jQuery.proxy(function(o, b) {\r\n\t\t\t//\tvar Varinput=t.byId(\"idProdTable\").getItems()[t.Index].getCells()[1];\r\n\t\t\tvar Varinput = t.temp1.getCells()[1];\r\n\t\t\tt.varinpt = Varinput;\r\n\t\t\tvar json = new sap.ui.model.json.JSONModel(o.results);\r\n\t\t\tVarinput.setModel(json);\r\n\t\t\tvar oItemTemplate = new sap.ui.core.ListItem({\r\n\t\t\t\tkey: \"{ProductId}\",\r\n\t\t\t\ttext: \"{ShtextLarge}\"\r\n\t\t\t});\r\n\t\t\tVarinput.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"/\",\r\n\t\t\t\ttemplateShareable: true,\r\n\t\t\t\t//filters: [_oFilter, _oFilter1],\r\n\t\t\t\ttemplate: oItemTemplate\r\n\t\t\t});\r\n\r\n\t\t\tvar _jModdel = t.getView().getModel(\"custJson\");\r\n\t\t\tvar _productData = _jModdel.oData.ZProduct.results;\r\n\t\t\t_productData[iIndex - 1].CategoryId = t.PK;\r\n\t\t\t_productData[iIndex - 1].relatedProducts = o.results;\r\n\t\t\t_jModdel.updateBindings();\r\n\r\n\t\t}, this), jQuery.proxy(function(E) {\r\n\t\t\tthis.handleErrors(E);\r\n\t\t}, this));\r\n\t},\r\n\t_setProductCategoryData: function(jsonModel, bAddFirstProduct, aNewRecord) {\r\n\t\tthis.oModel.read(\"/CategoryHelpSet\", null, null, true, jQuery.proxy(function(o, r) {\r\n\t\t\tif (bAddFirstProduct) {\r\n\r\n\t\t\t\taNewRecord.categoryData = r.data.results;\r\n\t\t\t\tjsonModel.oData.ZProduct.results = [];\r\n\t\t\t\tjsonModel.oData.ZProduct.results.push(aNewRecord);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar len = jsonModel.oData.ZProduct.results.length;\r\n\t\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\t\tjsonModel.oData.ZProduct.results[i].categoryData = r.data.results;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}, this), jQuery.proxy(function(E) {\r\n\t\t\tthis.handleErrors(E);\r\n\t\t}, this));\r\n\t},\r\n\taddProductTableRow: function(evt) {\r\n\t\tvar _oProdTable = this.byId(\"idProdTable\");\r\n\t\tthis.ProdTab = _oProdTable;\r\n\r\n\t\tvar jModel = this.getView().getModel(\"custJson\");\r\n\t\tvar _tableData = jModel.oData.ZProduct.results;\r\n\t\tvar _catData = [];\r\n\t\tvar newRowRecord = {\r\n\t\t\t\"ObjectId\": \"\",\r\n\t\t\t\"Guid\": \"\",\r\n\t\t\t\"OobjectId\": \"\",\r\n\t\t\t\"CategoryId\": \"\",\r\n\t\t\t\"ProductId\": \"\",\r\n\t\t\t\"Quantity\": \"\",\r\n\t\t\t\"categoryData\": _catData\r\n\t\t};\r\n\t\tif (_tableData !== undefined && _tableData !== null && _tableData.length > 0) {\r\n\t\t\t_catData = _tableData[0].categoryData;\r\n\t\t\tnewRowRecord.categoryData = _catData;\r\n\t\t\t_tableData.push(newRowRecord);\r\n\t\t\tjModel.updateBindings();\r\n\t\t} else {\r\n\t\t\tthis._setProductCategoryData(jModel, true, newRowRecord);\r\n\t\t}\r\n\t\tthis.idProdTableColumnListItem = this.byId(\"idProdTableColumnListItem\");\r\n\t\tvar temp = this.idProdTableColumnListItem.clone();\r\n\t\tthis.temp1 = temp;\r\n\t\tthis.ProdTab.addItem(temp);\r\n\t\tvar that = this;\r\n\t\tthis.oModel.read(\"/CategoryHelpSet\", null, null, false, jQuery.proxy(function(o, r) {\r\n\r\n\t\t\tvar json = new sap.ui.model.json.JSONModel(o.results);\r\n\t\t\tvar Prod = that.temp1.getCells()[0];\r\n\t\t\tProd.setModel(json);\r\n\t\t\tvar oItemTemplate = new sap.ui.core.ListItem({\r\n\t\t\t\tkey: \"{CategoryId}\",\r\n\t\t\t\ttext: \"{CategoryText}\"\r\n\t\t\t});\r\n\t\t\tProd.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"/\",\r\n\t\t\t\ttemplateShareable: true,\r\n\t\t\t\t//filters: [_oFilter, _oFilter1],\r\n\t\t\t\ttemplate: oItemTemplate\r\n\t\t\t});\r\n\r\n\t\t}, this), jQuery.proxy(function(E) {\r\n\t\t\tthis.handleErrors(E);\r\n\t\t}, this));\r\n\r\n\t},\r\n\tdeleteProductTableRow: function(oEvent) {\r\n\t\tvar that = this;\r\n\t\tvar d = that.getView().getModel(\"custJson\").getData();\r\n\t\tvar lineItem = oEvent.getSource().getParent();\r\n\t\tvar Pkey = lineItem.getCells()[0].getSelectedKey();\r\n\t\tvar Vkey = lineItem.getCells()[1].getSelectedKey();\r\n\t\tvar Qty = lineItem.getCells()[2].getValue();\r\n\t\tvar res = this.getView().getModel(\"custJson\").oData.ZProduct.results;\r\n\t\tfor (var i = 0; i < res.length; i++) {\r\n\t\t\tvar resKey = res[i].CategoryId;\r\n\t\t\t//\tvar resKey=res[i].CategoryId;\r\n\t\t\tif (Pkey === resKey) {\r\n\t\t\t\td.ZProduct.results.splice(i, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthat.ProdTab.removeItem(lineItem);\r\n\t\tthis.getView().getModel(\"custJson\").updateBindings();\r\n\t},\r\n\t_onExistingCustSwich: function(oEvent) {\r\n\r\n\t\tif (oEvent.getParameter(\"state\")) {\r\n\t\t\tthis.setEnabledUserField(true);\r\n\t\t\tthis.byId(\"cusLblCustomer\").setVisible(true);\r\n\t\t\tthis.byId(\"customer\").setVisible(true);\r\n\t\t\tthis.byId(\"applicantType\").setVisible(false);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"BusAggr\").setVisible(false);\r\n\t\t\tthis.byId(\"BusAggr\").setValue();\r\n\t\t\tthis.byId(\"LastName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMiddleName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(true);\r\n\t\t\tthis.byId(\"customerName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\t//this.byId(\"tmlCustomer\").setVisible(false);\r\n\t\t\tthis.byId(\"tmlCustomer\").setVisible(true);\r\n\r\n\t\t\t//////////////////////////////////\r\n\t\t\tthis.byId(\"customer\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMiddleName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDistrict\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusCity\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\r\n\t\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\r\n\t\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFleetSize\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusSeg\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusFleetApp\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusFleetSize\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDistchan\").setSelectedKey(\"\");\r\n\t\t\t//this.byId(\"statusdropdown\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusRemark\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDistchan\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"leadType\").setSelectedKey(\"\");\r\n\t\t\tvar dateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\tpattern: \"dd.MM.yyyy\",\r\n\t\t\t\tUTC: false\r\n\t\t\t});\r\n\t\t\tthis.byId(\"cusDatePickerVisit\").setValue(dateFormat.format(new Date(), false));\r\n\t\t\tthis.byId(\"cusDealerSelect\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\t\t/////////// set value state error ///////////\r\n\r\n\t\t} else {\r\n\t\t\tthis.setEnabledUserField(true);\r\n\t\t\tthis.byId(\"cusLblCustomer\").setVisible(false);\r\n\t\t\tthis.byId(\"customer\").setVisible(false);\r\n\t\t\tthis.byId(\"tmlCustomer\").setVisible(true);\r\n\t\t\tthis.byId(\"BusAggr\").setVisible(false);\r\n\t\t\tthis.byId(\"BusAggr\").setValue();\r\n\t\t\tthis.byId(\"customer\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMiddleName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDistrict\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusCity\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\r\n\t\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFleetSize\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusSeg\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusFleetApp\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusFleetSize\").setSelectedKey(\"\");\r\n\r\n\t\t\tthis.byId(\"cusDealerSelect\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDistchan\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDistchan\").setValue(\"\");\r\n\t\t\t//\tthis.byId(\"applicantType\").setSelectedKey(\"1\");\r\n\t\t\tthis.byId(\"leadType\").setValue(\"\");\r\n\t\t\tthis.byId(\"tmlCustomer\").setSelectedKey(\"\");\r\n\r\n\t\t\tthis.byId(\"cusDatePickerNextFollowup\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDatePickerTentative\").setValue(\"\");\r\n\t\t\tvar dateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\tpattern: \"dd.MM.yyyy\",\r\n\t\t\t\tUTC: false\r\n\t\t\t});\r\n\t\t\tthis.byId(\"cusDatePickerVisit\").setValue(dateFormat.format(new Date(), false));\r\n\r\n\t\t\t//this.byId(\"statusdropdown\").setValue(\"\");\r\n\t\t\t//this.byId(\"statusdropdown\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusRemark\").setValue(\"\");\r\n\r\n\t\t\tthis.byId(\"Name1\").setVisible(false);\r\n\r\n\t\t\tthis.byId(\"Name2\").setVisible(false);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"LastName\").setVisible(false);\r\n\t\t\tthis.byId(\"customerName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMiddleName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(true);\r\n\t\t\tthis.byId(\"applicantType\").setVisible(true);\r\n\r\n\t\t\t/////////// set value state error ///////////\r\n\r\n\t\t\tif (this.byId(\"applicantType\").getVisible()) {\r\n\t\t\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\tthis.byId(\"applicantType\").setSelectedKey(\"\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.byId(\"ProductButton11\").setEnabled(false);\r\n\t\tthis.accountId = \"\";\r\n\t\tthis.contactId = \"\";\r\n\t\tthis.ProspectNumber = \"\";\r\n\t\tthis.byId(\"leadType\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\tif (this.byId(\"applicantType\").getVisible()) {\r\n\t\t\tthis.byId(\"applicantType\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t}\r\n\t\tif (this.byId(\"customer\").getVisible()) {\r\n\t\t\tthis.byId(\"customer\").setValue(\"\");\r\n\t\t\tthis.byId(\"customer\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t}\r\n\t\tif (this.byId(\"FirstName\").getVisible()) {\r\n\t\t\tthis.byId(\"FirstName\").setValue(\"\");\r\n\t\t\tthis.byId(\"LastName\").setValue(\"\");\r\n\t\t\tthis.byId(\"FirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"LastName\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t}\r\n\t\tif (this.byId(\"cusFirstName\").getVisible()) {\r\n\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMiddleName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusMiddleName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusLastName\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t}\r\n\r\n\t\t//\tthis.byId(\"statusdropdown\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd1\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd2\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusAdd3\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusPinCode\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusCity\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusDealerSelect\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusPhone\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusStd\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"tmlCustomer\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusFleetSize\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusFleetApp\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusSeg\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusDealerLocation\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t//\tthis.byId(\"statusdropdown\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusRemark\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusDatePickerNextFollowup\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.byId(\"cusDatePickerTentative\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t//this.byId(\"cusRemark\").setValueState(sap.ui.core.ValueState.None);\r\n\t\treturn true;\r\n\t},\r\n\tvalidateCustomSavePage: function() {\r\n\t\tvar c = false;\r\n\t\tif (this.byId(\"cusFirstName\").getValue() === \"\" && this.byId(\"cusFirstName\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusFirstName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\t//if (this.BPTYPECheck === \"1\") {\r\n\t\tif (this.byId(\"cusLastName\").getValue() === \"\" && this.byId(\"cusLastName\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusLastName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\t//\t}\r\n\r\n\t\tif (this.byId(\"customer\").getValue() === \"\" && this.byId(\"customer\").getVisible() === true) {\r\n\t\t\tthis.byId(\"customer\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"BusAggr\").getValue() === \"\" && this.byId(\"BusAggr\").getVisible() === true) {\r\n\t\t\tthis.byId(\"BusAggr\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"FirstName\").getValue() === \"\" && this.byId(\"FirstName\").getVisible() === true) {\r\n\t\t\tthis.byId(\"FirstName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\t/*if (this.byId(\"LastName\").getValue() === \"\" && this.byId(\"LastName\").getVisible() === true) {\r\n\t\t\tthis.byId(\"LastName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}*/\r\n\t\tif (this.byId(\"cusAdd1\").getValue() === \"\" && this.byId(\"cusAdd1\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusAdd1\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusAdd2\").getValue() === \"\" && this.byId(\"cusAdd2\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusAdd2\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusAdd3\").getValue() === \"\" && this.byId(\"cusAdd3\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusAdd3\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusPinCode\").getValue() === \"\" && this.byId(\"cusPinCode\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusPinCode\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusCity\").getSelectedKey() === \"\" && this.byId(\"cusCity\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusCity\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusMobile\").getValue() === \"\" && this.byId(\"cusMobile\").getVisible() === true) {\r\n\t\t\tc = true;\r\n\t\t\tthis.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.Error);\r\n\r\n\t\t}\r\n\t\t/*\tif (this.byId(\"cusStd\").getValue() === \"\" && this.byId(\"cusStd\").getVisible() === true) {\r\n\t\t\t\tc = true;\r\n\t\t\t\tthis.byId(\"cusStd\").setValueState(sap.ui.core.ValueState.Error);\r\n\r\n\t\t\t}\r\n\t\t\tif (this.byId(\"cusPhone\").getValue() === \"\" && this.byId(\"cusPhone\").getVisible() === true) {\r\n\t\t\t\tc = true;\r\n\t\t\t\tthis.byId(\"cusPhone\").setValueState(sap.ui.core.ValueState.Error);\r\n\r\n\t\t\t}*/\r\n\t\tif (this.byId(\"applicantType\").getVisible()) {\r\n\t\t\tif (this.byId(\"applicantType\").getSelectedKey() === \"\") {\r\n\t\t\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tc = true;\r\n\t\t\t}\r\n\t\t\t/*if (this.byId(\"applicantType\").getValue() !== \"Individual\") {\r\n\t\t\t\tif (this.byId(\"LastName\").getValue() === \"\" && this.byId(\"LastName\").getVisible() === true) {\r\n\t\t\t\t\tthis.byId(\"LastName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\t\tc = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"LastName\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t\t}*/\r\n\r\n\t\t}\r\n\t\tif (this.byId(\"tmlCustomer\").getVisible() === true) {\r\n\t\t\tif (this.byId(\"tmlCustomer\").getValue() === \"\") {\r\n\t\t\t\tthis.byId(\"tmlCustomer\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tc = true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tif (this.byId(\"cusFleetSize\").getSelectedKey() === \"\") {\r\n\t\t\tthis.byId(\"cusFleetSize\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusFleetApp\").getSelectedKey() === \"\") {\r\n\t\t\tthis.byId(\"cusFleetApp\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusSeg\").getSelectedKey() === \"\") {\r\n\t\t\tthis.byId(\"cusSeg\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDealerCVPV\").getSelectedKey() === \"\") {\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDealerLocation\").getValue() === \"\") {\r\n\t\t\tthis.byId(\"cusDealerLocation\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"leadType\").getSelectedKey() === \"\") {\r\n\t\t\tthis.byId(\"leadType\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDistchan\").getSelectedKey() === \"\") {\r\n\r\n\t\t\tthis.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDealerSelect\").getSelectedKey() === \"\") {\r\n\r\n\t\t\tthis.byId(\"cusDealerSelect\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\t/*\tif (this.byId(\"statusdropdown\").getSelectedKey() === \"\") {\r\n\r\n\t\t\tthis.byId(\"statusdropdown\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}*/\r\n\t\t/*if (this.byId(\"cusRemark\").getValue() === \"\") {\r\n\t\t\tthis.byId(\"cusRemark\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}*/\r\n\t\tif (this.byId(\"cusDatePickerNextFollowup\").getValue() === \"\" && this.byId(\"cusDatePickerNextFollowup\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusDatePickerNextFollowup\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDatePickerTentative\").getValue() === \"\" && this.byId(\"cusDatePickerTentative\").getVisible() === true) {\r\n\t\t\tthis.byId(\"cusDatePickerTentative\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDatePickerVisit\").getValue() === \"\" && this.byId(\"cusDatePickerVisit\").getVisible() === true && this.byId(\r\n\t\t\t\t\"cusDatePickerVisit\").getEditable() === true) {\r\n\t\t\tthis.byId(\"cusDatePickerVisit\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\r\n\t\tif (this.accountName !== this.byId(\"customer\").getValue()) {\r\n\t\t\tthis.accountName = this.accountId;\r\n\t\t}\r\n\r\n\t\tif (this.validateProductRow() === true) {\r\n\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (c === true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\tonMandatoryFieldChanged: function(e) {\r\n\t\tif (e.mParameters.id.indexOf(\"cusFirstName\") > -1 || e.mParameters.id.indexOf(\"cusLastName\") > -1 || e.mParameters.id.indexOf(\r\n\t\t\t\t\"cusMiddleName\") > -1 || e.mParameters.id.indexOf(\"FirstName\") > -1 || e.mParameters.id.indexOf(\"LastName\") > -1) {\r\n\t\t\tvar val = e.mParameters.value;\r\n\r\n\t\t\tvar val1 = val.replace(/\\b[a-z]|\\B[A-Z]/g, function(x) {\r\n\t\t\t\treturn String.fromCharCode(x.charCodeAt(0) ^ 32);\r\n\t\t\t});\r\n\t\t\tif (this.byId(\"applicantType\").getSelectedKey() !== \"1\") {\r\n\t\t\t\tval1 = val1.replace(/[^a-zA-Z0-9 ]/g, '');\r\n\t\t\t} else {\r\n\t\t\t\tval1 = val1.replace(/[^a-zA-Z ]/g, '');\r\n\t\t\t}\r\n\r\n\t\t\te.getSource().setValue(val1);\r\n\r\n\t\t}\r\n\t\tif (e.mParameters.id.indexOf(\"cusAdd1\") > -1 || e.mParameters.id.indexOf(\"cusAdd2\") > -1 || e.mParameters.id.indexOf(\"cusAdd3\") > -1) {\r\n\t\t\tvar val = e.mParameters.value;\r\n\t\t\tvar regexp = /^[a-zA-Z0-9-:/,() ]{1,40}$/;\r\n\t\t\tvar res = regexp.test(val);\r\n\t\t\tif (res) {\r\n\t\t\t\te.getSource().setValue(val);\r\n\t\t\t} else {\r\n\t\t\t\tval = val.slice(0, val.length - 1);\r\n\t\t\t\t//val = e.getSource()._lastValue;\r\n\t\t\t\te.getSource().setValue(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (e.mParameters.id.indexOf(\"cusMobile\") > -1) {\r\n\t\t\tvar val = e.mParameters.value;\r\n\t\t\t//\tvar regexp = /^[789]\\d{9}$/;\r\n\t\t\t//\tvar res = regexp.test(val);\r\n\t\t\tif (val.length === 1) {\r\n\t\t\t\tif (val === \"7\" || val === \"8\" || val === \"9\") {\r\n\t\t\t\t\te.getSource().setValue(val);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tval = val.slice(0, val.length - 1);\r\n\t\t\t\t\t//val = e.getSource()._lastValue;\r\n\t\t\t\t\te.getSource().setValue(val);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\te.getSource().setValue(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (e.mParameters.id.indexOf(\"cusPinCode\") > -1) {\r\n\t\t\tvar val = e.mParameters.value;\r\n\t\t\tif (val.length === 6) {\r\n\t\t\t\tthis.onPostalChange();\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"cusDistrict\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusCity\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusCity\").setEnabled(false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (e.mParameters.id.indexOf(\"cusStd\") > -1) {\r\n\t\t\tvar val = e.mParameters.value;\r\n\t\t\tval = val.replace(/[^0-9 ]/g, '');\r\n\t\t\tvar phoneMaxLen = 11 - val.length;\r\n\t\t\tthis.byId(\"cusPhone\").setMaxLength(phoneMaxLen);\r\n\t\t\te.getSource().setValue(val);\r\n\r\n\t\t}\r\n\t\te.getSource().setValueState(sap.ui.core.ValueState.None);\r\n\t},\r\n\tnamechnge: function(evt) {\r\n\t\tif (evt.mParameters.id.indexOf(\"firstName\") > -1 || evt.mParameters.id.indexOf(\"lastName\") > -1) {\r\n\t\t\tvar val = evt.mParameters.value;\r\n\t\t\tvar val1 = val.replace(/\\b[a-z]|\\B[A-Z]/g, function(x) {\r\n\t\t\t\treturn String.fromCharCode(x.charCodeAt(0) ^ 32);\r\n\t\t\t});\r\n\t\t\tval1.replace(/[^a-zA-Z ]/g, '');\r\n\t\t\tevt.getSource().setValue(val1);\r\n\r\n\t\t}\r\n\t\tevt.getSource().setValueState(sap.ui.core.ValueState.None);\r\n\t},\r\n\t_setAccountDetailsbyBug: function(BugNum) {\r\n\t\tthis.oModel.read(\"/ZAccountCollection(accountID='',Buag='\" + BugNum + \"')\", null, null, true, jQuery.proxy(function(d, r) {\r\n\t\t\tif (d) {\r\n\t\t\t\tthis.byId(\"cusFirstName\").setValue(d.NameFirst);\r\n\t\t\t\tthis.byId(\"cusLastName\").setValue(d.NameLast);\r\n\t\t\t\tthis.byId(\"cusMiddleName\").setValue(d.NameMiddle);\r\n\t\t\t\tthis.byId(\"cusAdd1\").setValue(d.Address1);\r\n\t\t\t\tthis.byId(\"cusAdd2\").setValue(d.Address2);\r\n\t\t\t\tthis.byId(\"cusAdd3\").setValue(d.Address3);\r\n\t\t\t\tthis.byId(\"cusMobile\").setValue(d.Mobile);\r\n\t\t\t\tthis.byId(\"cusPhone\").setValue(d.Phone);\r\n\t\t\t\tthis.byId(\"cusStd\").setValue(d.TelExtens);\r\n\t\t\t\tthis.byId(\"cusCity\").setValue(d.City1);\r\n\t\t\t\tthis.byId(\"cusDistrict\").setValue(d.District);\r\n\t\t\t\tthis.byId(\"cusState\").setValue(d.Region);\r\n\t\t\t\tthis.byId(\"cusPinCode\").setValue(d.PostCode1);\r\n\t\t\t\tthis.byId(\"customer\").setValue(d.accountID);\r\n\t\t\t\tthis.onPostalChange();\r\n\t\t\t\tthis.BPTYPECheck = d.BpType;\r\n\t\t\t\tif (d.BpType == \"3\") {\r\n\t\t\t\t\tthis.byId(\"cusPhone\").setVisible(false);\r\n\t\t\t\t\tthis.byId(\"cusStd\").setVisible(false);\r\n\t\t\t\t\tthis.byId(\"cusMobile\").setVisible(false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.accountId = \"\";\r\n\t\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusCity\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusDistrict\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t\t}\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tjQuery.sap.log.error(\"Read failed in S4->_setAccountDetails:\" + e.response.body);\r\n\t\t}, this));\r\n\r\n\t},\r\n\tNumchnge: function(evt) {\r\n\t\tvar val = evt.mParameters.value;\r\n\t\tval = val.replace(/[^0-9a-zA-Z ]/g, '');\r\n\r\n\t\tif (evt.mParameters.id.indexOf(\"BusAggr\") > -1) {\r\n\t\t\tvar BugNum = val.replace(/[^0-9 ]/g, '');\r\n\t\t\tevt.getSource().setValue(BugNum);\r\n\t\t\tif (BugNum.length > 9) {\r\n\t\t\t\tthis._setAccountDetailsbyBug(BugNum);\r\n\t\t\t}\r\n\t\t}\r\n\t\tevt.getSource().setValue(val);\r\n\t\tevt.getSource().setValueState(\"None\");\r\n\t},\r\n\tMoNumchnge: function(evt) {\r\n\t\tvar val = evt.mParameters.value;\r\n\t\tif (val.length <= 10) {\r\n\t\t\tevt.getSource().setValue(val);\r\n\t\t} else {\r\n\t\t\t//\tval = evt.getSource()._lastValue;\r\n\t\t\tval = val.slice(0, val.length - 1);\r\n\t\t\tevt.getSource().setValue(val);\r\n\t\t}\r\n\t},\r\n\tsetEnabledUserField: function(d) {\r\n\t\tthis.byId(\"customer\").setEnabled(d);\r\n\t\tthis.byId(\"cusFirstName\").setEnabled(d);\r\n\t\tthis.byId(\"cusLastName\").setEnabled(d);\r\n\t\tthis.byId(\"FirstName\").setEnabled(d);\r\n\t\tthis.byId(\"LastName\").setEnabled(d);\r\n\t\tthis.byId(\"cusMiddleName\").setEnabled(d);\r\n\t\tthis.byId(\"cusAdd1\").setEnabled(d);\r\n\t\tthis.byId(\"cusAdd2\").setEnabled(d);\r\n\t\tthis.byId(\"cusAdd3\").setEnabled(d);\r\n\t\tthis.byId(\"cusMobile\").setEnabled(d);\r\n\t\tthis.byId(\"cusPhone\").setEnabled(d);\r\n\t\tthis.byId(\"cusStd\").setEnabled(d);\r\n\t\t//this.byId(\"cusCity\").setEnabled(d);\r\n\t\t//this.byId(\"cusDistrict\").setEnabled(d);\r\n\t\t//this.byId(\"cusState\").setEnabled(d);\r\n\t\tthis.byId(\"cusPinCode\").setEnabled(d);\r\n\t},\r\n\t\r\n\tonComboChanged: function(e) {\r\n\t\tif (e.mParameters.id.indexOf(\"Qty_Id\") > -1) {\r\n\t\t\tvar val = e.mParameters.value;\r\n\t\t\te.getSource().setMaxLength(3);\r\n\t\t\tval = val.replace(/[^0-9 ]/g, '');\r\n\t\t\te.getSource().setValue(val);\r\n\t\t}\r\n\t\tif (e.mParameters.id.indexOf(\"leadType\") > -1) {\r\n\t\t\tvar key = e.getSource().getSelectedKey();\r\n\t\t\tif (key === \"T\") {\r\n\t\t\t\tthis.byId(\"BusAggr\").setVisible(true);\r\n\t\t\t\tthis.byId(\"BusAggr\").setValue();\r\n\t\t\t\tthis.byId(\"applicantType\").setVisible(false);\r\n\r\n\t\t\t\t//this.byId(\"customer\").setVisible(false);\r\n\t\t\t\tthis.setEnabledUserField(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"BusAggr\").setVisible(false);\r\n\t\t\t\tthis.byId(\"BusAggr\").setValue();\r\n\t\t\t\t//this.byId(\"customer\").setVisible(true);\r\n\t\t\t\tif (this.byId(\"CustSw_id\").getState() === false) {\r\n\t\t\t\t\tthis.byId(\"applicantType\").setVisible(true);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setEnabledUserField(true);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\te.getSource().setValueState(sap.ui.core.ValueState.None);\r\n\t},\r\n\tonBranchChanged: function(e) {\r\n\t\tthis.byId(\"cusDealerSelect\").setSelectedItem(null);\r\n\r\n\t\tthis.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.branch = this.byId(\"cusDealerCVPV\").getSelectedKey();\r\n\t\tthis.distchannel = this.byId(\"cusDistchan\").getSelectedKey();\r\n\t\tif (this.branch !== \"\" && this.distchannel !== \"\" && this.byId(\"BusAggr\").getVisible() === false) {\r\n\t\t\tthis.byId(\"ProductButton11\").setEnabled(true);\r\n\t\t} else {\r\n\t\t\tthis.byId(\"ProductButton11\").setEnabled(false);\r\n\t\t}\r\n\t\tif (this.distchannel !== \"\") {\r\n\t\t\tthis.onSourcingChanged(this.branch, this.distchannel);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonDistchnChanged: function(e) {\r\n\t\tthis.byId(\"cusDealerSelect\").setSelectedItem(null);\r\n\r\n\t\tthis.branch = this.byId(\"cusDealerCVPV\").getSelectedKey();\r\n\t\tthis.distchannel = this.byId(\"cusDistchan\").getSelectedKey();\r\n\t\tthis.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tif (this.branch !== \"\" && this.distchannel !== \"\" && this.byId(\"BusAggr\").getVisible() === false) {\r\n\t\t\tthis.byId(\"ProductButton11\").setEnabled(true);\r\n\t\t} else {\r\n\t\t\tthis.byId(\"ProductButton11\").setEnabled(false);\r\n\t\t}\r\n\t\tif (this.branch !== \"\") {\r\n\t\t\tthis.onSourcingChanged(this.branch, this.distchannel);\r\n\t\t\tvar combo = this.getView().byId(\"cusDealerCVPV\");\r\n\t\t\t$(\"#\" + combo.sId + \"> Input\").attr(\"disabled\", \"disabled\");\r\n\t\t}\r\n\r\n\t},\r\n\tonSourcingChanged: function(b, d) {\r\n\t\tvar that = this;\r\n\r\n\t\tthis._custJsonModel = this.getView().getModel(\"custJson\");\r\n\t\tvar _oFilter = new sap.ui.model.Filter(\"Branch\", \"EQ\", b);\r\n\t\tvar _oFilter1 = new sap.ui.model.Filter(\"Zchannel\", \"EQ\", d);\r\n\r\n\t\tthis.oModel.read(\"/ZBU_DESCRIPSet\", null, [\"$filter=Branch eq '\" + b + \"' and Zchannel eq '\" + d + \"'\"], true,\r\n\t\t\tjQuery.proxy(function(\r\n\t\t\t\taData, b) {\r\n\t\t\t\tthat._custData.ZBU_DESCRIPSet = aData;\r\n\t\t\t\tthat._custJsonModel.setData(that._custData);\r\n\r\n\t\t\t\tthat._custJsonModel.updateBindings();\r\n\r\n\t\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\t\tthat.handleErrors(e);\r\n\r\n\t\t\t}, this));\r\n\r\n\t},\r\n\r\n\tonApplicantChanged: function() {\r\n\r\n\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\tif (this.byId(\"applicantType\").getSelectedKey() === \"2\" || this.byId(\"applicantType\").getSelectedKey() === \"3\") {\r\n\t\t\tthis.byId(\"customerName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusMiddleName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(false);\r\n\t\t\tthis.byId(\"Name1\").setVisible(true);\r\n\t\t\tthis.byId(\"Name2\").setVisible(true);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"LastName\").setVisible(true);\r\n\t\t\t//\tthis.getView().byId(\"Name2\").setRequired(true);\r\n\t\t\tif (this.byId(\"applicantType\").getSelectedKey() === \"3\") {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(false);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(false);\r\n\t\t\t\t//\tthis.getView().byId(\"Name2\").setRequired(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if (this.byId(\"applicantType\").getSelectedKey() === \"\" || this.byId(\"applicantType\").getSelectedKey() === \"1\") {\r\n\t\t\tthis.byId(\"Name1\").setVisible(false);\r\n\t\t\tthis.byId(\"Name2\").setVisible(false);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"LastName\").setVisible(false);\r\n\t\t\tthis.byId(\"customerName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMiddleName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\tthis.byId(\"mob\").setVisible(true);\r\n\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t}\r\n\t},\r\n\textHookGetHeaderFooterOptions: function(evt) {\r\n\t\tthis.byId(\"Switch\").setState(true);\r\n\t}\r\n});",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/Component.js": "jQuery.sap.declare(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.Component\");\r\n\r\n// use the load function for getting the optimized preload file if present\r\n\r\n\t\r\n\t\r\n\t\r\n\r\nsap.ui.component.load({\r\n\tname: \"cus.crm.opportunity\",\r\n\t// Use the below URL to run the extended application when SAP-delivered application is deployed on SAPUI5 ABAP Repository\r\n\turl: \"/sap/bc/ui5_ui5/sap/CRM_OPPRTNTY\"\r\n\t//new sap.ui.core.routing.HashChanger().replaceHash(\"\");\r\n\t\t// we use a URL relative to our own component\r\n\t\t// extension application is deployed with customer namespace\r\n\t\t\t\r\n});\r\n\r\nthis.cus.crm.opportunity.Component.extend(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.Component\", {\r\n\tmetadata: {\r\n\t\tmanifest: \"json\",\r\n\t\t\"includes\":[\"css/customStyle.css\"]\r\n\t\r\n\t}\r\n\t\t/*init : function() {\r\n\t\t\tnew sap.ui.core.routing.HashChanger().replaceHash(\"Opportunity-display\");\r\n\t\t}*/\r\n});",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/S4Custom.view.xml": "<!--Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.-->\r\n<core:View xmlns:core=\"sap.ui.core\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\" xmlns:ui=\"sap.ui.layout\"\r\n\tcontrollerName=\"cus.crm.opportunity.view.S4\" xmlns:form=\"sap.ui.layout.form\" xmlns:layout=\"sap.ui.layout\" xmlns:ca=\"sap.ca.ui\"\r\n\txmlns:html=\"http://www.w3.org/1999/xhtml\" xmlns:custom=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\">\r\n\t<Page id=\"editPage\" title=\"{i18n>EDIT_TITLE}\" class=\"sapUiFioriObjectPage\" enableScrolling=\"true\">\r\n\t\t<content>\r\n\t\t\t<!-- Extension point to add additional opportunity edit Content at the top-->\r\n\t\t\t<core:ExtensionPoint name=\"opportunityEditContentTopExtension\"></core:ExtensionPoint>\r\n\t\t\t<ui:form.SimpleForm id=\"custForm1\" minWidth=\"1024\" maxContainerCols=\"2\" editable=\"true\" layout=\"ResponsiveGridLayout\"\r\n\t\t\t\ttitle=\"{i18n>CUSTOMER_DATA}\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"3\" emptySpanM=\"3\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<ui:content>\r\n\t\t\t\t\t<Label visible=\"false\" text=\"Loan Type\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"loanType\" visible=\"false\" items=\"{/ZsorgF4Set}\" selectedKey=\"{custJson>/Sorg}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{Short}\" text=\"{Stext}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Existing Customer(y/n)\"></Label>\r\n\t\t\t\t\t<Switch state=\"{= ${custJson>/Zzecus} === 'X' ? true : false}\" customTextOff=\"No\" id=\"swtch\" customTextOn=\"Yes\" type=\"Default\"\r\n\t\t\t\t\t\tchange=\"_onExistingCustSwich\" enabled=\"false\"/>\r\n\t\t\t\t\t<Label text=\"Lead Type\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"leadType\" selectionChange=\"onComboChanged\" items=\"{/ZloanTypeF4Set}\" selectedKey=\"{custJson>/Zleadtype}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{Attribute}\" text=\"{Attributetxt}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label id=\"cusLblCustomer\" text=\"Customer\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusExistingCustomer\" editable=\"false\" liveChange=\"onAccountInputFieldChanged\" value=\"{custJson>/CUSTOMERID}\"\r\n\t\t\t\t\t\tsuggestionItemSelected=\"onAccountSuggestItemSelected\" valueHelpRequest=\"showAccountF4\" valueHelpOnly=\"false\" showValueHelp=\"true\"></Input>\r\n\t\t\t\t\t<Label text=\"Applicant Type\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"applicantType\" editable=\"false\" selectedKey=\"{custJson>/BPTYPE}\" visible=\"{=${BPTYPE} === '3' ? false : true}\"\r\n\t\t\t\t\t\tselectionChange=\"onApplicantChanged\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"1\" text=\"Individual\"></core:Item>\r\n\t\t\t\t\t\t\t<core:Item key=\"3\" text=\"Group\"></core:Item>\r\n\t\t\t\t\t\t\t<core:Item key=\"2\" text=\"Corporate\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Customer Name\" id=\"customerName\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusFirstName\" editable=\"false\" value=\"{custJson>/NAMEFIRST}\" liveChange=\"onMandatoryFieldChanged\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"XL1 L2 M2 S12\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Input id=\"cusMiddleName\" editable=\"false\" value=\"{custJson>/NAMEMIDDLE}\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Input id=\"cusLastName\" editable=\"false\" value=\"{custJson>/NAMELAST}\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Name 1\" id=\"Name1\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"FirstName\" visible=\"false\" value=\"{custJson>/NAMEFIRST}\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Name 2\" id=\"Name2\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"LastName\" visible=\"false\" value=\"{custJson>/NAMELAST}\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Address Line1\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusAdd1\" editable=\"false\" value=\"{custJson>/ADDRESS1}\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Address Line2\" required=\"true\" editable=\"false\"></Label>\r\n\t\t\t\t\t<Input id=\"cusAdd2\" editable=\"false\" value=\"{custJson>/ADDRESS2}\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Landmark\" required=\"true\" editable=\"false\"></Label>\r\n\t\t\t\t\t<Input id=\"cusAdd3\" editable=\"false\" value=\"{custJson>/ADDRESS3}\" liveChange=\"onMandatoryFieldChanged\"></Input>\r\n\t\t\t\t\t<Label text=\"Pin code\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"cusPinCode\" editable=\"false\" maxLength=\"6\" value=\"{custJson>/POST_CODE1}\" change=\"onPostalChange\"\r\n\t\t\t\t\t\tliveChange=\"onMandatoryFieldChanged\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L2 M2 S12\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Input editable=\"false\" id=\"cusDistrict\" placeholder=\"District\" value=\"{custJson>/DISTRICT}\" enabled=\"false\"></Input>\r\n\t\t\t\t\t<Label text=\"City/State\"></Label>\r\n\t\t\t\t\t<Input editable=\"false\" id=\"cusCity\" value=\"{custJson>/CITY1}\" enabled=\"false\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L2 M2 S12\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Input editable=\"false\" id=\"cusState\" value=\"{custJson>/REGION}\" enabled=\"false\"></Input>\r\n\t\t\t\t\t<Label text=\"Cell No\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input value=\"+91 \" id=\"mob\" enabled=\"false\"></Input>\r\n\t\t\t\t\t<Input id=\"cusMobile\" editable=\"false\" maxLength=\"10\" value=\"{custJson>/MOBILE}\" liveChange=\"onMandatoryFieldChanged\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L4 M4 S6\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Label text=\"Landline No\"></Label>\r\n\t\t\t\t\t<Input id=\"cusStd\" editable=\"false\" placeholder=\"STD Code\" value=\"{custJson>/TelExtens}\" visible=\"true\" maxLength=\"5\"></Input>\r\n\t\t\t\t\t<Input id=\"cusPhone\" editable=\"false\" value=\"{custJson>/PHONE}\" visible=\"true\" maxLength=\"10\">\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L3 M3 S6\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Label text=\"TML Customer (Y/N)\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"tmlCustomer\" visible=\"false\" selectedKey=\"{custJson>/Ztml}\" selectionChange=\"onComboChanged\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"Y\" text=\"Yes\"></core:Item>\r\n\t\t\t\t\t\t\t<core:Item key=\"N\" text=\"No\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Fleet Size\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusFleetSize\" items=\"{custJson>/fleetSize/results}\" selectedKey=\"{custJson>/FLEETSIZE}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>fSize}\" text=\"{custJson>fSize}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"XL1 L2 M2 S4\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Cust. Segment\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusSeg\" items=\"{custJson>/Zcustseg/results}\" selectedKey=\"{custJson>/CUSTSEGMENT}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Zzcustseg}\" text=\"{custJson>DESC}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Fleet Application\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusFleetApp\" items=\"{custJson>/ZFLEET_APP_MASTS/results}\" selectedKey=\"{custJson>/FLEETAPPL}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>FNO}\" text=\"{custJson>Fleetapp}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Branch\" required=\"true\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusDealerCVPV\" items=\"{/ZsalesofficeF4Set}\" selectionChange=\"onBranchChanged\" selectedKey=\"{custJson>/Branch}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{Short}\" text=\"{Stext}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t<layoutData>\r\n\t\t\t\t\t\t\t<layout:GridData span=\"L2 M2 S12\"/>\r\n\t\t\t\t\t\t</layoutData>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<ComboBox id=\"cusDistchan\" items=\"{/Zcrmc_distchanF4Set}\" placeholder=\"Distribution Channel\" selectionChange=\"onDistchnChanged\"\r\n\t\t\t\t\t\tselectedKey=\"{custJson>/DistributionChannel}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{Distchan}\" text=\"{Description}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Sourcing Channel\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"cusDealerSelect\" items=\"{custJson>/ZBU_DESCRIPSet/results}\" selectedKey=\"{custJson>/DEALERNAME}\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{custJson>Partner}\" text=\"{custJson>BuDescrip}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Location\"></Label>\r\n\t\t\t\t\t<Input id=\"cusDealerLocation\" value=\"{custJson>/DEALERLOC}\"></Input>\r\n\t\t\t\t</ui:content>\r\n\t\t\t</ui:form.SimpleForm>\r\n\t\t\t<Table id=\"idProdTable\" headerText=\"{i18n>CURR_REQ_DATA}\" noDataText=\"Please select the Vehicle\" inset=\"false\" growing=\"true\"\r\n\t\t\t\tgrowingScrollToLoad=\"true\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<Toolbar id=\"productBasketToolbar_S411\">\r\n\t\t\t\t\t\t<Title id=\"productLabel_S411\" text=\"{i18n>PRODUCT_BASKET}\"/>\r\n\t\t\t\t\t\t<ToolbarSpacer id=\"productSpacer_S411\"></ToolbarSpacer>\r\n\t\t\t\t\t\t<Button id=\"ProductButton11\" icon=\"sap-icon://add\" press=\"addProductTableRow\" tooltip=\"{i18n>ADD}\"></Button>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Product\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Variant\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Quantity\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column width=\"2em\"></Column>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ColumnListItem id=\"idProdTableColumnListItem\">\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<ComboBox selectionChange=\"onProductChange\"/>\r\n\t\t\t\t\t\t\t<ComboBox/>\r\n\t\t\t\t\t\t\t<Input maxLength=\"3\" liveChange=\"QtyChange\"/>\r\n\t\t\t\t\t\t\t<Button icon=\"sap-icon://sys-cancel-2\" tooltip=\"{i18n>CANCEL}\" type=\"Transparent\" press=\"deleteProductTableRow\"></Button>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</Table>\r\n\t\t\t<ui:form.SimpleForm id=\"custForm2\" minWidth=\"1024\" maxContainerCols=\"2\" editable=\"true\" layout=\"ResponsiveGridLayout\" labelSpanL=\"3\"\r\n\t\t\t\tlabelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<ui:content>\r\n\t\t\t\t\t<Label text=\"Lead Status\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"userStatus\" items=\"{json>/UserStatuses}\" class=\"pos_input\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{json>UserStatusCode}\" text=\"{json>UserStatusText}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label text=\"Next Followup\" required=\"true\"/>\r\n\t\t\t\t\t<DatePicker id=\"cusDatePickerNextFollowup\" change=\"onMandatoryFieldChanged\"\r\n\t\t\t\t\t\tvalue=\"{path: 'custJson>/NEXTFOLLOWUP', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"></DatePicker>\r\n\t\t\t\t\t<Label text=\"Tentative Purchase Date\" required=\"true\"/>\r\n\t\t\t\t\t<DatePicker id=\"cusDatePickerTentative\" change=\"onMandatoryFieldChanged\"\r\n\t\t\t\t\t\tvalue=\"{path: 'custJson>/TENTIVEDATE', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"></DatePicker>\r\n\t\t\t\t\t<Label text=\"Visit Date\" required=\"true\"/>\r\n\t\t\t\t\t<DatePicker id=\"cusDatePickerVisit\" change=\"onMandatoryFieldChanged\"\r\n\t\t\t\t\t\tvalue=\"{path: 'custJson>/VISITDATE', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"></DatePicker>\r\n\t\t\t\t\t<Label text=\"Remark\"/>\r\n\t\t\t\t\t<TextArea id=\"cusRemark\" rows=\"5\" value=\"{custJson>/LeadComment}\"></TextArea>\r\n\t\t\t\t</ui:content>\r\n\t\t\t</ui:form.SimpleForm>\r\n\t\t\t<ui:form.SimpleForm id=\"form1\" minWidth=\"1024\" maxContainerCols=\"2\" editable=\"true\" layout=\"ResponsiveGridLayout\"\r\n\t\t\t\ttitle=\"{i18n>GENERAL_DATA}\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\"\r\n\t\t\t\tvisible=\"false\">\r\n\t\t\t\t<ui:content>\r\n\t\t\t\t\t<Label id=\"descriptionLabel_S4\" text=\"{i18n>NAME}\" required=\"true\"></Label>\r\n\t\t\t\t\t<Input id=\"description\" maxLength=\"40\" placeholder=\"{i18n>MAX_CHARS}\" liveChange=\"descriptionChanged\"></Input>\r\n\t\t\t\t\t<!-- TYPE and OPPORTUNITY ID Fields reordered -->\r\n\t\t\t\t\t<Label id=\"opportunityType_labelS4\" text=\"{i18n>TYPE}\"/>\r\n\t\t\t\t\t<Text id=\"opportunityType\"/>\r\n\t\t\t\t\t<Label id=\"oppIdLabel_S4\" text=\"{i18n>OPPOR_ID} \"></Label>\r\n\t\t\t\t\t<Text id=\"id\"></Text>\r\n\t\t\t\t\t<Label id=\"accountLabel_S4\" text=\"{i18n>ACCOUNT}\"></Label>\r\n\t\t\t\t\t<Text id=\"account\"></Text>\r\n\t\t\t\t\t<Label id=\"mainContactLabel_S4\" text=\"{i18n>MAIN_CONTACT}\"></Label>\r\n\t\t\t\t\t<Input id=\"inputMainContact\" value=\"{contact}\" liveChange=\"onContactInputFieldChanged\" suggestionItemSelected=\"onContactSuggestItemSelected\"\r\n\t\t\t\t\t\tvalueHelpRequest=\"showContactF4\" valueHelpOnly=\"false\" showValueHelp=\"true\"></Input>\r\n\t\t\t\t\t<Label id=\"empResponsibleLabel_S4\" text=\"{i18n>S4.FORM.EMPLOYEE_RESPONSIBLE}\"\r\n\t\t\t\t\t\tvisible=\"{path : 'versioning>/BackendSchemaVersion', formatter : 'cus.crm.opportunity.util.Formatter.formatEmployeeRespField'}\"></Label>\r\n\t\t\t\t\t<Input id=\"inputEmpResponsible\" value=\"{employee}\"\r\n\t\t\t\t\t\tvisible=\"{path : 'versioning>/BackendSchemaVersion',formatter : 'cus.crm.opportunity.util.Formatter.formatEmployeeRespField'}\"\r\n\t\t\t\t\t\tliveChange=\"onEmployeeInputFieldChanged\" suggestionItemSelected=\"onEmployeeSuggestItemSelected\" valueHelpRequest=\"showEmployeeF4\"\r\n\t\t\t\t\t\tvalueHelpOnly=\"false\" showValueHelp=\"true\"></Input>\r\n\t\t\t\t\t<Label id=\"priorityLabel_S4\" text=\"{i18n>PRIORITY}\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"priority\" items=\"{json>/Priorities}\" class=\"pos_input\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{json>PriorityCode}\" text=\"{json>PriorityText}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t</ui:content>\r\n\t\t\t</ui:form.SimpleForm>\r\n\t\t\t<ui:form.SimpleForm visible=\"false\" id=\"form99\" minWidth=\"1024\" title=\"{i18n>DATES}\" maxContainerCols=\"2\" editable=\"true\"\r\n\t\t\t\tlayout=\"ResponsiveGridLayout\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<ui:content>\r\n\t\t\t\t\t<Label id=\"startDateLabel_S4\" text=\"{i18n>START_DATE}\"></Label>\r\n\t\t\t\t\t<DatePicker id=\"datePickerStartDate\"></DatePicker>\r\n\t\t\t\t\t<Label id=\"endDateLabel_S4\" text=\"{i18n>CLOSE_DATE}\" required=\"true\"></Label>\r\n\t\t\t\t\t<DatePicker id=\"datePickerEndDate\"></DatePicker>\r\n\t\t\t\t</ui:content>\r\n\t\t\t</ui:form.SimpleForm>\r\n\t\t\t<ui:form.SimpleForm id=\"form7\" visible=\"false\" minWidth=\"1024\" title=\"{i18n>SALES_CYCLE}\" maxContainerCols=\"2\" editable=\"true\"\r\n\t\t\t\tlayout=\"ResponsiveGridLayout\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<ui:content>\r\n\t\t\t\t\t<Label id=\"statusLabel_S4\" text=\"{i18n>STATUS}\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"userStatus1\" items=\"{json>/UserStatuses}\" class=\"pos_input\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{json>UserStatusCode}\" text=\"{json>UserStatusText}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label id=\"stagesLabel_S4\" text=\"{i18n>STAGE}\"></Label>\r\n\t\t\t\t\t<ComboBox id=\"stages\" items=\"{json>/SalesStages}\" class=\"pos_input\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<core:Item key=\"{json>SalesStageCode}\" text=\"{json>SalesStageDescription}\"></core:Item>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t<Label id=\"chanceOfSuccessLabel_S4\" text=\"{i18n>CHANCE_OF_SUCCESS_%}\"></Label>\r\n\t\t\t\t\t<Input id=\"chanceOfSuccess\" liveChange=\"chanceOfSuccessChanged\"\r\n\t\t\t\t\t\tvalue=\"{path:'ChanceOfSuccess' , formatter: 'cus.crm.opportunity.util.Formatter.texttonumber'}\"></Input>\r\n\t\t\t\t</ui:content>\r\n\t\t\t</ui:form.SimpleForm>\r\n\t\t\t<ui:form.SimpleForm id=\"form11\" visible=\"false\" minWidth=\"1024\" title=\"{i18n>FORECAST_TITLE}\" maxContainerCols=\"2\" editable=\"true\"\r\n\t\t\t\tlayout=\"ResponsiveGridLayout\" labelSpanL=\"3\" labelSpanM=\"3\" emptySpanL=\"4\" emptySpanM=\"4\" columnsL=\"1\" columnsM=\"1\" class=\"editableForm\">\r\n\t\t\t\t<ui:content>\r\n\t\t\t\t\t<Label id=\"expSalesVolumeLabel_S4\" text=\"{i18n>UNWEIGHTED_VOLUME}\"></Label>\r\n\t\t\t\t\t<Input id=\"expectedSalesVolume\" maxLength=\"13\" liveChange=\"volumeChanged\"></Input>\r\n\t\t\t\t\t<Input id=\"currency\" value=\"curr\" placeholder=\"{i18n>CURRENCY}\" showValueHelp=\"true\" showSuggestion=\"true\" valueHelpRequest=\"showCurrencyF4\"\r\n\t\t\t\t\t\tliveChange=\"onCurrencyInputFieldChanged\" suggestionItemSelected=\"onCurrencySuggestItemSelected\" valueHelpOnly=\"false\"\r\n\t\t\t\t\t\tsuggestionItems=\"{json>/Currencies}\">\r\n\t\t\t\t\t\t<suggestionItems>\r\n\t\t\t\t\t\t\t<core:Item text=\"{json>CurrencyKey}\"></core:Item>\r\n\t\t\t\t\t\t</suggestionItems>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t\t<Label id=\"wtVolLabel_S4\" text=\"{i18n>WEIGHTED_VOLUME}\"></Label>\r\n\t\t\t\t\t<Text id=\"wtVol\" class=\"CosPadding\"></Text>\r\n\t\t\t\t\t<Label id=\"opportunityTotalNetValue_Label_S4\" text=\"{i18n>VOLUME}\"></Label>\r\n\t\t\t\t\t<Text id=\"opportunityTotalNetValue_Text_S4\"\r\n\t\t\t\t\t\ttext=\"{parts:[{path:'json>TotalExpectedNetValue'}, {path:'json>CurrencyCode'}], formatter:'cus.crm.opportunity.util.Formatter.totalexpectednetValue'}\"></Text>\r\n\t\t\t\t\t<Label id=\"forecastLabel_S4\" text=\"{i18n>FORECAST}\"></Label>\r\n\t\t\t\t\t<Switch id=\"switch\"></Switch>\r\n\t\t\t\t</ui:content>\r\n\t\t\t</ui:form.SimpleForm>\r\n\t\t\t<!-- Extension point to add additional opportunity edit Content at the top-->\r\n\t\t\t<core:ExtensionPoint name=\"opportunityEditContentBottomExtension\"></core:ExtensionPoint>\r\n\t\t\t<Table id=\"productBasketEdit\" visible=\"false\" headerText=\"{i18n>PRODUCT_BASKET}\" noDataText=\"{i18n>EMPTY_PROD}\" headerDesign=\"Standard\"\r\n\t\t\t\titems=\"{json>/Products}\" class=\"table_resize divisionPadding\">\r\n\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t<Toolbar id=\"productBasketToolbar_S4\">\r\n\t\t\t\t\t\t<Title id=\"productLabel_S4\" text=\"{i18n>PRODUCT_BASKET}\"/>\r\n\t\t\t\t\t\t<ToolbarSpacer id=\"productSpacer_S4\"></ToolbarSpacer>\r\n\t\t\t\t\t\t<Button id=\"ProductButton\" icon=\"sap-icon://add\" press=\"onAddProduct\" tooltip=\"{i18n>ADD}\"></Button>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>\r\n\t\t\t\t<columns>\r\n\t\t\t\t\t<!-- Extension point to add additional opportunity edit product table column-->\r\n\t\t\t\t\t<core:ExtensionPoint name=\"opportunityEditProductTabColoumExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t<Column id=\"basketColumn1_S4\" vAlign=\"Middle\" width=\"35%\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"productBasketLabel_S4\" text=\"{i18n>PRODUCT_OR_CATEGORY}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn2_S4\" vAlign=\"Middle\" width=\"20%\" hAlign=\"Right\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"quantityLabel_S4\" text=\"{i18n>QUANTITY}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn3_S4\" vAlign=\"Middle\" width=\"15%\" minScreenWidth=\"Tablet\" demandPopin=\"true\" hAlign=\"Right\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"unitPriceLabel_S4\" text=\"{i18n>UNIT_PRICE}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn4_S4\" vAlign=\"Middle\" width=\"20%\" hAlign=\"Right\" minScreenWidth=\"Tablet\" demandPopin=\"true\">\r\n\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t<Label id=\"vol_S4\" text=\"{i18n>PRODUCT_VOLUME}\" design=\"Bold\"></Label>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column id=\"basketColumn5_S4\" vAlign=\"Middle\" width=\"10%\" minScreenWidth=\"Tablet\" hAlign=\"Right\" demandPopin=\"true\">\r\n\t\t\t\t\t\t<header></header>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<!-- Extension point to add additional opportunity edit product table column at the end-->\r\n\t\t\t\t\t<core:ExtensionPoint name=\"opportunityEditProductTabColoumendExtension\"></core:ExtensionPoint>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ColumnListItem id=\"productBasketTemplate_S4\">\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional opportunity edit product table cells -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityEditProductTabCellsExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t<ui:VerticalLayout id=\"productBasketVLayout_S4\" hAlign=\"Left\">\r\n\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t<Label id=\"productLabelValue_S4\" design=\"Bold\"\r\n\t\t\t\t\t\t\t\t\t\ttext=\"{path : 'json>ProductGuid', formatter : 'cus.crm.opportunity.util.Formatter.formatProductName'}\"></Label>\r\n\t\t\t\t\t\t\t\t\t<Label id=\"productClassificationValue_S4\"\r\n\t\t\t\t\t\t\t\t\t\ttext=\"{path: 'json>ProductGuid',formatter : 'cus.crm.opportunity.util.Formatter.formatProdClassification'}\"></Label>\r\n\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t</ui:VerticalLayout>\r\n\t\t\t\t\t\t\t<ui:HorizontalLayout id=\"productBasketHLayout_S4\" width=\"150px\" custom:field=\"QUANTITY\">\r\n\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t<Input width=\"75px\" id=\"quantityValue_S4\"\r\n\t\t\t\t\t\t\t\t\t\tvalue=\"{parts:[{path:'json>Quantity'}, {path:'json>Unit'}], formatter:'cus.crm.opportunity.util.Formatter.formatQuantityEdit'}\"\r\n\t\t\t\t\t\t\t\t\t\teditable=\"{path : 'json>ProductGuid', formatter : 'cus.crm.opportunity.util.Formatter.formatQuantityField'}\" liveChange=\"quantityChanged\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"numberRTL\" ariaLabelledBy=\"quantityLabel_S4\"></Input>\r\n\t\t\t\t\t\t\t\t\t<Text id=\"unit\" text=\"{json>Unit}\" class=\"UnitPadding\"></Text>\r\n\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t</ui:HorizontalLayout>\r\n\t\t\t\t\t\t\t<ObjectNumber custom:field=\"NETVALUE\" id=\"netValue_S4\" number=\"{json>NetValue}\" numberUnit=\"{json>CurrencyCode}\"/>\r\n\t\t\t\t\t\t\t<Input width=\"75px\" id=\"expectedNetValue_S4\" value=\"{json>TotalExpectedNetValue}\" editable=\"true\" liveChange=\"volumeChanged\"\r\n\t\t\t\t\t\t\t\tclass=\"numberRTL\" maxLength=\"13\"></Input>\r\n\t\t\t\t\t\t\t<ui:VerticalLayout>\r\n\t\t\t\t\t\t\t\t<Button id=\"productDeleteButton_S4\" icon=\"sap-icon://sys-cancel-2\" tooltip=\"{i18n>CANCEL}\"\r\n\t\t\t\t\t\t\t\t\tvisible=\"{path : 'json>ProductGuid',formatter : 'cus.crm.opportunity.util.Formatter.formatDeleteButton'}\" type=\"Transparent\"\r\n\t\t\t\t\t\t\t\t\tpress=\"deleteProduct\"></Button>\r\n\t\t\t\t\t\t\t</ui:VerticalLayout>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional opportunity edit product table cells at the end -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityEditProductTabCellsEndExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</Table>\r\n\t\t</content>\r\n\t</Page>\r\n</core:View>",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/S2Custom.controller.js": "/*\r\n * Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"cus.crm.opportunity.util.Formatter\");\r\njQuery.sap.require(\"sap.ca.ui.utils.busydialog\");\r\njQuery.sap.require(\"sap.ca.scfld.md.controller.BaseMasterController\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.schema\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.Util\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.Constants\");\r\njQuery.sap.require(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.appHelper.custFormatter\");\r\nsap.ui.controller(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.view.S2Custom\", {\r\n\tsorting1: function(e) {\r\n\t\tvar c = this.oResourceBundle.getText('CLSDATE');\r\n\t\tvar a = this.oResourceBundle.getText('ACT');\r\n\t\tvar s = this.oResourceBundle.getText('STAT');\r\n\t\tvar n = this.oResourceBundle.getText('Next_Followup');\r\n\t\tvar v = this.oResourceBundle.getText('Visit_Date');\r\n\r\n\t\tthis.sortingDailogFragment.getSortItems()[0].setText(c);\r\n\t\tthis.sortingDailogFragment.getSortItems()[1].setText(a);\r\n\t\tthis.sortingDailogFragment.getSortItems()[2].setText(s);\r\n\t\tthis.sortingDailogFragment.getSortItems()[3].setText(n);\r\n\t\tthis.sortingDailogFragment.getSortItems()[4].setText(v);\r\n\t\tthis.sortingDailogFragment.setSortDescending(true);\r\n\t\tthis.sortingDailogFragment.open();\r\n\t},\r\n\r\n\tapplySort: function(k) {\r\n\t\tvar s, o;\r\n\t\tif (k === this.oConstants.OPP_PROPS.CLOSING_DATE || k === this.oConstants.OPP_PROPS.PROSPECT_NAME || k === this.oConstants.OPP_PROPS.USER_STS_TEXT ||\r\n\t\t\tk === \"VISITDATE\" || k === \"NEXTFOLLOWUP\" || k === \"StartDate\") {\r\n\t\t\tif (this.sortingDailogFragment.getSortDescending() === true) {\r\n\t\t\t\ts = new sap.ui.model.Sorter(k, true, false);\r\n\t\t\t} else {\r\n\t\t\t\ts = new sap.ui.model.Sorter(k, false, false);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ts = new sap.ui.model.Sorter(k, false, false);\r\n\t\t}\r\n\t\tif (this.isOffline) {\r\n\t\t\tvar S = new sap.ui.model.Sorter(this.oConstants.OPP_PROPS.GUID, false, false);\r\n\t\t\to = [s, S];\r\n\t\t} else {\r\n\t\t\to = [s];\r\n\t\t}\r\n\t\tthis.getView().byId('list').getBinding(\"items\").aSorters = [];\r\n\t\tthis.getView().byId('list').getBinding(\"items\").aSorters = o;\r\n\t\tthis.getView().byId('list').getBinding(\"items\").sort(o);\r\n\t},\r\n\r\n\textHookAddExtraAttributes: function(o) {\r\n\t\tif (o) {\r\n\t\t\to.push(\"NEXTFOLLOWUP\");\r\n\t\t\to.push(\"TENTIVEDATE\");\r\n\t\t\to.push(\"VISITDATE\");\r\n\t\t}\r\n\r\n\t\tthis.sortingDailogFragment = this.isOffline ? new sap.ui.xmlfragment(this.createId(\"show_Sort_Fragment\"),\r\n\t\t\t'cus.crm.opportunity.view.SortingDialog_Offline', this) : new sap.ui.xmlfragment(this.createId(\"show_Sort_Fragment\"),\r\n\t\t\t'cus.crm.opportunity.CRM_OPPRTNTYExtension.view.SortingDialog1', this);\r\n\t},\r\n\r\n\textHookGetHeaderFooterOptions: function(oOptions) {\r\n\t\tvar that = this;\r\n\t\tthis.getList().onAfterRendering = function(e) {\r\n\t\t\tif (sap.m.List.prototype.onAfterRendering) {\r\n\t\t\t\tsap.m.List.prototype.onAfterRendering.apply(this, arguments);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.getItems().length > 0) {\r\n\t\t\t\tvar _oBinding = this.getBinding(\"items\");\r\n\t\t\t\tvar aSorters = [new sap.ui.model.Sorter(\"ClosingDate\", true, false)];\r\n\t\t\t\t_oBinding.sort(aSorters);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (that.getOwnerComponent()._oViews._oViews[\"cus.crm.opportunity.view.S5\"]) {\r\n\t\t\tvar thatS5 = that.getOwnerComponent()._oViews._oViews[\"cus.crm.opportunity.view.S5\"];\r\n\t\t\tthatS5.byId(\"CustSw_id\").setState(true);\r\n\t\t\tthatS5.byId(\"cusLblCustomer\").setVisible(true);\r\n\t\t\tthatS5.byId(\"customer\").setVisible(true);\r\n\t\t\tthatS5.byId(\"applicantType\").setVisible(false);\r\n\t\t\tthatS5.byId(\"FirstName\").setVisible(false);\r\n\t\t\tthatS5.byId(\"LastName\").setVisible(false);\r\n\t\t\tthatS5.byId(\"cusFirstName\").setVisible(true);\r\n\t\t\tthatS5.byId(\"cusMiddleName\").setVisible(true);\r\n\t\t\tthatS5.byId(\"cusLastName\").setVisible(true);\r\n\t\t\tthatS5.byId(\"customerName\").setVisible(true);\r\n\t\t\tthatS5.byId(\"cusPhone\").setVisible(true);\r\n\t\t\tthatS5.byId(\"cusStd\").setVisible(true);\r\n\t\t\tthatS5.byId(\"cusMobile\").setVisible(true);\r\n\t\t\tthatS5.byId(\"tmlCustomer\").setVisible(false);\r\n\r\n\t\t\t//////////////////////////////////\r\n\t\t\tthatS5.byId(\"customer\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusMiddleName\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusDistrict\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusCity\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusState\").setValue(\"\");\r\n\r\n\t\t\tthatS5.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusStd\").setValue(\"\");\r\n\r\n\t\t\tthatS5.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusState\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusFleetSize\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusSeg\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusFleetApp\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusFleetSize\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusDealerCVPV\").setSelectedKey(\"\");\r\n\t\t\t//thatS5.byId(\"statusdropdown\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusDistchan\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusDealerCVPV\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusDistchan\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"leadType\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusDatePickerNextFollowup\").setValue(\"\");\r\n\t\t\t//\tthatS5.byId(\"statusdropdown\").setSelectedKey(\"\");\r\n\t\t\tthatS5.byId(\"cusDatePickerTentative\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusRemark\").setValue(\"\");\r\n\t\t\tvar dateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n\t\t\t\tpattern: \"dd.MM.yyyy\",\r\n\t\t\t\tUTC: false\r\n\t\t\t});\r\n\t\t\tthatS5.byId(\"cusDatePickerVisit\").setValue(dateFormat.format(new Date(), false));\r\n\t\t\tthatS5.byId(\"cusDealerSelect\").setValue(\"\");\r\n\t\t\tthatS5.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\t\t/////////// set value state error ///////////\r\n\t\t\tif (thatS5.byId(\"applicantType\").getVisible()) {\r\n\t\t\t\tthatS5.byId(\"applicantType\").setSelectedKey(\"\");\r\n\t\t\t\tthatS5.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthatS5.byId(\"FirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"LastName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusFirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusMiddleName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusLastName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t//\tthatS5.byId(\"statusdropdown\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusAdd1\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusAdd2\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusAdd3\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusPinCode\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"customer\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusCity\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusPhone\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusStd\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusFleetSize\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusSeg\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusFleetApp\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusDealerLocation\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusDealerSelect\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"leadType\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusDatePickerNextFollowup\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t//\tthatS5.byId(\"statusdropdown\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusDatePickerTentative\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthatS5.byId(\"cusRemark\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t//Added By Bajrang on 11.07.2018 for clearing Product Table\r\n\t\t\tthatS5.byId(\"ProductButton11\").setEnabled(false);\r\n\t\t\tthatS5.byId(\"idProdTable\").removeAllItems();\r\n\t\t\tthatS5.byId(\"idProdTable\").unbindAggregation(\"items\");\r\n\t\t\t//Added By Bajrang on 11.07.2018 for clearing Product Table\r\n\t\t}\r\n\t}\r\n\r\n});",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/S2Custom.view.xml": "<core:View xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\" controllerName=\"cus.crm.opportunity.view.S2\">\r\n\t<Page id=\"page\" title=\"{i18n>MASTER_TITLE}\">\r\n\t\t<!-- sorter : { path : 'ProspectName', descending : true, group : true} -->\r\n\t\t<content>\r\n\t\t\t<List id=\"list\" selectionChange=\"_handleSelect\" mode=\"{device>/listMode}\" growing=\"true\" noDataText=\"{i18n>NO_DATA_TEXT}\"\r\n\t\t\t\tgrowingScrollToLoad=\"true\">\r\n\t\t\t\t<!-- Extension point to add additional opportunity Items-->\r\n\t\t\t\t<core:ExtensionPoint name=\"opportunityItemExtension\"/>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ObjectListItem id=\"MAIN_LIST_ITEM\" press=\"_handleItemPress\" type=\"{device>/listItemType}\"\r\n\t\t\t\t\t\ttitle=\"{parts:[{path:'ProspectName'}, {path:'ProspectNumber'}], formatter:'cus.crm.opportunity.util.Formatter.formatProspect'}\">\r\n\t\t\t\t\t\t<attributes>\r\n\t\t\t\t\t\t\t<ObjectAttribute id=\"objAttribute1\"\r\n\t\t\t\t\t\t\t\ttext=\"Next Follow Up: {path:'NEXTFOLLOWUP',type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"/>\r\n\t\t\t\t\t\t\t<ObjectAttribute id=\"objAttribute2\"\r\n\t\t\t\t\t\t\t\ttext=\"Visit Date:{path:'VISITDATE' ,type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"/>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional opportunity Item Attributes-->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityItemAttributeExtension\"/>\r\n\t\t\t\t\t\t</attributes>\r\n\t\t\t\t\t\t<firstStatus>\r\n\t\t\t\t\t\t\t<!-- extension to add new Status -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityItemStatusExtension\"/>\r\n\t\t\t\t\t\t</firstStatus>\r\n\t\t\t\t\t\t<secondStatus>\r\n\t\t\t\t\t\t\t<ObjectStatus id=\"objstatus\" text=\"{ path: 'UserStatusText', formatter: 'appHelper.custFormatter.formatStatus' }\"/>\r\n\t\t\t\t\t\t</secondStatus>\r\n\t\t\t\t\t</ObjectListItem>\r\n\t\t\t\t</items>\r\n\t\t\t\t<infoToolbar >\r\n\t\t\t\t\t<Toolbar id=\"toolbarInfo\" visible=\"false\">\r\n\t\t\t\t\t\t<Label id=\"labelInfo\" text=\"\"/>\r\n\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t<core:Icon id=\"crossIconMasterList\" src=\"sap-icon://sys-cancel\" press=\"_handleToolBar\" tooltip=\"{i18n>CANCEL}\" decorative=\"false\"\r\n\t\t\t\t\t\t\tariaLabelledBy=\"labelInfo\"/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</infoToolbar>\r\n\t\t\t</List>\r\n\t\t</content>\r\n\t</Page>\r\n</core:View>",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/S3Custom.controller.js": "jQuery.sap.require(\"sap.ca.ui.quickoverview.EmployeeLaunch\");\r\njQuery.sap.require(\"sap.ca.ui.quickoverview.CompanyLaunch\");\r\njQuery.sap.require(\"sap.m.MessageBox\");\r\njQuery.sap.require(\"sap.ca.ui.model.type.FileSize\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.schema\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.Formatter\");\r\njQuery.sap.require(\"sap.ca.scfld.md.controller.BaseDetailController\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.Util\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.Constants\");\r\nsap.ui.controller(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.view.S3Custom\", {\r\n\tonAfterRendering: function(evt) {\r\n\t\t//\tvar fleet = this.byId(\"opportunityFleet_Application_Text\");\r\n\t\t// this.byId(\"fileupload\").setFileType([\"png\", \"jpg\", \"jpeg\", \"doc\", \"bit\",\r\n\t\t//              \"docx\", \"xls\", \"xlsx\", \"txt\", \"tif\", \"ppt\", \"pptx\"\r\n\t\t//          ]);\r\n\t},\r\n\r\n\t_loadVersionSpecificUI: function(b) {\r\n\t\tif (parseFloat(b) >= 2) {\r\n\t\t\tthis._loadWave4UI();\r\n\t\t\tif (!this.fullScreenMode) {\r\n\t\t\t\tthis.oHeaderFooterOptions = this.oHeaderFooterOptions4UI;\r\n\t\t\t} else {\r\n\t\t\t\tthis.oHeaderFooterOptions = this.oHeaderFooterOptions4UI;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._loadWave3UI();\r\n\t\t\tthis.oHeaderFooterOptions = this.oHeaderFooterOptions3UI;\r\n\t\t}\r\n\t\tif (parseFloat(b) >= 5) {\r\n\t\t\tthis._loadWave8UI();\r\n\t\t}\r\n\t},\r\n\r\n\textendHeaderFooterOptions: function(h) {\r\n\t\tif (h.buttonList.length < 3) {\r\n\t\t\tvar t = this;\r\n\t\t\tvar customBtn = {\r\n\t\t\t\t/*\"oProdBtn\": {*/\r\n\t\t\t\tsI18nBtnTxt: \"VIEW_ADD_PRODUCT\",\r\n\t\t\t\tonBtnPressed: function(e) {\r\n\t\t\t\t\tt.onAddProduct();\r\n\t\t\t\t},\r\n\t\t\t\tbEnabled: true\r\n\t\t\t};\r\n\t\t\th.buttonList.push(customBtn);\r\n\t\t}\r\n\t},\r\n\r\n\tonAddProduct: function() {\r\n\t\tthis._oComponent = this.getOwnerComponent();\r\n\t\tif (this._oComponent.getComponentData() !== undefined) {\r\n\t\t\tif (this._oComponent.getComponentData().startupParameters.NavPage !== undefined) {\r\n\t\t\t\tthis._sNavPage = this._oComponent.getComponentData().startupParameters.NavPage[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar data = this.byId(\"opportunityHeader\").getModel(\"json\").getData();\r\n\t\tvar oppId = data.Id;\r\n\t\tvar semObj = \"ZCRMNEEDANALYSIS\";\r\n\t\tvar action = \"display\";\r\n\t\tvar navigationService = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\tnavigationService.toExternal({\r\n\t\t\ttarget: {\r\n\t\t\t\tsemanticObject: semObj,\r\n\t\t\t\taction: action\r\n\t\t\t},\r\n\t\t\tparams: {\r\n\t\t\t\t\"ObjectId\": oppId,\r\n\t\t\t\t\"NavPage\": this._sNavPage\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tnavigateDocHistory: function(e) {\r\n\t\tvar t = e.getSource().getText();\r\n\t\tvar O = \"\";\r\n\t\tvar g = \"\";\r\n\t\tfor (var i = 0; i < this.newResult.length; i++) {\r\n\t\t\tif (t == this.newResult[i].TransactionId) {\r\n\t\t\t\tO = this.newResult[i].ObjectType;\r\n\t\t\t\tg = this.newResult[i].Guid;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar f = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService;\r\n\t\tthis.oCrossAppNavigator = f && f(\"CrossApplicationNavigation\");\r\n\t\tvar n = undefined;\r\n\t\tif (O === \"BUS2000111\") {\r\n\t\t\tn = {\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tsemanticObject: \"Opportunity\",\r\n\t\t\t\t\taction: \"manageOpportunity&/display/\" + this.oConstants.OPP_END_POINT + \"(guid'\" + g + \"')\"\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else if (O === \"BUS2000125\") {\r\n\t\t\tn = {\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tsemanticObject: \"Task\",\r\n\t\t\t\t\taction: \"manageTasks&/taskOverview/\" + this.oConstants.TASK_END_POINT + \"(guid'\" + g + \"')\"\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else if (O === \"BUS2000126\") {\r\n\t\t\tn = {\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tsemanticObject: \"Appointment\",\r\n\t\t\t\t\taction: \"myAppointments\"\r\n\t\t\t\t},\r\n\t\t\t\tappSpecificRoute: [\r\n\t\t\t\t\t\"&\",\r\n\t\t\t\t\t\"appointment\",\r\n\t\t\t\t\tg\r\n\t\t\t\t].join(\"/\")\r\n\t\t\t};\r\n\t\t} else if (O === \"BUS2000108\") {\r\n\t\t\tn = {\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tsemanticObject: \"Lead\",\r\n\t\t\t\t\taction: \"manageLead&/display/\" + this.oConstants.LEAD_END_POINT + \"(guid'\" + g + \"')\"\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (this.extHookGetExtendedAppDetailsGeneral) {\r\n\t\t\tn = this.extHookGetExtendedAppDetailsGeneral(n);\r\n\t\t}\r\n\t\tif (this.oCrossAppNavigator) {\r\n\t\t\tthis.oCrossAppNavigator.toExternal(n);\r\n\t\t}\r\n\t},\r\n\r\n\t_handleAddNote: function(e) {\r\n\t\tvar t = e.getParameter(\"value\");\r\n\t\tif (t) {\r\n\t\t\tvar a = this;\r\n\t\t\tvar m = this.getView().getModel();\r\n\t\t\tvar h = this.byId(\"info\").getModel(\"json\").getData().Guid;\r\n\t\t\tvar E = {\r\n\t\t\t\tHeaderGuid: h,\r\n\t\t\t\tContent: t\r\n\t\t\t};\r\n\t\t\tm.create(\"/OpportunityNotesSet\", E, null, jQuery.proxy(function() {\r\n\t\t\t\tvar a = this;\r\n\t\t\t\tm.read(a.sPath, null, [\"$expand=Notes\"], true, function(o, r) {\r\n\t\t\t\t\ta.byId(\"listItem\").setModel(new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\t\tOpportunityNotesSet: o.Notes.results\r\n\t\t\t\t\t}), \"json\");\r\n\t\t\t\t\ta.byId(\"listItem\").getModel().updateBindings();\r\n\t\t\t\t});\r\n\t\t\t}, this), function(M) {\r\n\t\t\t\ta.displayResponseErrorMessage(M, sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_FAILED\"));\r\n\t\t\t});\r\n\t\t\ta.byId(\"listItem\").getModel().updateBindings();\r\n\t\t}\r\n\t},\r\n\tOnuploadBefore: function(evt) {\r\n\t\t/* var fileupload = this.byId(\"UploadCollection\");\r\n        var ext = evt.getParameters(\"filename\");\r\n        var ext1 = ext.fileName;\r\n        var extn = ext1.substring(ext1.lastIndexOf(\".\") + 1,\r\n            ext1.length);\r\n        extn = extn.toLowerCase();\r\n        if (type.indexOf(extn) == -1) {\r\n            this.onTypeMissmatch();\r\n        }*/\r\n\t},\r\n\tonTypeMissmatch: function(evt) {\r\n\t\tvar msg = \"File Type not supported\";\r\n\t\tsap.m.MessageBox.show(msg, {\r\n\t\t\ttitle: \"Error\",\r\n\t\t\ticon: sap.m.MessageBox.Icon.ERROR,\r\n\t\t\tstyleClass: \"sapUiSizeCompact\",\r\n\t\t\tonClose: function(evt) {}\r\n\t\t}).addStyleClass(\"sapUiSizeCompact\");\r\n\t},\r\n\tbindInfoAndProducts: function(d, s) {\r\n\t\tvar e = [\r\n\t\t\tthis.oConstants.OPP_END_POINT,\r\n\t\t\tthis.oConstants.DOCUMENT_ITEM_END_POINT,\r\n\t\t\tthis.oConstants.DOC_APPLICATION_LOG_NAVIGATION\r\n\t\t];\r\n\t\td = this.oConstantsFactory.mappingPropertyByEntities(d, e);\r\n\t\tthis.d = d;\r\n\t\tvar i = this.byId(\"info\");\r\n\t\tvar p = this.byId(\"Product_Tab\");\r\n\t\tvar j = this.getView().getModel(\"json\");\r\n\t\tvar D = j.oData;\r\n\t\tif (!this.isOffline) {\r\n\t\t\tvar a = this.byId(\"S3_Header\");\r\n\t\t\tthis.transactionType = a.getModel(\"json\").getData().ProcessType;\r\n\t\t}\r\n\t\tif (p) {\r\n\t\t\tif (d[this.oConstants.DOCUMENT_ITEM_END_POINT] !== undefined) {\r\n\t\t\t\tD.Products = d[this.oConstants.DOCUMENT_ITEM_END_POINT].results;\r\n\t\t\t\tD.ProductsNum = d[this.oConstants.DOCUMENT_ITEM_END_POINT].results.length;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tvar t = this;\r\n\t\t/*\tthis.oModel.read(\"/ZsalesofficeF4Set\", null, [], true, jQuery.proxy(function(\r\n\t\t\t\taData, b) {\r\n\t\t\t\tt.d.ZsalesofficeF4Set = aData;\r\n\t\t\t\t//t._custJsonModel.setData(t._custData);\r\n\t\t\t//\tt._custJsonModel.updateBindings();\r\n\t\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\t\tthis.handleErrors(e);\r\n\t\t\t}, this));*/\r\n\r\n\t\tthis.oModel.read(\"/ZBU_DESCRIPSet\", null, [\"$filter=Branch eq '\" + d.Branch + \"' and Zchannel eq '\" + d.DistributionChannel + \"'\"],\r\n\t\t\tfalse,\r\n\t\t\tjQuery.proxy(function(\r\n\t\t\t\taData, b) {\r\n\t\t\t\tt.d.ZBU_DESCRIPSet = aData;\r\n\t\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\t\tt.handleErrors(e);\r\n\t\t\t}, this));\r\n\t\tj.updateBindings();\r\n\t\tif (this.isOffline) {\r\n\t\t\tthis.byId(\"Product_Tab\").getBinding(\"items\").sort(new sap.ui.model.Sorter(this.oConstants.SORT_PRODUCT_BY_ITEM_GUID, false, false));\r\n\t\t}\r\n\r\n\t\tif (d[this.oConstants.CHANGE_DOC_END_POINT] && d[this.oConstants.CHANGE_DOC_END_POINT].results) {\r\n\t\t\tif (d.ChangeDocs.results.length === 0) {\r\n\t\t\t\tthis.byId(\"log\").setVisible(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"log\").setVisible(true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (d.Competitors && d.Competitors.results) {\r\n\t\t\tif (d.Competitors.results.length === 0) {\r\n\t\t\t\tthis.byId(\"tab_competitor\").setVisible(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"tab_competitor\").setVisible(true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.extHookErrMsgLazyLoad || !this.extHookErrMsgLazyLoad()) {\r\n\t\t\tthis.sBackendVersion = cus.crm.opportunity.util.schema._getServiceSchemaVersion(this.oModel, \"Opportunity\");\r\n\t\t\tif (this.sBackendVersion >= 4) {\r\n\t\t\t\tif (d[this.oConstants.DOC_APPLICATION_LOG_NAVIGATION] && d[this.oConstants.DOC_APPLICATION_LOG_NAVIGATION].results) {\r\n\t\t\t\t\tif (d[this.oConstants.DOC_APPLICATION_LOG_NAVIGATION].results.length === 0) {\r\n\t\t\t\t\t\tthis.setBtnEnabled(\"errorMsg\", false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.setBtnEnabled(\"errorMsg\", true);\r\n\t\t\t\t\t\tvar L = this.showErrorMsgFragment.getContent()[0];\r\n\t\t\t\t\t\tif (L && L.getModel(\"json\")) {\r\n\t\t\t\t\t\t\tL.getModel(\"json\").setData({\r\n\t\t\t\t\t\t\t\tOpportunityLogSet: d[this.oConstants.DOC_APPLICATION_LOG_NAVIGATION].results\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvar o = d[this.oConstants.DOC_APPLICATION_LOG_NAVIGATION].results.length;\r\n\t\t\t\t\t\t\tvar m = this.oResourceBundle.getText(\"ERROR_MESSAGE_TITLE\", o);\r\n\t\t\t\t\t\t\tthis.showErrorMsgFragment.setTitle(m);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._custData = [];\r\n\t\tthis._custJsonModel = new sap.ui.model.json.JSONModel(this._custData);\r\n\t\tthis._custJsonModel.setSizeLimit(200);\r\n\t\tthis.getView().setModel(this._custJsonModel, \"json\");\r\n\t\tvar t = this;\r\n\t\tthis.oModel.read(this.sPath, null, [\"$expand=ZFLEET_APP_MASTS,Zcustseg\"], true, jQuery.proxy(function(\r\n\t\t\taData, b) {\r\n\t\t\tt._custData = aData;\r\n\t\t\tt._custJsonModel.setData(aData);\r\n\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tthis.handleErrors(e);\r\n\t\t}, this));\r\n\r\n\t\tif (s) {\r\n\t\t\tthis.setDefaultTabToInfo();\r\n\t\t}\r\n\t\tthis.bindS3Header(d);\r\n\t}\r\n});",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/AccountSelectDialogCustom.fragment.xml": "<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\" xmlns:form=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\">\r\n\t<Dialog title=\"Account Search\" contentWidth=\"720px\" contentHeight=\"720px\" class=\"DialogPadding\">\r\n\t\t<!--<subHeader>-->\r\n\t\t<!--\t<Bar>-->\r\n\t\t<!--\t\t<contentLeft>-->\r\n\t\t<!--\t\t\t<SearchField placeholder=\"{i18n>SEARCH}\" liveChange=\"liveSearchAccount\" search=\"searchAccount\"></SearchField>-->\r\n\t\t<!--\t\t</contentLeft>-->\r\n\t\t<!--\t</Bar>-->\r\n\t\t<!--</subHeader>-->\r\n\t\t<content>\r\n\t\t\t<l:Grid defaultSpan=\"L6 M6 S12\" class=\"gridBG\">\r\n\t\t\t\t<l:content>\r\n\t\t\t\t\t<Input id=\"firstName\" placeholder=\"First Name/ Name1\" liveChange=\"namechnge\"></Input>\r\n\t\t\t\t\t<Input id=\"lastName\" placeholder=\"Last Name/ Name2\" liveChange=\"namechnge\"></Input>\r\n\t\t\t\t\t<Input id=\"mobNum\" value=\"\" placeholder=\"Customer Mobile Number\"  maxLength=\"10\" liveChange=\"MoNumchnge\"></Input>\r\n\t\t\t\t\t<Input id=\"contractNumber\" type=\"Text\" placeholder=\"Contract Number\" liveChange=\"Numchnge\"></Input>\r\n\t\t\t\t\t<Input id=\"rcNum\" value=\"\" type=\"Text\" placeholder=\"RC Number\" liveChange=\"Numchnge\"></Input>\r\n\t\t\t\t\t<Input id=\"chassisNumber\" type=\"Text\" placeholder=\"Chassis Number\" liveChange=\"Numchnge\"></Input>\r\n\t\t\t\t\t<Input id=\"engineNumber\" type=\"Text\" placeholder=\"Engine Number\" liveChange=\"Numchnge\"></Input>\r\n\t\t\t\t\t<Input id=\"partnerNumber\" type=\"Text\" placeholder=\"Business Partner\" liveChange=\"Numchnge\"></Input>\r\n\t\t\t\t\t<Button id=\"bpSearch\" text=\"Search\" press=\"onBPSearch\" ></Button>\r\n\t\t\t\t</l:content>\r\n\t\t\t</l:Grid>\r\n\t\t\t<List id=\"accountList\" class=\"sapUiTinyMarginTop\" mode=\"SingleSelectMaster\" selectionChange=\"setAccount\">\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ObjectListItem></ObjectListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</List>\r\n\t\t\t<!--<List id=\"accountList\" noDataText=\"{i18n>NO_DATA_TEXT}\" mode=\"SingleSelectMaster\" selectionChange=\"setAccount\"\r\n\t\t\t\tgrowing=\"true\" growingScrollToLoad=\"true\">\r\n\t\t\t\t<items>\r\n\t\t\t\t<ObjectListItem title=\"{parts : [{path: 'FullName'},{path: 'NameFirst'},{path: 'Partner'}],formatter : 'cus.crm.opportunity.util.Formatter.formatAccountF4Title'}\">\r\n\t\t\t\t\t\t<attributes>\r\n\t\t\t\t\t\t\t<ObjectAttribute\r\n\t\t\t\t\t\t\t\ttext=\"{Partner} {City} {Country}\"></ObjectAttribute>\r\n\t\t\t\t\t\t</attributes>  \r\n\t\t\t\t\t</ObjectListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</List>-->\r\n\t\t\t<!--<List id=\"tmfl_Need_BankAndRepayment_AccCB\" items=\"{path: '/ZBPF4SearchSet', templateShareable: true}\" class=\"sapUiTinyMarginTop\">-->\r\n\t\t\t<!--\t<core:Item key=\"{Partner}\" text=\"{NameFirst} ({NameLast})\"/>-->\r\n\t\t\t<!--</List>-->\r\n\t\t</content>\r\n\t\t<beginButton>\r\n\t\t\t<Button text=\"{i18n>CANCEL}\" press=\"closeAccountF4\"></Button>\r\n\t\t</beginButton>\r\n\t</Dialog>\r\n</core:FragmentDefinition>",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/S4Custom.controller.js": "jQuery.sap.require(\"sap.ca.ui.message.message\");\r\njQuery.sap.require(\"sap.ca.ui.utils.busydialog\");\r\njQuery.sap.require(\"sap.ca.ui.DatePicker\");\r\njQuery.sap.require(\"sap.m.SelectDialog\");\r\njQuery.sap.require(\"sap.m.MessageBox\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.Formatter\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.schema\");\r\njQuery.sap.require(\"sap.ca.scfld.md.controller.BaseDetailController\");\r\njQuery.sap.require(\"cus.crm.opportunity.util.Util\");\r\nsap.ui.controller(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.view.S4Custom\", {\r\n\r\n\tonCancel: function() {\r\n\t\tif (this._checkDataLoss()) {\r\n\t\t\tvar c = sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"CONTINUE\");\r\n\t\t\tvar C = sap.m.MessageBox.Action.CANCEL;\r\n\t\t\tsap.m.MessageBox.show(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"DATA_LOSS\"), {\r\n\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\ttitle: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"WARNING\"),\r\n\t\t\t\tactions: [\r\n\t\t\t\t\tc,\r\n\t\t\t\t\tC\r\n\t\t\t\t],\r\n\t\t\t\tonClose: jQuery.proxy(function(a) {\r\n\t\t\t\t\tif (a == c) {\r\n\t\t\t\t\t\tvar r = {};\r\n\t\t\t\t\t\tr.isConfirmed = true;\r\n\t\t\t\t\t\tthis.datalossDismissed(r);\r\n\t\t\t\t\t} else if (a == C) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.datalossDismissed({\r\n\t\t\t\tisConfirmed: true\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.oModel.clearBatch();\r\n\t},\r\n\r\n\tpageNeedsUpdate: function() {\r\n\t\tthis.oModel.clearBatch();\r\n\t\tvar n = parseFloat(this.sBackendVersion);\r\n\t\tvar e = null;\r\n\t\tif (n >= 4) {\r\n\t\t\te = {\r\n\t\t\t\tsETag: null\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (this.WinStatusCode === this.byId(\"userStatus\").getSelectedKey()) {\r\n\t\t\tthis.getView().byId(\"chanceOfSuccess\").setValue(100);\r\n\t\t}\r\n\t\tif (this.LostStatusCode === this.byId(\"userStatus\").getSelectedKey()) {\r\n\t\t\tthis.getView().byId(\"chanceOfSuccess\").setValue(0);\r\n\t\t}\r\n\t\tthis.requestNumber = 0;\r\n\t\tthis.bBasketUpdate = false;\r\n\t\tthis.changeSetMapping = {\r\n\t\t\tHEADER: \"\",\r\n\t\t\tCONTACT: \"\",\r\n\t\t\tEMPLOYEE: \"\",\r\n\t\t\tSTATUS: \"\",\r\n\t\t\tBASKET: \"\"\r\n\t\t};\r\n\t\tvar c = [];\r\n\t\tvar h = this.headerGuid;\r\n\t\tvar b = this.byId(\"productBasketEdit\").getModel(\"json\").getData();\r\n\t\tvar m = this.oModel;\r\n\t\tvar t = this;\r\n\t\tc = [];\r\n\t\tthis.changeSetMapping.CUSTOM_UPDATE_REQUEST = \"\";\r\n\t\tthis.requestNumber = 0;\r\n\t\tif (this.extHookCheckDeltaAndFrameRequests) {\r\n\t\t\tthis.extHookCheckDeltaAndFrameRequests(c);\r\n\t\t}\r\n\t\tvar a = {\r\n\t\t\tGuid: h,\r\n\t\t\tDescription: this.byId(\"description\").getValue(),\r\n\t\t\tExpectedSalesVolume: this.FormatvolumeValue.toString(),\r\n\t\t\tCurrencyCode: this.byId(\"currency\").getValue(),\r\n\t\t\tChanceOfSuccess: this.byId(\"chanceOfSuccess\").getValue(),\r\n\t\t\tStartDate: this.getDateTimeStampFromDatePicker(this.byId(\"datePickerStartDate\")),\r\n\t\t\tClosingDate: this.getDateTimeStampFromDatePicker(this.byId(\"datePickerEndDate\")),\r\n\t\t\tSalesStageCode: this.byId(\"stages\").getSelectedKey(),\r\n\t\t\tUserStatusCode: this.byId(\"userStatus\").getSelectedKey(),\r\n\t\t\tPriorityCode: this.byId(\"priority\").getSelectedKey(),\r\n\t\t\tForecastRelevance: this.byId(\"switch\").getState()\r\n\t\t};\r\n\t\tvar d = {};\r\n\t\tvar k;\r\n\t\tvar f = false;\r\n\t\tfor (k in a) {\r\n\t\t\tswitch (k) {\r\n\t\t\t\tcase \"Guid\":\r\n\t\t\t\t\td[k] = a[k];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"StartDate\":\r\n\t\t\t\tcase \"ClosingDate\":\r\n\t\t\t\t\tif (!this._areDatesSame(this.HeaderObject[k], a[k])) {\r\n\t\t\t\t\t\td[k] = a[k];\r\n\t\t\t\t\t\tf = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ChanceOfSuccess\":\r\n\t\t\t\t\tif (Number(this.HeaderObject[k]) !== Number(a[k])) {\r\n\t\t\t\t\t\td[k] = a[k];\r\n\t\t\t\t\t\tf = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ExpectedSalesVolume\":\r\n\t\t\t\t\tif (this.HeaderObject[k] !== a[k]) {\r\n\t\t\t\t\t\td[k] = a[k];\r\n\t\t\t\t\t\tif (!d.hasOwnProperty(\"CurrencyCode\")) {\r\n\t\t\t\t\t\t\td[\"CurrencyCode\"] = a[\"CurrencyCode\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tf = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (this.HeaderObject[k] !== a[k]) {\r\n\t\t\t\t\t\td[k] = a[k];\r\n\t\t\t\t\t\tf = true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._hasUserStatusChanged() || this._hasMainContactChanged() || this._hasEmployeeChanged()) {\r\n\t\t\tf = true;\r\n\t\t}\r\n\t\tif (this.extHookAddCustomHeaderFields) {\r\n\t\t\tvar g = this.extHookAddCustomHeaderFields(d);\r\n\t\t\tf = f || g;\r\n\t\t}\r\n\t\tif (f === true) {\r\n\t\t\tthis.changeSetMapping.HEADER = this.requestNumber;\r\n\t\t\tthis.requestNumber++;\r\n\t\t\tc.push(m.createBatchOperation(\"Opportunities(guid'\" + h + \"')\", \"MERGE\", d, e));\r\n\t\t} else {\r\n\t\t\tthis.changeSetMapping.HEADER = \"\";\r\n\t\t}\r\n\t\tif (this._hasUserStatusChanged()) {\r\n\t\t\tthis.changeSetMapping.STATUS = this.requestNumber;\r\n\t\t\tthis.requestNumber++;\r\n\t\t\tvar d;\r\n\t\t\tvar s;\r\n\t\t\tvar j, l;\r\n\t\t\ts = this.StatusProfile;\r\n\t\t\td = {\r\n\t\t\t\tHeaderGuid: h,\r\n\t\t\t\tStatusProfile: s,\r\n\t\t\t\tUserStatusCode: this.byId(\"userStatus\").getSelectedKey()\r\n\t\t\t};\r\n\t\t\tc.push(m.createBatchOperation(\"OpportunityStatuses(StatusProfile='\" + s + \"',UserStatusCode='\" + this.byId(\"userStatus\").getSelectedKey() +\r\n\t\t\t\t\"',HeaderGuid=guid'\" + h + \"')\", \"MERGE\", d, e));\r\n\t\t} else {\r\n\t\t\tthis.changeSetMapping.STATUS = \"\";\r\n\t\t}\r\n\t\tif (!this._isContactFilledProperly()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._hasMainContactChanged()) {\r\n\t\t\tvar u = \"\";\r\n\t\t\tvar p = {};\r\n\t\t\tif (this.byId(\"inputMainContact\").getValue() === \"\") {\r\n\t\t\t\tu = \"OpportunitySalesTeamSet(PartnerNumber='\" + \"\" + \"',PartnerFunctionCode='00000015',HeaderGuid=guid'\" + this.headerGuid + \"')\";\r\n\t\t\t\tp = {\r\n\t\t\t\t\tHeaderGuid: this.headerGuid,\r\n\t\t\t\t\tPartnerFunctionCode: \"00000015\",\r\n\t\t\t\t\tPartnerNumber: \"\",\r\n\t\t\t\t\tMainPartner: true\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tu = \"OpportunitySalesTeamSet(PartnerNumber='\" + this.oSelectedContact.contactID +\r\n\t\t\t\t\t\"',PartnerFunctionCode='00000015',HeaderGuid=guid'\" + this.headerGuid + \"')\";\r\n\t\t\t\tp = {\r\n\t\t\t\t\tHeaderGuid: this.headerGuid,\r\n\t\t\t\t\tPartnerFunctionCode: \"00000015\",\r\n\t\t\t\t\tPartnerNumber: this.oSelectedContact.contactID,\r\n\t\t\t\t\tMainPartner: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tthis.changeSetMapping.CONTACT = this.requestNumber;\r\n\t\t\tthis.requestNumber++;\r\n\t\t\tc.push(m.createBatchOperation(u, \"MERGE\", p, e));\r\n\t\t} else {\r\n\t\t\tthis.changeSetMapping.CONTACT = \"\";\r\n\t\t}\r\n\t\tif (parseFloat(this.sBackendVersion) >= 2) {\r\n\t\t\tif (this._hasEmployeeChanged()) {\r\n\t\t\t\tvar u;\r\n\t\t\t\tvar p = {};\r\n\t\t\t\tif (this.byId(\"inputEmpResponsible\").getValue() === \"\") {\r\n\t\t\t\t\tu = \"OpportunitySalesTeamSet(PartnerNumber='\" + \"',PartnerFunctionCode='00000014',HeaderGuid=guid'\" + this.headerGuid + \"')\";\r\n\t\t\t\t\tp = {\r\n\t\t\t\t\t\tHeaderGuid: this.headerGuid,\r\n\t\t\t\t\t\tPartnerFunctionCode: \"00000014\",\r\n\t\t\t\t\t\tPartnerNumber: \"\",\r\n\t\t\t\t\t\tMainPartner: true\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tu = \"OpportunitySalesTeamSet(PartnerNumber='\" + this.oSelectedEmployee.employeeID +\r\n\t\t\t\t\t\t\"',PartnerFunctionCode='00000014',HeaderGuid=guid'\" + this.headerGuid + \"')\";\r\n\t\t\t\t\tp = {\r\n\t\t\t\t\t\tHeaderGuid: this.headerGuid,\r\n\t\t\t\t\t\tPartnerFunctionCode: \"00000014\",\r\n\t\t\t\t\t\tPartnerNumber: this.oSelectedEmployee.employeeID,\r\n\t\t\t\t\t\tMainPartner: true\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tthis.changeSetMapping.EMPLOYEE = this.requestNumber;\r\n\t\t\t\tthis.requestNumber++;\r\n\t\t\t\tc.push(m.createBatchOperation(u, \"MERGE\", p, e));\r\n\t\t\t} else\r\n\t\t\t\tthis.changeSetMapping.EMPLOYEE = \"\";\r\n\t\t}\r\n\t\tvar i;\r\n\t\tfor (i = 0; i < this.deleteBuffer.length; i++) {\r\n\t\t\te = null;\r\n\t\t\tif (parseFloat(this.sBackendVersion) >= 4) {\r\n\t\t\t\te = {\r\n\t\t\t\t\tsETag: this.deleteBuffer[i].__metadata.etag\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tthis.bBasketUpdate = true;\r\n\t\t\tvar d = {\r\n\t\t\t\tHeaderGuid: this.deleteBuffer[i].HeaderGuid,\r\n\t\t\t\tItemGuid: this.deleteBuffer[i].ItemGuid,\r\n\t\t\t\tProductGuid: this.deleteBuffer[i].ProductGuid,\r\n\t\t\t\tProductId: this.deleteBuffer[i].ProductId,\r\n\t\t\t\tProcessingMode: \"D\"\r\n\t\t\t};\r\n\t\t\tif (this.extHookAddCustomColumnsForProductDelete) {\r\n\t\t\t\tthis.extHookAddCustomColumnsForProductDelete(d, this.deleteBuffer[i]);\r\n\t\t\t}\r\n\t\t\tc.push(m.createBatchOperation(\"OpportunityProducts(HeaderGuid=guid'\" + this.deleteBuffer[i].HeaderGuid + \"',ItemGuid=guid'\" + this.deleteBuffer[\r\n\t\t\t\ti].ItemGuid + \"')\", \"MERGE\", d, e));\r\n\t\t}\r\n\t\tvar b = this.byId(\"productBasketEdit\").getModel(\"json\").getData();\r\n\t\tvar o = this.byId(\"productBasketEdit\").getItems();\r\n\t\tvar i, q = 0,\r\n\t\t\tj;\r\n\t\tif (b.Products)\r\n\t\t\tq = b.Products.length;\r\n\t\tfor (i = 0; i < q; i++) {\r\n\t\t\tif (b.Products[i].Backend === \"X\") {\r\n\t\t\t\tvar O = this.BackendProducts[b.Products[i].ItemGuid];\r\n\t\t\t\tvar N = b.Products[i];\r\n\t\t\t\tvar v = false;\r\n\t\t\t\tvar e = null;\r\n\t\t\t\tif (parseFloat(this.sBackendVersion) >= 4) {\r\n\t\t\t\t\te = {\r\n\t\t\t\t\t\tsETag: b.Products[i].__metadata.etag\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tif (this.extHookCheckDeltaOnProductEntry) {\r\n\t\t\t\t\tv = this.extHookCheckDeltaOnProductEntry(O, N);\r\n\t\t\t\t}\r\n\t\t\t\tvar d = {\r\n\t\t\t\t\tHeaderGuid: b.Products[i].HeaderGuid,\r\n\t\t\t\t\tItemGuid: b.Products[i].ItemGuid,\r\n\t\t\t\t\tProductGuid: b.Products[i].ProductGuid,\r\n\t\t\t\t\tProcessingMode: \"B\"\r\n\t\t\t\t};\r\n\t\t\t\tif (O.Quantity !== N.Quantity) {\r\n\t\t\t\t\tthis.bBasketUpdate = true;\r\n\t\t\t\t\tv = true;\r\n\t\t\t\t\td[\"Quantity\"] = N.Quantity;\r\n\t\t\t\t}\r\n\t\t\t\tif (O.TotalExpectedNetValue !== N.TotalExpectedNetValue) {\r\n\t\t\t\t\tthis.bBasketUpdate = true;\r\n\t\t\t\t\tv = true;\r\n\t\t\t\t\td[\"TotalExpectedNetValue\"] = N.TotalExpectedNetValue;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.extHookAddCustomColumnsForProductModify) {\r\n\t\t\t\t\tthis.extHookAddCustomColumnsForProductModify(d, N);\r\n\t\t\t\t}\r\n\t\t\t\tif (v == true) {\r\n\t\t\t\t\tc.push(m.createBatchOperation(\"OpportunityProducts(HeaderGuid=guid'\" + b.Products[i].HeaderGuid + \"',ItemGuid=guid'\" + b.Products[i]\r\n\t\t\t\t\t\t.ItemGuid + \"')\", \"MERGE\", d, e));\r\n\t\t\t\t}\r\n\t\t\t} else if (b.Products[i].Backend === \"\") {\r\n\t\t\t\tthis.bBasketUpdate = true;\r\n\t\t\t\tvar d = {\r\n\t\t\t\t\tHeaderGuid: b.Products[i].HeaderGuid,\r\n\t\t\t\t\tItemGuid: \"00000000-0000-0000-0000-000000000001\",\r\n\t\t\t\t\tProductGuid: b.Products[i].ProductGuid,\r\n\t\t\t\t\tProductId: b.Products[i].ProductId,\r\n\t\t\t\t\tQuantity: b.Products[i].Quantity === \"\" ? \"0\" : b.Products[i].Quantity,\r\n\t\t\t\t\tTotalExpectedNetValue: b.Products[i].TotalExpectedNetValue === \"\" ? \"0\" : b.Products[i].TotalExpectedNetValue,\r\n\t\t\t\t\tUnit: b.Products[i].Unit,\r\n\t\t\t\t\tProcessingMode: \"A\"\r\n\t\t\t\t};\r\n\t\t\t\tif (this.extHookAddCustomColumnsForProductCreate) {\r\n\t\t\t\t\tthis.extHookAddCustomColumnsForProductCreate(d, b.Products[i]);\r\n\t\t\t\t}\r\n\t\t\t\tc.push(m.createBatchOperation(\"OpportunityProducts\", \"POST\", d, null));\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.bBasketUpdate === true) {\r\n\t\t\tthis.changeSetMapping.BASKET = this.requestNumber;\r\n\t\t\tthis.requestNumber++;\r\n\t\t} else\r\n\t\t\tthis.changeSetMapping.BASKET = \"\";\r\n\t\tif (c.length > 0) {\r\n\t\t\tm.addBatchChangeOperations(c);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tonEditSave: function() {\r\n\r\n\t\tvar m = this.oModel;\r\n\t\tm.setRefreshAfterChange(false);\r\n\t\tif (!this.oApplicationFacade.getApplicationModel(\"Back\")) {\r\n\t\t\tcus.crm.opportunity.util.Util.initBackModel(this);\r\n\t\t}\r\n\t\tif (this.validateDates() === false)\r\n\t\t\treturn;\r\n\t\tif (this.validateEditPage() === false) {\r\n\t\t\tsap.ca.ui.message.showMessageToast(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"MANDAT_FIELD\"));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.validateCurrency() === true) {\r\n\t\t\tsap.m.MessageBox.show(this.currencyMessage, {\r\n\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\ttitle: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"WARNING\"),\r\n\t\t\t\tactions: [\r\n\t\t\t\t\tsap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"CONTINUE\"),\r\n\t\t\t\t\tsap.m.MessageBox.Action.CANCEL\r\n\t\t\t\t],\r\n\t\t\t\tonClose: jQuery.proxy(function(a) {\r\n\t\t\t\t\tif (a == \"Continue\") {\r\n\t\t\t\t\t\tvar r = {};\r\n\t\t\t\t\t\tr.isConfirmed = true;\r\n\t\t\t\t\t\tthis.dataConfirm(r);\r\n\t\t\t\t\t} else if (a == \"CANCEL\") {}\r\n\t\t\t\t}, this)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.dataConfirm({\r\n\t\t\t\tisConfirmed: true\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.getView().getModel(\"controllers\").getData().s2Controller;\r\n\r\n\t\tvar a = this.getView().getModel(\"controllers\").getData().s2Controller.getList().getBinding(\"items\");\r\n\r\n\t\ta.refresh(true);\r\n\t},\r\n\tdataConfirm: function(r) {\r\n\t\tif (r.isConfirmed) {\r\n\t\t\tvar m = this.oModel;\r\n\r\n\t\t\tif (this._checkDataLoss()) {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tthis.pageNeedsUpdate();\r\n\t\t\t\tif (this.requestNumber > 0) {\r\n\t\t\t\t\tthis.setBtnEnabled(\"saveButton\", false);\r\n\t\t\t\t\tsap.ca.ui.utils.busydialog.requireBusyDialog();\r\n\t\t\t\t\tvar x = m.submitBatch(function(R) {\r\n\t\t\t\t\t\tt.handleBatchResponses(R);\r\n\t\t\t\t\t}, function(e) {\r\n\t\t\t\t\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\t\t\t\t\tt.setBtnEnabled(\"saveButton\", true);\r\n\t\t\t\t\t\tsap.ca.ui.message.showMessageBox({\r\n\t\t\t\t\t\t\ttype: sap.ca.ui.message.Type.ERROR,\r\n\t\t\t\t\t\t\tmessage: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_FAILED\")\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.datalossDismissed({\r\n\t\t\t\t\tisConfirmed: true\r\n\t\t\t\t});\r\n\t\t\t\tthis.oModel.clearBatch();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tonSourcingChanged: function(b, d) {\r\n\t\tvar that = this;\r\n\r\n\t\tthis._custJsonModel = this.getView().getModel(\"custJson\");\r\n\r\n\t\tthis.oModel.read(\"/ZBU_DESCRIPSet\", null, [\"$filter=Branch eq '\" + b + \"' and Zchannel eq '\" + d + \"'\"], true,\r\n\t\t\tjQuery.proxy(function(\r\n\t\t\t\taData, b) {\r\n\t\t\t\tthat._custData.ZBU_DESCRIPSet = aData;\r\n\t\t\t\tthat._custJsonModel.setData(that._custData);\r\n\r\n\t\t\t\tthat._custJsonModel.updateBindings();\r\n\r\n\t\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\t\tthat.handleErrors(e);\r\n\r\n\t\t\t}, this));\r\n\r\n\t},\r\n\thandleBatchResponses: function(r) {\r\n\t\tvar s = [];\r\n\t\tvar a;\r\n\t\tvar h = false;\r\n\t\tvar S = false;\r\n\t\tvar p = false;\r\n\t\tvar f = false;\r\n\t\tvar b = false;\r\n\t\tvar e = \"\";\r\n\t\tthis.bEmployeeUpdateSuccess = false;\r\n\t\tvar l = r.__batchResponses.length;\r\n\t\tsap.ca.ui.utils.busydialog.releaseBusyDialog();\r\n\t\tif (r.__batchResponses[0].hasOwnProperty(\"__changeResponses\")) {\r\n\t\t\tif (this.extHookHandleResponsesForCustomUpdates) {\r\n\t\t\t\tthis.extHookHandleResponsesForCustomUpdates(r);\r\n\t\t\t}\r\n\t\t\tif (this.changeSetMapping.HEADER !== \"\") {\r\n\t\t\t\ta = r.__batchResponses[0].__changeResponses[this.changeSetMapping.HEADER];\r\n\t\t\t\tif (parseInt(a.statusCode) >= 400) {\r\n\t\t\t\t\ts.push(a.statusText);\r\n\t\t\t\t\tf = true;\r\n\t\t\t\t\te += JSON.parse(a.response.body).error.message.value + \"\\n\";\r\n\t\t\t\t\tif (parseInt(a.statusCode) === 412) {\r\n\t\t\t\t\t\tb = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.HeaderObject.Description = this.byId(\"description\").getValue();\r\n\t\t\t\t\tthis.HeaderObject.StartDate = this.byId(\"datePickerStartDate\").getDateValue();\r\n\t\t\t\t\tthis.HeaderObject.ClosingDate = this.byId(\"datePickerEndDate\").getDateValue();\r\n\t\t\t\t\tthis.HeaderObject.SalesStageDescription = this.byId(\"stages\").getSelectedItem().getText();\r\n\t\t\t\t\tthis.HeaderObject.SalesStageCode = this.byId(\"stages\").getSelectedKey();\r\n\t\t\t\t\tif (this.byId(\"priority\").getSelectedItem()) {\r\n\t\t\t\t\t\tthis.HeaderObject.PriorityText = this.byId(\"priority\").getSelectedItem().getText();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.HeaderObject.PriorityText = \"\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.HeaderObject.PriorityCode = this.byId(\"priority\").getSelectedKey();\r\n\t\t\t\t\tthis.HeaderObject.ExpectedSalesVolume = this.byId(\"expectedSalesVolume\").getValue();\r\n\t\t\t\t\tthis.HeaderObject.ChanceOfSuccess = this.byId(\"chanceOfSuccess\").getValue();\r\n\t\t\t\t\tthis.HeaderObject.CurrencyCode = this.byId(\"currency\").getValue();\r\n\t\t\t\t\tthis.HeaderObject.ForecastRelevance = this.byId(\"switch\").getState();\r\n\t\t\t\t\th = true;\r\n\t\t\t\t\tp = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.changeSetMapping.STATUS !== \"\") {\r\n\t\t\t\ta = r.__batchResponses[0].__changeResponses[this.changeSetMapping.STATUS];\r\n\t\t\t\tif (parseInt(a.statusCode) < 400) {\r\n\t\t\t\t\tthis.HeaderObject.UserStatusCode = this.byId(\"userStatus\").getSelectedKey();\r\n\t\t\t\t\tthis.HeaderObject.UserStatusText = this.byId(\"userStatus\").getSelectedItem().getText();\r\n\t\t\t\t\tS = true;\r\n\t\t\t\t\tp = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ts.push(a.statusText);\r\n\t\t\t\t\tf = true;\r\n\t\t\t\t\te += JSON.parse(a.response.body).error.message.value + \"\\n\";\r\n\t\t\t\t\tif (parseInt(a.statusCode) === 412) {\r\n\t\t\t\t\t\tb = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.changeSetMapping.CONTACT !== \"\") {\r\n\t\t\t\ta = r.__batchResponses[0].__changeResponses[this.changeSetMapping.CONTACT];\r\n\t\t\t\tif (parseInt(a.statusCode) >= 400) {\r\n\t\t\t\t\ts.push(a.statusText);\r\n\t\t\t\t\tf = true;\r\n\t\t\t\t\te += JSON.parse(a.response.body).error.message.value + \"\\n\";\r\n\t\t\t\t\tif (parseInt(a.statusCode) === 412) {\r\n\t\t\t\t\t\tb = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tp = true;\r\n\t\t\t\t\tthis.HeaderObject.MainContactId = this.oSelectedContact.contactID;\r\n\t\t\t\t\tthis.HeaderObject.MainContactName = this.oSelectedContact.fullName;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (parseFloat(this.oVersioningModel.getData().BackendSchemaVersion) >= 2) {\r\n\t\t\t\tif (this.changeSetMapping.EMPLOYEE !== \"\") {\r\n\t\t\t\t\ta = r.__batchResponses[0].__changeResponses[this.changeSetMapping.EMPLOYEE];\r\n\t\t\t\t\tif (parseInt(a.statusCode) >= 400) {\r\n\t\t\t\t\t\ts.push(a.statusText);\r\n\t\t\t\t\t\tf = true;\r\n\t\t\t\t\t\te += JSON.parse(a.response.body).error.message.value + \"\\n\";\r\n\t\t\t\t\t\tthis.oSelectedEmployee.employeeID = this.HeaderObject.EmployeeResponsibleNumber;\r\n\t\t\t\t\t\tthis.oSelectedEmployee.fullName = this.HeaderObject.EmployeeResponsibleName;\r\n\t\t\t\t\t\tif (parseInt(a.statusCode) === 412) {\r\n\t\t\t\t\t\t\tb = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tp = true;\r\n\t\t\t\t\t\tthis.HeaderObject.EmployeeResponsibleNumber = this.oSelectedEmployee.employeeID;\r\n\t\t\t\t\t\tthis.HeaderObject.EmployeeResponsibleName = this.oSelectedEmployee.fullName;\r\n\t\t\t\t\t\tthis.byId(\"inputMainContact\").setValue(this.HeaderObject.EmployeeResponsibleName);\r\n\t\t\t\t\t\tthis.bEmployeeUpdateSuccess = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.changeSetMapping.BASKET !== \"\") {\r\n\t\t\t\tvar i;\r\n\t\t\t\tvar l = r.__batchResponses[0].__changeResponses.length;\r\n\t\t\t\tfor (i = this.changeSetMapping.BASKET; i < l; i++) {\r\n\t\t\t\t\ta = r.__batchResponses[0].__changeResponses[i];\r\n\t\t\t\t\tif (parseInt(a.statusCode) >= 400) {\r\n\t\t\t\t\t\ts.push(a.statusText);\r\n\t\t\t\t\t\tf = true;\r\n\t\t\t\t\t\te += JSON.parse(a.response.body).error.message.value + \"\\n\";\r\n\t\t\t\t\t\tif (parseInt(a.statusCode) === 412) {\r\n\t\t\t\t\t\t\tb = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tp = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (b === true) {\r\n\t\t\t\tsap.ca.ui.message.showMessageBox({\r\n\t\t\t\t\ttype: sap.ca.ui.message.Type.ERROR,\r\n\t\t\t\t\tmessage: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"MSG_CONFLICTING_DATA\")\r\n\t\t\t\t}, jQuery.proxy(function() {\r\n\t\t\t\t\tthis._refreshOpportunity();\r\n\t\t\t\t}, this));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (p && f) {\r\n\t\t\t\tsap.ca.ui.message.showMessageBox({\r\n\t\t\t\t\ttype: sap.ca.ui.message.Type.ERROR,\r\n\t\t\t\t\tmessage: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"PARTIAL_SAVE\"),\r\n\t\t\t\t\tdetails: e\r\n\t\t\t\t}, function() {});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!p && f) {\r\n\t\t\t\tsap.ca.ui.message.showMessageBox({\r\n\t\t\t\t\ttype: sap.ca.ui.message.Type.ERROR,\r\n\t\t\t\t\tmessage: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_FAILED\"),\r\n\t\t\t\t\tdetails: e\r\n\t\t\t\t}, function() {});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._is412Error(r)) {\r\n\t\t\t\tsap.ca.ui.message.showMessageBox({\r\n\t\t\t\t\ttype: sap.ca.ui.message.Type.ERROR,\r\n\t\t\t\t\tmessage: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"MSG_CONFLICTING_DATA\")\r\n\t\t\t\t}, jQuery.proxy(function() {\r\n\t\t\t\t\tthis._refreshOpportunity();\r\n\t\t\t\t}, this));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tp = true;\r\n\t\t\tf = true;\r\n\t\t\tvar d;\r\n\t\t\tvar c = JSON.parse(r.__batchResponses[0].response.body).error;\r\n\t\t\tif (c.innererror && c.innererror.errordetails) {\r\n\t\t\t\tvar g = c.innererror.errordetails;\r\n\t\t\t\tfor (var i = 0; i < g.length; i++) {\r\n\t\t\t\t\tif (g[i].message.length > 0) {\r\n\t\t\t\t\t\tif (d == null)\r\n\t\t\t\t\t\t\td = g[i].message;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\td += \"\\n\" + g[i].message;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (d == null) {\r\n\t\t\t\td = c.message.value;\r\n\t\t\t}\r\n\t\t\tsap.ca.ui.message.showMessageBox({\r\n\t\t\t\ttype: sap.ca.ui.message.Type.ERROR,\r\n\t\t\t\tmessage: this.oI18nModel.getResourceBundle().getText(\"SAVE_FAILED\"),\r\n\t\t\t\tdetails: d\r\n\t\t\t}, function() {});\r\n\t\t\tthis.setBtnEnabled(\"saveButton\", true);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (h || S)\r\n\t\t\tthis.refreshHeaderList();\r\n\t\tif (f) {\r\n\t\t\tthis.bSuccessSave = false; {\r\n\t\t\t\tsap.ca.ui.message.showMessageBox({\r\n\t\t\t\t\ttype: sap.ca.ui.message.Type.ERROR,\r\n\t\t\t\t\tmessage: sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"SAVE_FAILED\"),\r\n\t\t\t\t\tdetails: e\r\n\t\t\t\t}, function() {});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.bSuccessSave = true;\r\n\t\t\tvar j = \"Opportunities(guid'\" + this.headerGuid + \"')\";\r\n\t\t\tsap.ui.getCore().getEventBus().publish(\"cus.crm.opportunity\", \"opportunityChanged\", {\r\n\t\t\t\tcontextPath: j\r\n\t\t\t});\r\n\t\t\tsap.m.MessageToast.show(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\"OPP_SAVED\"), {\r\n\t\t\t\tcloseOnBrowserNavigation: false\r\n\t\t\t});\r\n\t\t\tthis.bNavOnUpdate = true;\r\n\t\t\tthis._navToDetailPage(j);\r\n\t\t}\r\n\t\tcus.crm.opportunity.util.Util.refreshHeaderETag(this.sPath, this);\r\n\t},\r\n\r\n\tvalidateEditPage: function() {\r\n\t\tvar c = false;\r\n\t\tif (this.byId(\"cusFirstName\").getValue() === \"\" && this.byId(\"cusFirstName\").getVisible() === true && this.byId(\"cusFirstName\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"cusFirstName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusLastName\").getValue() === \"\" && this.byId(\"cusLastName\").getVisible() === true && this.byId(\"cusLastName\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"cusLastName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusExistingCustomer\").getValue() === \"\" && this.byId(\"cusExistingCustomer\").getVisible() === true && this.byId(\r\n\t\t\t\t\"cusExistingCustomer\").getEditable() === true) {\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"FirstName\").getValue() === \"\" && this.byId(\"FirstName\").getVisible() === true && this.byId(\"FirstName\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"FirstName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"LastName\").getValue() === \"\" && this.byId(\"LastName\").getVisible() === true && this.byId(\"LastName\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"LastName\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusAdd1\").getValue() === \"\" && this.byId(\"cusAdd1\").getVisible() === true && this.byId(\"cusAdd1\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"cusAdd1\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusAdd2\").getValue() === \"\" && this.byId(\"cusAdd2\").getVisible() === true && this.byId(\"cusAdd2\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"cusAdd2\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusAdd3\").getValue() === \"\" && this.byId(\"cusAdd3\").getVisible() === true && this.byId(\"cusAdd3\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"cusAdd3\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusPinCode\").getValue() === \"\" && this.byId(\"cusPinCode\").getVisible() === true && this.byId(\"cusPinCode\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"cusPinCode\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusMobile\").getValue() === \"\" && this.byId(\"cusMobile\").getVisible() === true && this.byId(\"cusMobile\").getEditable() ===\r\n\t\t\ttrue) {\r\n\t\t\tthis.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"tmlCustomer\").getValue() === \"\" && this.byId(\"tmlCustomer\").getVisible() === true) {\r\n\t\t\tthis.byId(\"tmlCustomer\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"leadType\").getValue() === \"\") {\r\n\t\t\tthis.byId(\"leadType\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"applicantType\").getValue() === \"\" && this.byId(\"applicantType\").getVisible() === true && this.byId(\r\n\t\t\t\t\"applicantType\").getEditable() === true) {\r\n\t\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDatePickerNextFollowup\").getValue() === \"\" && this.byId(\"cusDatePickerNextFollowup\").getVisible() === true && this.byId(\r\n\t\t\t\t\"cusDatePickerNextFollowup\").getEditable() === true) {\r\n\t\t\tthis.byId(\"cusDatePickerNextFollowup\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDatePickerTentative\").getValue() === \"\" && this.byId(\"cusDatePickerTentative\").getVisible() === true && this.byId(\r\n\t\t\t\t\"cusDatePickerTentative\").getEditable() === true) {\r\n\t\t\tthis.byId(\"cusDatePickerTentative\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDatePickerVisit\").getValue() === \"\" && this.byId(\"cusDatePickerVisit\").getVisible() === true && this.byId(\r\n\t\t\t\t\"cusDatePickerVisit\").getEditable() === true) {\r\n\t\t\tthis.byId(\"cusDatePickerVisit\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDealerCVPV\").getValue() === \"\") {\r\n\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.byId(\"cusDistchan\").getValue() === \"\") {\r\n\r\n\t\t\tthis.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (this.accountName !== this.byId(\"cusExistingCustomer\").getValue()) {\r\n\t\t\tthis.accountName = this.accountId;\r\n\t\t}\r\n\r\n\t\tif (this.validateProductRow()) {\r\n\t\t\tc = true;\r\n\t\t}\r\n\t\tif (c === true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tonMandatoryFieldChanged: function(e) {\r\n\t\te.getSource().setValueState(sap.ui.core.ValueState.None);\r\n\t},\r\n\r\n\tonPostalChange: function(oEvent) {\r\n\t\tvar _oItem = this.byId(\"cusPinCode\");\r\n\t\tvar _sPostalCode = _oItem.getValue();\r\n\r\n\t\tthis._sSelectedAddItemPath = _oItem.getBindingContext().getPath();\r\n\t\t//_sPostalCode = this.oModel.getProperty(this._sSelectedAddItemPath + \"/PostlCod1\");\r\n\t\tif (_sPostalCode !== \"\") {\r\n\t\t\toEvent.getSource().setValueState(\"None\");\r\n\t\t} else {\r\n\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t}\r\n\r\n\t\tif (_sPostalCode !== \"\") {\r\n\r\n\t\t\tvar sFilter1 = new sap.ui.model.Filter(\"PostCode1\", \"EQ\", _sPostalCode);\r\n\t\t\tthis.oModel.read(\"/PCBaseDataSet\", {\r\n\t\t\t\tfilters: [sFilter1],\r\n\t\t\t\tsuccess: jQuery.proxy(this._onPostalReadSuccess, this),\r\n\t\t\t\terror: jQuery.proxy(this._onPostalReadError, this)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/City\", \"\");\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/District\", \"\");\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/Region\", \"\");\r\n\t\t}\r\n\r\n\t},\r\n\t_onPostalReadSuccess: function(oData, oResponse) {\r\n\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/Country\", \"IN\"); //oData.results[0].Country);\r\n\t\tif (oData.results && oData.results.length > 0) {\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/City\", oData.results[0].City1);\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/District\", oData.results[0].City2);\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/Region\", oData.results[0].Region);\r\n\r\n\t\t} else {\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/City\", \"\");\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/District\", \"\");\r\n\t\t\tthis.oModel.setProperty(this._sSelectedAddItemPath + \"/Region\", \"\");\r\n\t\t}\r\n\t},\r\n\r\n\t_onPostalReadError: function(oResponse) {},\r\n\tonComboChanged: function(e) {\r\n\t\te.getSource().setValueState(sap.ui.core.ValueState.None);\r\n\t},\r\n\r\n\tonBranchChanged: function() {\r\n\t\tthis.byId(\"cusDealerSelect\").setSelectedItem(null);\r\n\t\tthis.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.branch = this.byId(\"cusDealerCVPV\").getSelectedKey();\r\n\t\tthis.distchannel = this.byId(\"cusDistchan\").getSelectedKey();\r\n\r\n\t\tif (this.distchannel !== \"\") {\r\n\t\t\tthis.onSourcingChanged(this.branch, this.distchannel);\r\n\t\t}\r\n\t},\r\n\r\n\tonDistchnChanged: function() {\r\n\t\tthis.byId(\"cusDealerSelect\").setSelectedItem(null);\r\n\t\tthis.branch = this.byId(\"cusDealerCVPV\").getSelectedKey();\r\n\t\tthis.distchannel = this.byId(\"cusDistchan\").getSelectedKey();\r\n\t\tthis.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tif (this.branch !== \"\") {\r\n\t\t\tthis.onSourcingChanged(this.branch, this.distchannel);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tvalidateCurrency: function() {\r\n\t\treturn false;\r\n\t},\r\n\tvalidateDates: function() {\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetDateTimeStampFromDatePicker: function(d) {\r\n\t\tvar l = $(\"#\" + d.getIdForLabel()).val();\r\n\t\tif (l === \"\" || l === undefined) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar c = this.oDateFormatter.parse(l);\r\n\t\tvar dateVal = \"\";\r\n\t\tvar y, m, a;\r\n\t\tif (c !== null) {\r\n\t\t\ty = c.getFullYear();\r\n\t\t\tm = c.getMonth();\r\n\t\t\ta = c.getDate();\r\n\t\t\tdateVal = new Date(Date.UTC(y, m, a));\r\n\t\t} else if (c !== \"\") {\r\n\t\t\ty = l.split('.')[2];\r\n\t\t\tm = l.split('.')[1];\r\n\t\t\ta = l.split('.')[0];\r\n\t\t\tdateVal = new Date(Date.UTC(y, m, a));\r\n\t\t} else {\r\n\t\t\tdateVal = null;\r\n\t\t}\r\n\t\treturn dateVal;\r\n\t},\r\n\r\n\t_checkDataLoss: function() {\r\n\t\tvar h = this.headerGuid;\r\n\t\tvar t = {\r\n\t\t\tGuid: h,\r\n\t\t\tDescription: this.byId(\"description\").getValue(),\r\n\t\t\tExpectedSalesVolume: this.FormatvolumeValue.toString(),\r\n\t\t\tCurrencyCode: this.byId(\"currency\").getValue(),\r\n\t\t\tChanceOfSuccess: this.byId(\"chanceOfSuccess\").getValue(),\r\n\t\t\tStartDate: this.getDateTimeStampFromDatePicker(this.byId(\"datePickerStartDate\")),\r\n\t\t\tClosingDate: this.getDateTimeStampFromDatePicker(this.byId(\"datePickerEndDate\")),\r\n\t\t\tSalesStageCode: this.byId(\"stages\").getSelectedKey(),\r\n\t\t\tUserStatusCode: this.byId(\"userStatus\").getSelectedKey(),\r\n\t\t\tPriorityCode: this.byId(\"priority\").getSelectedKey(),\r\n\t\t\tForecastRelevance: this.byId(\"switch\").getState()\r\n\t\t};\r\n\t\tvar k;\r\n\t\tvar e = {};\r\n\t\tfor (k in t) {\r\n\t\t\tswitch (k) {\r\n\t\t\t\tcase \"StartDate\":\r\n\t\t\t\tcase \"ClosingDate\":\r\n\t\t\t\t\tif (!this._areDatesSame(this.HeaderObject[k], t[k])) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ChanceOfSuccess\":\r\n\t\t\t\t\tif (Number(this.HeaderObject[k]) !== Number(t[k])) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ExpectedSalesVolume\":\r\n\t\t\t\t\tif (this.HeaderObject[k] !== t[k]) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (this.HeaderObject[k] !== t[k]) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.extHookAddCustomHeaderFields) {\r\n\t\t\tvar v = this.extHookAddCustomHeaderFields(e);\r\n\t\t\tif (v) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.userStatusCode !== this.byId(\"userStatus\").getSelectedKey()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (this.HeaderObject.MainContactId !== this.oSelectedContact.contactID || this.HeaderObject.MainContactName !== this.byId(\r\n\t\t\t\t\"inputMainContact\").getValue()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (parseFloat(this.sBackendVersion) >= 2) {\r\n\t\t\tif (this.HeaderObject.EmployeeResponsibleNumber !== this.oSelectedEmployee.employeeID || this.HeaderObject.EmployeeResponsibleName !==\r\n\t\t\t\tthis.byId(\"inputEmpResponsible\").getValue()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.deleteBuffer.length > 0) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar b = this.byId(\"productBasketEdit\").getModel(\"json\").getData();\r\n\t\tvar l = 0;\r\n\t\tif (b.Products) {\r\n\t\t\tl = b.Products.length;\r\n\t\t}\r\n\t\tfor (var i = 0; i < l; i++) {\r\n\t\t\tif (b.Products[i].Backend === \"X\") {\r\n\t\t\t\tvar o = this.BackendProducts[b.Products[i].ItemGuid];\r\n\t\t\t\tvar n = b.Products[i];\r\n\t\t\t\tvar v = false;\r\n\t\t\t\tif (o.Quantity !== n.Quantity) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (o.TotalExpectedNetValue !== n.TotalExpectedNetValue) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.extHookCheckDeltaOnProductEntry) {\r\n\t\t\t\t\tv = this.extHookCheckDeltaOnProductEntry(o, n);\r\n\t\t\t\t\tif (v) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\textHookBindAdditionalFields: function(a) {\r\n\t\tthis._custData = [];\r\n\t\tthis._custJsonModel = new sap.ui.model.json.JSONModel(this._custData);\r\n\t\tthis._custJsonModel.setSizeLimit(200);\r\n\t\tthis.getView().setModel(this._custJsonModel, \"custJson\");\r\n\t\tvar t = this;\r\n\t\tthis.oModel.read(this.sPath, null, [\"$expand=Statuses,ZProduct,ZFLEET_APP_MASTS,Zcustseg\"], true, jQuery.proxy(function(\r\n\t\t\taData, b) {\r\n\t\t\tt._custData = aData;\r\n\t\t\tif (t._custData.BPTYPE == \"3\") {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(false);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(false);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(true);\r\n\r\n\t\t\t}\r\n\t\t\tt._custJsonModel.setData(aData);\r\n\t\t\tt.bindFleetSize();\r\n\t\t\t//\tt.onPostalChange();\r\n\t\t\tvar a = t._custJsonModel.getData();\r\n\r\n\t\t\tt._branch = a.Branch;\r\n\t\t\tt._distchn = a.DistributionChannel;\r\n\t\t\tif (t._distchn !== \"\" && t._branch !== \"\") {\r\n\t\t\t\tt.onSourcingChanged(t._branch, t._distchn);\r\n\r\n\t\t\t}\r\n\t\t\tthis._setProductCategoryData(t._custJsonModel, false, []);\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tthis.handleErrors(e);\r\n\t\t}, this));\r\n\r\n\t\tthis.getView().byId(\"cusPhone\").attachBrowserEvent(\"keypress\", function(e) {\r\n\t\t\tvar key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];\r\n\t\t\tif (!($.inArray(e.which, key_codes) >= 0)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.getView().byId(\"cusMobile\").attachBrowserEvent(\"keypress\", function(e) {\r\n\t\t\tvar key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];\r\n\t\t\tif (!($.inArray(e.which, key_codes) >= 0)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.getView().byId(\"cusPinCode\").attachBrowserEvent(\"keypress\", function(e) {\r\n\t\t\tvar key_codes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 0, 8];\r\n\t\t\tif (!($.inArray(e.which, key_codes) >= 0)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar fromDate = new Date();\r\n\t\tfromDate.setDate(fromDate.getDate() - 1);\r\n\t\tthis.getView().byId(\"cusDatePickerNextFollowup\").setMinDate(fromDate);\r\n\t\tthis.getView().byId(\"cusDatePickerTentative\").setMinDate(fromDate);\r\n\t\tthis.getView().byId(\"cusDatePickerVisit\").setMaxDate(new Date());\r\n\r\n\t},\r\n\textHookCheckDeltaAndFrameRequests: function(c) {\r\n\t\t//Create/update batch\r\n\t\tvar e = {\r\n\t\t\tsETag: null\r\n\t\t};\r\n\t\tvar jModel = this.getView().getModel(\"custJson\");\r\n\t\tvar _tableData = jModel.oData.ZProduct.results;\r\n\t\tvar tab = this.byId(\"idProdTable\");\r\n\t\tvar Items = tab.getItems();\r\n\r\n\t\tif (Items.length > 0) {\r\n\t\t\tfor (var i = 0; i < Items.length; i++) {\r\n\t\t\t\tvar d = {\r\n\t\t\t\t\t// ObjectId: _tableData[i].ObjectId,\r\n\t\t\t\t\tGuid: _tableData[i].Guid,\r\n\t\t\t\t\tRecordId: _tableData[i].RecordId,\r\n\t\t\t\t\tCategoryId: Items[i].getCells()[0].getSelectedKey(),\r\n\t\t\t\t\tProductId: Items[i].getCells()[1].getSelectedKey(),\r\n\t\t\t\t\tQuantity: Items[i].getCells()[2].getValue()\r\n\t\t\t\t};\r\n\t\t\t\tc.push(this.oModel.createBatchOperation(\"ZProductSet(RecordId=guid'\" + _tableData[i].RecordId + \"')\", \"MERGE\", d, e));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\textHookAddCustomHeaderFields: function(e) {\r\n\r\n\t\te.CUSTOMERID = this.byId(\"cusExistingCustomer\").getValue();\r\n\t\te.Description = this.byId(\"cusFirstName\").getValue() + \" \" + this.byId(\"cusLastName\").getValue();\r\n\t\te.BPTYPE = this.byId(\"applicantType\").getSelectedKey();\r\n\t\te.Ztml = this.byId(\"tmlCustomer\").getSelectedKey();\r\n\t\te.Sorg = this.byId(\"loanType\").getSelectedKey();\r\n\t\te.NAMEFIRST = this.byId(\"cusFirstName\").getValue();\r\n\t\te.NAMELAST = this.byId(\"cusLastName\").getValue();\r\n\t\te.ADDRESS1 = this.byId(\"cusAdd1\").getValue();\r\n\t\te.ADDRESS2 = this.byId(\"cusAdd2\").getValue();\r\n\t\te.ADDRESS3 = this.byId(\"cusAdd3\").getValue();\r\n\t\te.POST_CODE1 = this.byId(\"cusPinCode\").getValue();\r\n\t\te.PHONE = this.byId(\"cusPhone\").getValue();\r\n\t\te.DISTRICT = this.byId(\"cusDistrict\").getValue();\r\n\t\te.CITY1 = this.byId(\"cusCity\").getValue();\r\n\t\te.REGION = this.byId(\"cusState\").getValue();\r\n\t\te.TelExtens = this.byId(\"cusStd\").getValue();\r\n\t\te.MOBILE = this.byId(\"cusMobile\").getValue();\r\n\t\te.CUSTSEGMENT = this.byId(\"cusSeg\").getSelectedKey();\r\n\t\te.FLEETSIZE = this.byId(\"cusFleetSize\").getSelectedKey();\r\n\t\te.FLEETAPPL = this.byId(\"cusFleetApp\").getSelectedKey();\r\n\t\te.DEALERNAME = this.byId(\"cusDealerSelect\").getSelectedKey();\r\n\t\te.DEALERLOC = this.byId(\"cusDealerLocation\").getValue();\r\n\t\te.Branch = this.byId(\"cusDealerCVPV\").getSelectedKey();\r\n\t\te.Zchannel = this.byId(\"cusDistchan\").getSelectedKey();\r\n\t\te.NEXTFOLLOWUP = this.getDateTimeStampFromDatePicker(this.byId(\"cusDatePickerNextFollowup\"));\r\n\t\te.TENTIVEDATE = this.getDateTimeStampFromDatePicker(this.byId(\"cusDatePickerTentative\"));\r\n\t\te.VISITDATE = this.getDateTimeStampFromDatePicker(this.byId(\"cusDatePickerVisit\"));\r\n\t\te.LeadComment = this.byId(\"cusRemark\").getValue();\r\n\t\te.Zleadtype = this.byId(\"leadType\").getValue();\r\n\t\treturn true;\r\n\t},\r\n\textHookValidateAdditionalFields: function() {\r\n\r\n\t},\r\n\tvalidateProductRow: function() {\r\n\t\tvar hasValid = false;\r\n\t\tvar items = this.byId(\"idProdTable\").getItems();\r\n\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\tvar prod = items[i].mAggregations.cells[0].getSelectedKey();\r\n\t\t\tvar varient = items[i].mAggregations.cells[1].getSelectedKey();\r\n\t\t\tvar qty = items[i].mAggregations.cells[2].getValue();\r\n\t\t\t/*\tif (prod !== \"\") {\r\n\t\t\t\t\titems[i].mAggregations.cells[0].setValueState(\"None\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\thasValid = false;\r\n\t\t\t\t\titems[i].mAggregations.cells[0].setValueState(\"Error\");\r\n\t\t\t\t}*/\r\n\t\t\tif (varient !== \"\") {\r\n\t\t\t\titems[i].mAggregations.cells[1].setValueState(\"None\");\r\n\t\t\t} else {\r\n\t\t\t\thasValid = true;\r\n\t\t\t\titems[i].mAggregations.cells[1].setValueState(\"Error\");\r\n\t\t\t}\r\n\t\t\tif (qty !== \"\") {\r\n\t\t\t\titems[i].mAggregations.cells[2].setValueState(\"None\");\r\n\t\t\t} else {\r\n\t\t\t\thasValid = true;\r\n\t\t\t\titems[i].mAggregations.cells[2].setValueState(\"Error\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn hasValid;\r\n\t},\r\n\tbindFleetSize: function() {\r\n\t\tvar _aData = [];\r\n\t\t_aData.results = [];\r\n\t\tfor (var i = 0; i < 101; i++) {\r\n\t\t\tvar record = {};\r\n\t\t\tif (i == 100) {\r\n\t\t\t\trecord = {\r\n\t\t\t\t\tfSize: \"Above 100\"\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\trecord = {\r\n\t\t\t\t\tfSize: i\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t_aData.results.push(record);\r\n\t\t}\r\n\t\tvar jModel = this.getView().getModel(\"custJson\");\r\n\t\tjModel.oData.fleetSize = _aData;\r\n\t\tjModel.updateBindings();\r\n\t},\r\n\t/********************Account search help code********************/\r\n\t_onExistingCustSwich: function(oEvent) {\r\n\t\t// this.byId(\"ProductButton11\").setEnabled(false);\r\n\t\tif (oEvent.getParameter(\"state\")) {\r\n\r\n\t\t\tthis.byId(\"cusLblCustomer\").setVisible(true);\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setVisible(true);\r\n\t\t\tthis.byId(\"Name1\").setVisible(false);\r\n\t\t\tthis.byId(\"Name2\").setVisible(false);\r\n\t\t\tthis.byId(\"cusFirstName\").setEditable(false);\r\n\t\t\tthis.byId(\"cusMiddleName\").setEditable(false);\r\n\t\t\tthis.byId(\"cusLastName\").setEditable(false);\r\n\r\n\t\t\tthis.byId(\"applicantType\").setEditable(false);\r\n\t\t\tthis.byId(\"cusMobile\").setEditable(false);\r\n\t\t\tthis.byId(\"cusPhone\").setEditable(false);\r\n\t\t\tthis.byId(\"cusStd\").setEditable(false);\r\n\t\t\tthis.byId(\"cusPinCode\").setEditable(false);\r\n\t\t\tthis.byId(\"cusAdd3\").setEditable(false);\r\n\t\t\tthis.byId(\"cusAdd2\").setEditable(false);\r\n\t\t\tthis.byId(\"cusAdd1\").setEditable(false);\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setEditable(false);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"LastName\").setVisible(false);\r\n\t\t\tthis.byId(\"tmlCustomer\").setVisible(false);\r\n\r\n\t\t\tif (this.byId(\"applicantType\").getSelectedKey() == \"3\") {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(false);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(false);\r\n\t\t\t\tthis.byId(\"Name1\").setVisible(true);\r\n\t\t\t\tthis.byId(\"Name2\").setVisible(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(true);\r\n\r\n\t\t\t}\r\n\t\t\t///////////////////////////////////////////////////\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMiddleName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\t\t\tthis.byId(\"applicantType\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusSeg\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFleetApp\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDistchan\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDistchan\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDealerSelect\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\t\tthis.byId(\"leadType\").setValue(\"\");\r\n\r\n\t\t\t/////////// set value state error ///////////\r\n\r\n\t\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"FirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t\tthis.byId(\"LastName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusFirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusMiddleName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusLastName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusAdd1\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusAdd2\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusAdd3\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusPinCode\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.accountId = \"\";\r\n\t\t\tthis.byId(\"cusLblCustomer\").setVisible(false);\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setVisible(false);\r\n\t\t\tthis.byId(\"tmlCustomer\").setVisible(true);\r\n\r\n\t\t\tthis.byId(\"cusFirstName\").setEditable(true);\r\n\t\t\tthis.byId(\"cusMiddleName\").setEditable(true);\r\n\t\t\tthis.byId(\"cusLastName\").setEditable(true);\r\n\t\t\tthis.byId(\"applicantType\").setEditable(true);\r\n\t\t\tthis.byId(\"cusMobile\").setEditable(true);\r\n\t\t\tthis.byId(\"cusPhone\").setEditable(true);\r\n\t\t\tthis.byId(\"cusStd\").setEditable(true);\r\n\t\t\tthis.byId(\"cusPinCode\").setEditable(true);\r\n\t\t\tthis.byId(\"cusAdd3\").setEditable(true);\r\n\t\t\tthis.byId(\"cusAdd2\").setEditable(true);\r\n\t\t\tthis.byId(\"cusAdd1\").setEditable(true);\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setEditable(true);\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMiddleName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusSeg\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFleetApp\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusFleetSize\").setValue(\"\");\r\n\r\n\t\t\tthis.byId(\"cusDealerSelect\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDealerLocation\").setValue(\"\");\r\n\t\t\tthis.byId(\"applicantType\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDatePickerNextFollowup\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDatePickerTentative\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDatePickerVisit\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusRemark\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDistchan\").setSelectedKey(\"\");\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusDistchan\").setValue(\"\");\r\n\t\t\tthis.byId(\"leadType\").setValue(\"\");\r\n\r\n\t\t\tthis.byId(\"Name1\").setVisible(false);\r\n\t\t\tthis.byId(\"Name2\").setVisible(false);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(false);\r\n\r\n\t\t\tthis.byId(\"LastName\").setVisible(false);\r\n\t\t\tthis.byId(\"customerName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMiddleName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\t//this.getView().getModel().refresh(true);\r\n\t\t\t/////////// set value state error ///////////\r\n\r\n\t\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"FirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"LastName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusFirstName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusMiddleName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusLastName\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusMobile\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusAdd1\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusAdd2\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusAdd3\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusPinCode\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusDealerCVPV\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis.byId(\"cusDistchan\").setValueState(sap.ui.core.ValueState.None);\r\n\r\n\t\t}\r\n\t},\r\n\tonAccountSuggestItemSelected: function(e) {\r\n\t\tvar i = e.getParameter(\"selectedItem\");\r\n\t\tvar a = null;\r\n\t\ta = i.data(\"oAccount\");\r\n\t\tthis.accountName = a.fullName === \"\" ? a.accountID : a.fullName;\r\n\t\tthis.accountId = a.accountID;\r\n\t\tthis.byId(\"cusExistingCustomer\").setValue(this.accountId);\r\n\t\tthis._setAccountDetails(this.accountId);\r\n\t},\r\n\tonAccountInputFieldChanged: function(e) {\r\n\t\tthis.byId(\"cusExistingCustomer\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tvar a = e.getSource();\r\n\t\tthis._setAccount(a.getValue());\r\n\t\ta.setShowSuggestion(true);\r\n\t\ta.setFilterSuggests(false);\r\n\t\tvar c = function(A) {\r\n\t\t\ta.removeAllSuggestionItems();\r\n\t\t\tif (a.getValue().length > 0) {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\tfor (i in A) {\r\n\t\t\t\t\tvar o = A[i];\r\n\t\t\t\t\tif (o.fullName.toUpperCase() == a.getValue().toUpperCase()) {\r\n\t\t\t\t\t\tthis._setAccount(o.fullName);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar C = new sap.ui.core.CustomData({\r\n\t\t\t\t\t\tkey: \"oAccount\",\r\n\t\t\t\t\t\tvalue: o\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar I = new sap.ui.core.Item({\r\n\t\t\t\t\t\ttext: o.fullName,\r\n\t\t\t\t\t\tcustomData: C\r\n\t\t\t\t\t});\r\n\t\t\t\t\ta.addSuggestionItem(I);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis._readAccount(a.getValue(), c);\r\n\t},\r\n\t_setAccount: function(a) {\r\n\t\tvar b = this.getView().byId(\"cusExistingCustomer\");\r\n\t\tif (b)\r\n\t\t\tb.setValue(a);\r\n\t\tif (a === \"\") {\r\n\t\t\tthis.accountId = \"\";\r\n\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusCity\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t}\r\n\t},\r\n\t_readAccount: function(s, c) {\r\n\t\tvar t = this,\r\n\t\t\tm = this.getView().getModel();\r\n\t\tthis.oModel.read(\r\n\t\t\t\"/AccountCollection?$expand=MainAddress&$select=accountID,name1,name2,fullName,MainAddress/address,MainAddress/street,MainAddress/mobilePhone,MainAddress/phone,MainAddress/city,MainAddress/country\",\r\n\t\t\tnull, \"$top=10&$filter=substringof(%27\" + encodeURIComponent(s) + \"%27,fullName)\", true,\r\n\t\t\tfunction(d, r) {\r\n\t\t\t\tvar a = jQuery.parseJSON(JSON.stringify(d));\r\n\t\t\t\tif (c)\r\n\t\t\t\t\tc.call(t, a.results);\r\n\t\t\t},\r\n\t\t\tfunction(e) {\r\n\t\t\t\tjQuery.sap.log.error(\"Read failed in S4->_readAccount:\" + e.response.body);\r\n\t\t\t});\r\n\t},\r\n\tshowAccountF4: function(e) {\r\n\t\tthis.accountF4Fragment = null;\r\n\t\tthis.accountF4Fragment = new sap.ui.xmlfragment(this.createId(\"accountF4\"), \"cus.crm.opportunity.view.AccountSelectDialog\", this);\r\n\t\tthis.accountF4Fragment.setModel(this.oI18nModel, \"i18n\");\r\n\t\tvar j = new sap.ui.model.json.JSONModel();\r\n\t\tthis.accountF4Fragment.setModel(j);\r\n\t\tthis.accountF4Fragment.getContent()[0].setNoDataText(this.oResourceBundle.getText(\"LOADING_TEXT\"));\r\n\t\tvar t = this.accountF4Fragment.getContent()[0].getInfoToolbar();\r\n\t\tvar a = t.getContent()[0];\r\n\t\tt.setVisible(false);\r\n\t\tthis.accountF4Fragment.open();\r\n\t\tif (this.bBpDeterminationEnabled) {\r\n\t\t\tt.setVisible(true);\r\n\t\t\ta.setText(this.oResourceBundle.getText(\"DETERM_FILTER\"));\r\n\t\t\tvar m = this._prepareHeaderF4Model();\r\n\t\t\tif (m.Account && m.Account.length > 0) {\r\n\t\t\t\tthis.accountF4Fragment.getSubHeader().getContentLeft()[0].setValue(\"\");\r\n\t\t\t\tthis.accountF4Fragment.getModel().setData({\r\n\t\t\t\t\tAccountCollection: m.Account\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.accountF4Fragment.getContent()[0].setNoDataText(this.oResourceBundle.getText(\"NO_DATA_TEXT\"));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar s = this.byId(\"cusExistingCustomer\").getValue();\r\n\t\t\tvar T = s.split(\"/\");\r\n\t\t\tvar b = T[0].replace(/\\s+$/, \"\");\r\n\t\t\tthis.accountF4Fragment.getSubHeader().getContentLeft()[0].setValue(b);\r\n\t\t\tthis._refreshAccountList(b);\r\n\t\t}\r\n\t},\r\n\tcloseAccountF4: function(e) {\r\n\t\tthis.accountF4Fragment.close();\r\n\t\tthis.accountF4Fragment.destroy();\r\n\t},\r\n\tsearchAccount: function(e) {\r\n\t\tvar v = e.getParameter(\"query\");\r\n\t\tvar t = this.accountF4Fragment.getContent()[0].getInfoToolbar();\r\n\t\tt.setVisible(false);\r\n\t\tthis.accountF4Fragment.getModel().setData({\r\n\t\t\tAccountCollection: []\r\n\t\t});\r\n\t\tthis.accountF4Fragment.getContent()[0].setNoDataText(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText(\r\n\t\t\t\"LOADING_TEXT\"));\r\n\t\tthis._refreshAccountList(v);\r\n\t},\r\n\tliveSearchAccount: function(e) {\r\n\t\tvar t = e.getParameters().newValue;\r\n\t\tvar s = this.accountF4Fragment.getSubHeader().getContentLeft()[0];\r\n\t\tif (t.length === 0 || t.length > 3) {\r\n\t\t\ts.fireSearch({\r\n\t\t\t\tquery: t\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t_refreshAccountList: function(s) {\r\n\t\tthis.accountF4Template = new sap.m.ObjectListItem({\r\n\t\t\ttitle: \"{parts : ['fullName','name1','accountID'],formatter : 'cus.crm.opportunity.util.Formatter.formatAccountF4Title'}\"\r\n\t\t}).addAttribute(new sap.m.ObjectAttribute({\r\n\t\t\ttext: \"{parts : [{path : 'accountID'},{path : 'MainAddress/city'},{path : 'MainAddress/country'}],formatter : 'cus.crm.opportunity.util.Formatter.formatAccountF4Description'}\"\r\n\t\t}));\r\n\t\tvar f = [];\r\n\t\tif (s !== \"\") {\r\n\t\t\tf.push(new sap.ui.model.Filter(\"fullName\", sap.ui.model.FilterOperator.Contains, s));\r\n\t\t}\r\n\t\tif (!this.accountF4Fragment) {\r\n\t\t\tthis.accountF4Fragment = new sap.ui.xmlfragment(this.createId(\"accountF4\"), \"cus.crm.opportunity.view.AccountSelectDialog\", this);\r\n\t\t\tvar j = new sap.ui.model.json.JSONModel();\r\n\t\t\tthis.accountF4Fragment.setModel(j);\r\n\t\t\tthis.accountF4Fragment.setModel(this.oI18nModel, \"i18n\");\r\n\t\t}\r\n\t\tvar l = this.accountF4Fragment.getContent()[0];\r\n\t\tl.setModel(this.oModel);\r\n\t\tl.bindAggregation(\"items\", {\r\n\t\t\tpath: \"/AccountCollection\",\r\n\t\t\tparameters: {\r\n\t\t\t\texpand: \"MainAddress\",\r\n\t\t\t\tselect: \"accountID,name1,name2,fullName,MainAddress/address,MainAddress/street,MainAddress/mobilePhone,MainAddress/phone,MainAddress/city,MainAddress/country\"\r\n\t\t\t},\r\n\t\t\tfilters: f,\r\n\t\t\ttemplate: this.accountF4Template\r\n\t\t});\r\n\t\tl.getBinding(\"items\").attachDataReceived(jQuery.proxy(this._setAccountJsonModel), this);\r\n\t},\r\n\t_setAccountJsonModel: function(e) {\r\n\t\tif (e.getParameter(\"data\") !== null && e.getParameter(\"data\") !== undefined) {\r\n\t\t\tvar r = e.getParameter(\"data\").results;\r\n\t\t\tif (r.length === 0) {\r\n\t\t\t\tthis.accountF4Fragment.getContent()[0].setNoDataText(this.oResourceBundle.getText(\"NO_DATA_TEXT\"));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tsetAccount: function(e) {\r\n\t\tthis.oSelectedAccount = e.getSource().getSelectedItem().getBindingContext().getObject();\r\n\t\tvar a = this.oSelectedAccount.fullName;\r\n\t\tvar b = this.oSelectedAccount.accountID;\r\n\t\tif (a && a !== \"\") {\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setValue(a);\r\n\t\t\tthis.accountName = a;\r\n\t\t} else {\r\n\t\t\tthis.byId(\"cusExistingCustomer\").setValue(b);\r\n\t\t\tthis.accountName = b;\r\n\t\t}\r\n\t\tthis.byId(\"cusExistingCustomer\").setValue(b);\r\n\r\n\t\tthis.accountId = b;\r\n\t\tthis._setAccountDetails(this.accountId);\r\n\t\tthis.byId(\"cusExistingCustomer\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tthis.accountF4Fragment.getContent()[0].removeSelections();\r\n\r\n\t\tthis.accountF4Fragment.close();\r\n\t\tthis.accountF4Fragment.destroy(); //this.enableSaveBtn();\r\n\t},\r\n\t_setAccountDetails: function(accId) {\r\n\t\tthis.oModel.read(\"/ZAccountCollection(accountID='\" + accId + \"')\", null, null, true, jQuery.proxy(function(d, r) {\r\n\t\t\tif (d) {\r\n\t\t\t\tthis.byId(\"cusFirstName\").setValue(d.NameFirst);\r\n\t\t\t\tthis.byId(\"cusLastName\").setValue(d.NameLast);\r\n\t\t\t\tthis.byId(\"cusAdd1\").setValue(d.Address1);\r\n\t\t\t\tthis.byId(\"cusAdd2\").setValue(d.Address2);\r\n\t\t\t\tthis.byId(\"cusAdd3\").setValue(d.Address3);\r\n\t\t\t\tthis.byId(\"cusMobile\").setValue(d.Mobile);\r\n\t\t\t\tthis.byId(\"cusPhone\").setValue(d.Phone);\r\n\t\t\t\tthis.byId(\"cusStd\").setValue(d.TelExtens);\r\n\t\t\t\tthis.byId(\"cusCity\").setValue(d.City1);\r\n\t\t\t\tthis.byId(\"cusDistrict\").setValue(d.District);\r\n\t\t\t\tthis.byId(\"cusState\").setValue(d.Region);\r\n\t\t\t\tthis.byId(\"cusPinCode\").setValue(d.PostCode1);\r\n\t\t\t\tthis.byId(\"applicantType\").setSelectedKey(d.BpType);\r\n\t\t\t\tif (d.BpType == \"3\") {\r\n\t\t\t\t\tthis.byId(\"cusPhone\").setVisible(false);\r\n\t\t\t\t\tthis.byId(\"cusStd\").setVisible(false);\r\n\t\t\t\t\tthis.byId(\"cusMobile\").setVisible(false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.accountId = \"\";\r\n\t\t\t\tthis.byId(\"cusFirstName\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusLastName\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd1\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd2\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusAdd3\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusMobile\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusPhone\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusStd\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusCity\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusState\").setValue(\"\");\r\n\t\t\t\tthis.byId(\"cusPinCode\").setValue(\"\");\r\n\t\t\t}\r\n\t\t}, this), jQuery.proxy(function(e) {\r\n\t\t\tjQuery.sap.log.error(\"Read failed in S4->_setAccountDetails:\" + e.response.body);\r\n\t\t}, this));\r\n\r\n\t},\r\n\t/********************END Account search help code********************/\r\n\r\n\t/********************Product table functions********************/\r\n\tonProductChange: function(oEvent) {\r\n\r\n\t\tvar _selectedItem = oEvent.getSource().getParent();\r\n\t\tvar Items = this.byId(\"idProdTable\").getItems();\r\n\t\tfor (var i = 0; i < Items.length; i++) {\r\n\t\t\tif (Items[i] === _selectedItem) {\r\n\t\t\t\tvar _ind = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar _sProductKey = oEvent.getSource().getSelectedKey();\r\n\t\tthis.PK = _sProductKey;\r\n\t\toEvent.getSource().setSelectedKey(_sProductKey);\r\n\t\tthis._bindVariants(_sProductKey, _ind);\r\n\t},\r\n\t_bindVariants: function(sKey, _index, ProdId, Qty) {\r\n\t\tvar DC = this.byId(\"cusDealerCVPV\").getSelectedKey();\r\n\t\tvar SC = this.byId(\"cusDistchan\").getSelectedKey();\r\n\t\tvar _sPath = \"/CategoryHelpSet('\" + sKey + \"')/ProductHelpSet?$filter=DistChan eq '\" + SC + \"' and SalesOffice eq '\" + DC + \"'\";\r\n\t\tthis._readVariants(_sPath, _index, ProdId, Qty, sKey);\r\n\t},\r\n\t_readVariants: function(sPath, iIndex, ProdId, Qty, sKey) {\r\n\t\tthis.ProdKey = sKey;\r\n\t\tthis.ProdVal = ProdId;\r\n\t\tthis.Qtyval = Qty;\r\n\t\tthis.Index = iIndex;\r\n\r\n\t\tvar t = this; //this.Index=-1;\r\n\t\tthis.oModel.read(sPath, null, null, false, jQuery.proxy(function(o, b) {\r\n\t\t\tvar _jModdel = t.getView().getModel(\"custJson\");\r\n\t\t\tvar _productData = _jModdel.oData.ZProduct.results;\r\n\t\t\t_productData[t.Index].relatedProducts = o.results;\r\n\t\t\t_productData[t.Index].CategoryId = t.ProdKey;\r\n\t\t\t_jModdel.updateBindings();\r\n\t\t\tvar Varinput = t.temp1.getCells()[1];\r\n\t\t\tvar tab = t.byId(\"idProdTable\");\r\n\r\n\t\t\tif (t.Index !== undefined) {\r\n\t\t\t\tVarinput = tab.getItems()[t.Index].getCells()[1];\r\n\t\t\t}\r\n\r\n\t\t\tt.varinpt = Varinput;\r\n\t\t\tvar json = new sap.ui.model.json.JSONModel(o.results);\r\n\t\t\tVarinput.setModel(json);\r\n\t\t\tvar oItemTemplate = new sap.ui.core.ListItem({\r\n\t\t\t\tkey: \"{ProductId}\",\r\n\t\t\t\ttext: \"{ShtextLarge}\"\r\n\t\t\t});\r\n\t\t\tVarinput.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"/\",\r\n\t\t\t\ttemplateShareable: true,\r\n\t\t\t\ttemplate: oItemTemplate\r\n\t\t\t});\r\n\r\n\t\t\tif (t.ProdKey !== \"\" && t.ProdVal !== \"\") {\r\n\t\t\t\tif (t.Index !== undefined) {\r\n\t\t\t\t\ttab.getItems()[t.Index].getCells()[0].setSelectedKey(t.ProdKey);\r\n\t\t\t\t\ttab.getItems()[t.Index].getCells()[1].setSelectedKey(t.ProdVal);\r\n\t\t\t\t\ttab.getItems()[t.Index].getCells()[2].setValue(t.Qtyval);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tt.temp1.getCells()[0].setSelectedKey(t.ProdKey);\r\n\t\t\t\t\tt.temp1.getCells()[1].setSelectedKey(t.ProdVal);\r\n\t\t\t\t\tt.temp1.getCells()[2].setValue(t.Qtyval);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this), jQuery.proxy(function(E) {\r\n\t\t\tthis.handleErrors(E);\r\n\t\t}, this));\r\n\r\n\t},\r\n\t_setProductCategoryData: function(jsonModel, bAddFirstProduct, aNewRecord) {\r\n\t\tvar t = this;\r\n\t\tthis.oModel.read(\"/CategoryHelpSet\", null, null, true, jQuery.proxy(function(o, r) {\r\n\t\t\tif (bAddFirstProduct) {\r\n\r\n\t\t\t\taNewRecord.categoryData = r.data.results;\r\n\t\t\t\tjsonModel.oData.ZProduct.results = [];\r\n\t\t\t\tjsonModel.oData.ZProduct.results.push(aNewRecord);\r\n\r\n\t\t\t\tt.idProdTableColumnListItem = this.byId(\"idProdTableColumnListItem\");\r\n\t\t\t\tvar temp = t.idProdTableColumnListItem.clone();\r\n\t\t\t\tt.temp1 = temp;\r\n\t\t\t\tt.ProdTab = t.byId(\"idProdTable\");\r\n\t\t\t\tt.ProdTab.addItem(temp);\r\n\t\t\t\tvar json = new sap.ui.model.json.JSONModel(o.results);\r\n\r\n\t\t\t\tvar Prod = t.temp1.getCells()[0];\r\n\t\t\t\tProd.setModel(json);\r\n\t\t\t\tvar oItemTemplate = new sap.ui.core.ListItem({\r\n\t\t\t\t\tkey: \"{CategoryId}\",\r\n\t\t\t\t\ttext: \"{CategoryText}\"\r\n\t\t\t\t});\r\n\t\t\t\tProd.bindAggregation(\"items\", {\r\n\t\t\t\t\tpath: \"/\",\r\n\t\t\t\t\ttemplateShareable: true,\r\n\t\t\t\t\ttemplate: oItemTemplate\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvar len = jsonModel.oData.ZProduct.results.length;\r\n\t\t\t\tthis.ProdTab = t.byId(\"idProdTable\");\r\n\t\t\t\tthis.ProdTab.removeAllItems();\r\n\t\t\t\tvar json = new sap.ui.model.json.JSONModel(r.data.results);\r\n\t\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\t\tjsonModel.oData.ZProduct.results[i].categoryData = r.data.results;\r\n\t\t\t\t\tt.idProdTableColumnListItem = this.byId(\"idProdTableColumnListItem\");\r\n\t\t\t\t\tt.temp1 = t.idProdTableColumnListItem.clone();\r\n\t\t\t\t\tt.ProdTab.addItem(t.temp1);\r\n\t\t\t\t\tvar catId = jsonModel.oData.ZProduct.results[i].CategoryId;\r\n\t\t\t\t\tvar ProdId = jsonModel.oData.ZProduct.results[i].ProductId;\r\n\t\t\t\t\tvar Qty = jsonModel.oData.ZProduct.results[i].Quantity;\r\n\r\n\t\t\t\t\tvar Prod = t.temp1.getCells()[0];\r\n\t\t\t\t\tProd.setModel(json);\r\n\t\t\t\t\tvar oItemTemplate = new sap.ui.core.ListItem({\r\n\t\t\t\t\t\tkey: \"{CategoryId}\",\r\n\t\t\t\t\t\ttext: \"{CategoryText}\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tProd.bindAggregation(\"items\", {\r\n\t\t\t\t\t\tpath: \"/\",\r\n\t\t\t\t\t\ttemplateShareable: true,\r\n\t\t\t\t\t\t//filters: [_oFilter, _oFilter1],\r\n\t\t\t\t\t\ttemplate: oItemTemplate\r\n\t\t\t\t\t});\r\n\t\t\t\t\tt.temp1.getCells()[2].setValue(Qty);\r\n\t\t\t\t\tif (catId !== null && catId !== \"\") {\r\n\r\n\t\t\t\t\t\tt._bindVariants(catId, i, ProdId, Qty);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tt.ProdTab.removeItem(t.temp1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tjsonModel.updateBindings();\r\n\t\t}, this), jQuery.proxy(function(E) {\r\n\t\t\tthis.handleErrors(E);\r\n\t\t}, this));\r\n\t},\r\n\taddProductTableRow: function(evt) {\r\n\r\n\t\tvar _oProdTable = this.byId(\"idProdTable\");\r\n\t\tvar jModel = this.getView().getModel(\"custJson\");\r\n\t\tvar _tableData = jModel.oData.ZProduct.results;\r\n\t\tvar _catData = [];\r\n\t\tvar newRowRecord = {\r\n\t\t\t\"Guid\": this.headerGuid, //\"\",\r\n\t\t\t\"RecordId\": \"00000000-0000-0000-0000-000000000001\",\r\n\t\t\t\"CategoryId\": \"\",\r\n\t\t\t\"ProductId\": \"\",\r\n\t\t\t\"Quantity\": \"\",\r\n\t\t\t\"categoryData\": _catData\r\n\t\t};\r\n\t\tif (_tableData !== undefined && _tableData !== null && _tableData.length > 0) {\r\n\t\t\t_catData = _tableData[0].categoryData;\r\n\t\t\tnewRowRecord.categoryData = _catData;\r\n\t\t\t_tableData.push(newRowRecord);\r\n\t\t\tjModel.updateBindings();\r\n\t\t\tthis.ProdTab = _oProdTable;\r\n\t\t\tthis.idProdTableColumnListItem = this.byId(\"idProdTableColumnListItem\");\r\n\t\t\tthis.temp1 = this.idProdTableColumnListItem.clone();\r\n\t\t\tthis.ProdTab.addItem(this.temp1);\r\n\t\t\tvar json = new sap.ui.model.json.JSONModel(_catData);\r\n\t\t\tvar Prod = this.temp1.getCells()[0];\r\n\t\t\tProd.setModel(json);\r\n\t\t\tvar oItemTemplate = new sap.ui.core.ListItem({\r\n\t\t\t\tkey: \"{CategoryId}\",\r\n\t\t\t\ttext: \"{CategoryText}\"\r\n\t\t\t});\r\n\t\t\tProd.bindAggregation(\"items\", {\r\n\t\t\t\tpath: \"/\",\r\n\t\t\t\ttemplateShareable: true,\r\n\t\t\t\ttemplate: oItemTemplate\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._setProductCategoryData(jModel, true, newRowRecord);\r\n\t\t}\r\n\t},\r\n\tdeleteProductTableRow: function(oEvent) {\r\n\t\tvar that = this;\r\n\t\tvar table=this.getView().byId(\"idProdTable\");\r\n\t\tvar d = that.getView().getModel(\"custJson\").getData();\r\n\t\tvar lineItem = oEvent.getSource().getParent();\r\n\t\tvar Pkey = lineItem.getCells()[0].getSelectedKey();\r\n\t\tvar res = this.getView().getModel(\"custJson\").oData.ZProduct.results;\r\n\t\tfor (var i = 0; i < res.length; i++) {\r\n\t\t\tvar resKey = res[i].CategoryId;\r\n\t\t\tif (Pkey === resKey) {\r\n\t\t\t\td.ZProduct.results.splice(i, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttable.removeItem(lineItem);\r\n\t\tthis.getView().getModel(\"custJson\").updateBindings();\r\n\t},\r\n\tQtyChange:function(e){\r\n\t\tvar val = e.mParameters.value;\r\n\t\t\tval = val.replace(/[^0-9 ]/g, '');\r\n\t\t\te.getSource().setValue(val);\r\n\t\t\te.getSource().setValueState(\"None\");\r\n\t},\r\n\r\n\t/********************END Product table functions********************/\r\n\tonApplicantChanged: function() {\r\n\r\n\t\tthis.byId(\"applicantType\").setValueState(sap.ui.core.ValueState.None);\r\n\t\tif (this.byId(\"applicantType\").getSelectedKey() === \"2\" || this.byId(\"applicantType\").getSelectedKey() === \"3\") {\r\n\r\n\t\t\tthis.byId(\"customerName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(false);\r\n\t\t\tthis.byId(\"Name1\").setVisible(true);\r\n\t\t\tthis.byId(\"Name2\").setVisible(true);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"LastName\").setVisible(true);\r\n\t\t\tif (this.byId(\"applicantType\").getSelectedKey() === \"3\") {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(false);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(false);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\t\tthis.byId(\"mob\").setVisible(true);\r\n\t\t\t}\r\n\t\t} else if (this.byId(\"applicantType\").getSelectedKey() === \"\" || this.byId(\"applicantType\").getSelectedKey() === \"1\") {\r\n\t\t\tthis.byId(\"Name1\").setVisible(false);\r\n\t\t\tthis.byId(\"Name2\").setVisible(false);\r\n\t\t\tthis.byId(\"FirstName\").setVisible(false);\r\n\t\t\tthis.byId(\"LastName\").setVisible(false);\r\n\t\t\tthis.byId(\"customerName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusFirstName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusLastName\").setVisible(true);\r\n\t\t\tthis.byId(\"cusPhone\").setVisible(true);\r\n\t\t\tthis.byId(\"cusStd\").setVisible(true);\r\n\t\t\tthis.byId(\"cusMobile\").setVisible(true);\r\n\t\t\tthis.byId(\"mob\").setVisible(true);\r\n\t\t}\r\n\r\n\t}\r\n});",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/SortingDialog1.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns=\"sap.m\" xmlns:core=\"sap.ui.core\">\r\n\t<ViewSettingsDialog confirm=\"handleConfirm\">\r\n\t\t<sortItems>\r\n\t\t\t\r\n\t\t\t<ViewSettingsItem text=\"{i18n>CLSDATE}\" key=\"ClosingDate\" selected=\"true\"/>\r\n\t\t\t<ViewSettingsItem text=\"{i18n>ACT}\" key=\"ProspectName\"/>\r\n\t\t\t<ViewSettingsItem text=\"{i18n>STAT}\" key=\"UserStatusText\"/>\r\n\t\t\t<ViewSettingsItem text=\"{i18n>Visit_Date}\" key=\"VISITDATE\"/>\r\n\t\t\t<ViewSettingsItem text=\"{i18n>Next_Followup}\" key=\"NEXTFOLLOWUP\"/>\r\n\t\t\t<ViewSettingsItem text=\"{i18n>START_DATE}\" key=\"StartDate\"/>\r\n\t\t\t\r\n\t\t</sortItems>\r\n\t</ViewSettingsDialog>\r\n</core:FragmentDefinition>",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/util/Formatter.js": "jQuery.sap.declare(\"cus.crm.opportunity.CRM_OPPRTNTYExtension.util.Formatter\");\r\ncus.crm.opportunity.CRM_OPPRTNTYExtension.util.Formatter = {\r\n\r\n\ttimestampformat: function(date) {\r\n\t\tvar n = date.toDateString();\r\n\t\tvar time = date.toLocaleTimeString();\r\n\t\treturn n + \" \" + time;\r\n\r\n\t},\r\n\tnotesDateFormatter: function(v) {\r\n\t\tif (v === \"\" || v === null || v === undefined) return \"\";\r\n\t\tif (!(v instanceof Date)) {\r\n\t\t\tv = new Date(v);\r\n\t\t}\r\n\t\tv.setMinutes(v.getTimezoneOffset());\r\n\t\tvar l = \"en-IN\";\r\n\t\tvar f = sap.ca.ui.model.format.DateFormat.getDateInstance({\r\n\t\t\tpattern:\"dd MMM yyyy hh:mm\",\r\n\t\t\tUTC:true,\r\n\t\t\toLocale:l\r\n\t\t}, l);\r\n\t\treturn f.format(v);\r\n\t}\r\n}",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/S3Custom.view.xml": "<!--Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.-->\r\n<core:View xmlns:core=\"sap.ui.core\" xmlns:ui=\"sap.ui.layout\" xmlns:layout=\"sap.ui.layout\" xmlns:ca=\"sap.ca.ui\" xmlns=\"sap.m\"\r\n\txmlns:form=\"sap.ui.layout.form\" xmlns:crm=\"sap.cus.crm.lib.reuse.controls\" controllerName=\"cus.crm.opportunity.view.S3\">\r\n\t<Page id=\"S3_Header\" title=\"{parts: [{path:'i18n>DETAIL_TITLE'} , {path:'json>/FanNo'}], formatter:'jQuery.sap.formatMessage'}\">\r\n\t\t<content>\r\n\t\t\t<!-- Extension point to add additional opportunity headers -->\r\n\t\t\t<core:ExtensionPoint name=\"opportunityHeaderExtension\">\r\n\t\t\t\t<ObjectHeader id=\"opportunityHeader\" title=\"{json>/ProspectName}\"\r\n\t\t\t\t\tnumber=\"{path:'json>/ExpectedSalesVolume' , formatter: 'appHelper.custFormatter.volumeFormatter1'}\"\r\n\t\t\t\t\tnumberUnit=\"{ path: 'json>/CurrencyCode', formatter:'cus.crm.opportunity.util.Formatter.currencycode'}\">\r\n\t\t\t\t\t<attributes>\r\n\t\t\t\t\t\t<ObjectAttribute text=\"Fan No:{json>/FanNo}\"/>\r\n\t\t\t\t\t\t<!-- Extension point to add additional header attributes at top -->\r\n\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityHeaderAttributeTopExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t<ObjectAttribute id=\"opportunityProspectName\"\r\n\t\t\t\t\t\t\ttext=\"{parts:[{path:'i18n>OPPT_ACCOUNT'},{path:'json>/ProspectName'}, {path:'json>/ProspectNumber'}], formatter:'cus.crm.opportunity.util.Formatter.formatOverviewField'}\">\r\n\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"PartnerNumber\" value=\"{json>/ProspectNumber}\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"PartnerFunctionCode\" value=\"00000021\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"Image\" value=\"{json>/ImgSrc}\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"Image\" value=\"{json>/ContactImgSrc}\"/>\r\n\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t</ObjectAttribute>\r\n\t\t\t\t\t\t<ObjectAttribute id=\"opportunityContactName\"\r\n\t\t\t\t\t\t\ttext=\"{parts:[{path:'i18n>OPPT_CONTACT'},{path:'json>/MainContactName'}], formatter:'cus.crm.opportunity.util.Formatter.formatOverviewField'}\">\r\n\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"PartnerNumber\" value=\"{json>/MainContactId}\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"PartnerFunctionCode\" value=\"00000015\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"Image\" value=\"{json>/ContactImgSrc}\"/>\r\n\t\t\t\t\t\t\t\t<core:CustomData key=\"Image\" value=\"{json>/ImgSrc}\"/>\r\n\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t</ObjectAttribute>\r\n\t\t\t\t\t\t<!-- Extension point to add additional header attributes at end -->\r\n\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityHeaderAttributeBottomExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t</attributes>\r\n\t\t\t\t</ObjectHeader>\r\n\t\t\t</core:ExtensionPoint>\r\n\t\t\t<ui:VerticalLayout id=\"icntabVLayout\" class=\"icntabVLayout\" width=\"100%\" height=\"100%\">\r\n\t\t\t\t<ui:HorizontalLayout id=\"icntabHLayout\" class=\"icntabHLayout\" width=\"100%\" height=\"100%\">\r\n\t\t\t\t\t<!-- Extension point to add additional opportunity icon tab bar on left -->\r\n\t\t\t\t\t<core:ExtensionPoint name=\"opportunityIcnTabBarLeftExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t<IconTabBar id=\"icntab\" select=\"selectedTab\">\r\n\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional tab bars -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityTabBarItemFirstExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t<IconTabFilter id=\"info\" text=\"{i18n>INFO}\" key=\"Info\" icon=\"sap-icon://hint\" iconColor=\"Neutral\">\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional info tab content -->\r\n\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityInfoTabContentTopExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t<ui:form.SimpleForm id=\"opportunityID_form\" layout=\"ResponsiveGridLayout\">\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityType_label1\" text=\"{i18n>TYPE}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text id=\"opportunityType_Text1\" text=\"{json>/ProcessTypeDescriptionLong}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityID_label\" text=\"{i18n>OPPOR_ID}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text id=\"opportunityID_Text\" text=\"{json>/Id}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityFleetSize_label\" text=\"{i18n>Fleet_size}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text id=\"opportunityFleetSize_Text\" text=\"{json>/FLEETSIZE}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityCustSegment_label\" text=\"{i18n>Cust_Segment}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<ComboBox id=\"opportunityCustSegment_Text\" class=\"ComboClass\" editable=\"false\" width=\"20%\" height=\"35%\" items=\"{json>/Zcustseg/results}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedKey=\"{json>/CUSTSEGMENT}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<items >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item key=\"{json>Zzcustseg}\" text=\"{json>DESC}\"></core:Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content class=\"comboHclass\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityFleet_Application_label\" text=\"{i18n>Fleet_Application}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<ComboBox id=\"opportunityFleet_Application_Text\" class=\"ComboClass\" editable=\"false\" width=\"40%\" height=\"35%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\titems=\"{json>/ZFLEET_APP_MASTS/results}\" selectedKey=\"{json>/FLEETAPPL}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item key=\"{json>FNO}\" text=\"{json>Fleetapp}\"></core:Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityDealer_Label\" text=\"{i18n>SC}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<ComboBox id=\"cusDealerSelect\" editable=\"false\" class=\"ComboClass\" items=\"{json>/ZBU_DESCRIPSet/results}\" width=\"40%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedKey=\"{json>/DEALERNAME}\" selectionChange=\"onComboChanged\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item key=\"{json>Partner}\" text=\"{json>BuDescrip}\"></core:Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label text=\"Branch\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<ComboBox id=\"cusDealerCVPV\" items=\"{/ZsalesofficeF4Set}\" visible=\"true\" editable=\"false\" width=\"40%\" class=\"ComboClass\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectionChange=\"onBranchChanged\" selectedKey=\"{json>/Branch}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:Item key=\"{Short}\" text=\"{Stext}\"></core:Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t\t\t</ComboBox>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityLead_StatusOpen_Label\" text=\"{i18n>Lead_StatusOpen}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text id=\"opportunityLead_StatusOpen_Text\" text=\"{json>/UserStatusText}\" TextAlign=\"Right\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityLead_Origin_Label\" text=\"{i18n>Origin}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text id=\"opportunityLead_Origin_Text\" text=\"{json>/Source}\" TextAlign=\"Right\"/>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityNext_Followup_Label\" text=\"{i18n>Next_Followup}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text id=\"opportunityNext_Followup_Text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{ path:'json>/NEXTFOLLOWUP', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityTentative_Date_Label\" text=\"{i18n>Tentative_Date}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text id=\"opportunityTentative_Date_Text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{path:'json>/TENTIVEDATE' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityVisit_Date_Label\" text=\"{i18n>Visit_Date}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text id=\"opportunityVisit_Date_Text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{path:'json>/VISITDATE' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t<Label id=\"opportunityLogChange_Label\" text=\"{i18n>LOG_CHANGE}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link text=\"{i18n>VIEW}\" press=\"onLogChange\" id=\"log\"></Link>\r\n\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t</ui:form.SimpleForm>\r\n\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityInfoTabContentBottomExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<!-- sales area Info Tab -->\r\n\t\t\t\t\t\t\t<IconTabFilter id=\"tab_salesarea\" visible=\"false\" icon=\"sap-icon://org-chart\" key=\"SalesArea\" text=\"{i18n>SALES_AREA}\" iconColor=\"Neutral\">\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional sales Area tab content on top -->\r\n\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"salesAreaInfoTabContentTopExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t<Panel>\r\n\t\t\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Title text=\"{i18n>SALES_AREA}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button id=\"salesareaIcon\" icon=\"sap-icon://edit\" type=\"Transparent\" press=\"showSalesAreaF4\" tooltip=\"{i18n>TOOLTIP_EDIT}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{path: 'onlineOfflineMode>/bOffline', formatter : 'cus.crm.opportunity.util.Formatter.formatHideButtonInOfflineMode'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t\t\t<ui:form.SimpleForm id=\"opportunitysalesorganization_form\" layout=\"ResponsiveGridLayout\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label id=\"salesorganization_label\" text=\"{i18n>SALES_ORGANIZATION}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text id=\"salesorganization_Text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{parts: [{path :'json>/SalesOrganizationDescription'},{path : 'json>/SalesOrganization'}], formatter : 'cus.crm.opportunity.util.Formatter.formatSalesOrganization'}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t</ui:form.SimpleForm>\r\n\t\t\t\t\t\t\t\t\t\t\t<ui:form.SimpleForm id=\"opportunitydistributionchannel_form\" layout=\"ResponsiveGridLayout\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label id=\"distributionchannel_label\" text=\"{i18n>DISTRIBUTION_CHANNEL}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text id=\"distributionchannel_Text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{parts: [{path :'json>/DistributionChannelDescription'},{path : 'json>/DistributionChannel'}], formatter : 'cus.crm.opportunity.util.Formatter.formatDistributionChannel'}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t</ui:form.SimpleForm>\r\n\t\t\t\t\t\t\t\t\t\t\t<ui:form.SimpleForm id=\"opportunitydivision_form\" layout=\"ResponsiveGridLayout\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label id=\"division_label\" text=\"{i18n>DIVISION}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text id=\"division_Text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{parts: [{path :'json>/DivisionDescription'},{path : 'json>/Division'}], formatter : 'cus.crm.opportunity.util.Formatter.formatDivision'}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ui:content>\r\n\t\t\t\t\t\t\t\t\t\t\t</ui:form.SimpleForm>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Sales Area info -->\r\n\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"salesAreaInfoTabContentBottomExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<IconTabFilter visible=\"false\" id=\"tab_product\" text=\"{i18n>PRODUCTS}\" key=\"Products\" icon=\"sap-icon://cart\" iconColor=\"Neutral\">\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Product tab content -->\r\n\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityProductTabContentExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t<Table id=\"Product_Tab\" items=\"{json>/Products}\" noDataText=\"{i18n>NOPRODUCTS}\">\r\n\t\t\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t<Toolbar id=\"productHeaderToolbar\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{parts:[{path:'i18n>PRODUCTS_HEADER'},{path:'json>/ProductsNum'}], formatter:'cus.crm.opportunity.util.Formatter.formatTabHeader'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Product Tab Coloum -->\r\n\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityProductTabColoumExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"product_column\" width=\"35%\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label id=\"productColumnLabel_S3\" text=\"{i18n>PRODUCT}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"quanity_column\" width=\"17.5%\" hAlign=\"Right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label id=\"productQuantity_S3\" text=\"{i18n>QUANTITY}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"price_column\" width=\"22.5%\" hAlign=\"Right\" minScreenWidth=\"Tablet\" demandPopin=\"true\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label id=\"productPrice_S3\" text=\"{i18n>UNIT_PRICE}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"volume_column\" width=\"25%\" hAlign=\"Right\" minScreenWidth=\"Tablet\" demandPopin=\"true\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Label id=\"productVolume_S3\" text=\"{i18n>VOLUME}\"></Label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"productBasketTemplate_S3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional product tab cell -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityProductTabCellsExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ObjectIdentifier id=\"productName_cell\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"{path : 'json>ProductGuid', formatter : 'cus.crm.opportunity.util.Formatter.formatProductName'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{path: 'json>ProductGuid',formatter : 'cus.crm.opportunity.util.Formatter.formatProdClassification'}\"></ObjectIdentifier>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ObjectNumber id=\"productQuantity_cell\" number=\"{json>Quantity}\" numberUnit=\"{json>Unit}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ObjectNumber id=\"productPrice_cell\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnumber=\"{parts:[{path:'json>NetValue'},{path: 'json>CurrencyCode'}] , formatter: 'cus.crm.opportunity.util.Formatter.volumeFormatter'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnumberUnit=\"{json>CurrencyCode}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ObjectNumber id=\"productVolume_cell\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnumber=\"{parts:[{path:'json>TotalExpectedNetValue'},{path: 'json>CurrencyCode'}] , formatter: 'cus.crm.opportunity.util.Formatter.volumeFormatter'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnumberUnit=\"{json>CurrencyCode}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<!--Notes Tab using FeedInput -->\r\n\t\t\t\t\t\t\t<IconTabFilter id=\"tab_notes\" visible=\"false\" icon=\"sap-icon://notes\" key=\"Notesv2\" text=\"{i18n>NOTES}\" iconColor=\"Neutral\">\r\n\t\t\t\t\t\t\t\t<FeedInput id=\"notesList33\" textMaxLength=\"1000\" text=\"{json>Content}\" post=\"_handleAddNote\" showIcon=\"true\" icon=\"{json>icon}\" maxLines=\"3\"></FeedInput>\r\n\t\t\t\t\t\t\t\t<List id=\"listItem1\" showSeparators=\"Inner\" growing=\"true\" growingThreshold=\"4\" growingScrollToLoad=\"false\"\r\n\t\t\t\t\t\t\t\t\titems=\"{json>/OpportunityNotesSet}\">\r\n\t\t\t\t\t\t\t\t\t<FeedListItem sender=\"{path : 'json>Creator'}\" senderActive=\"false\"\r\n\t\t\t\t\t\t\t\t\t\ttimestamp=\"{path: 'json>CreatedAt', type: 'sap.ui.model.type.DateTime', formatOptions: {pattern: 'dd MMM yyyy hh:mm', strictParsing: true , UTC: true}}\" text=\"{path : 'json>Content'}\"/>\r\n\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<!-- Multiple type note support -->\r\n\t\t\t\t\t\t\t<IconTabFilter id=\"tab_notes_v2\" icon=\"sap-icon://notes\" visible=\"false\" key=\"Notes\" text=\"{i18n>NOTES}\" iconColor=\"Neutral\">\r\n\t\t\t\t\t\t\t\t<FeedInput id=\"notesList\" textMaxLength=\"1000\" text=\"{json>Content}\" post=\"_handleAddNote\" showIcon=\"true\" icon=\"{json>icon}\" maxLines=\"3\"></FeedInput>\r\n\t\t\t\t\t\t\t\t<List id=\"listItem\" showSeparators=\"Inner\" growing=\"true\" growingThreshold=\"4\" growingScrollToLoad=\"false\"\r\n\t\t\t\t\t\t\t\t\titems=\"{json>/OpportunityNotesSet}\">\r\n\t\t\t\t\t\t\t\t\t<FeedListItem sender=\"{path : 'json>Creator'}\" senderActive=\"false\"\r\n\t\t\t\t\t\t\t\t\t\ttimestamp=\"{path: 'json>CreatedAt', type: 'sap.ui.model.type.DateTime', formatOptions: {pattern: 'dd MMM yyyy hh:mm', strictParsing: true , UTC: true, oLocale: 'en-IN'}}\" text=\"{path : 'json>Content'}\"/>\r\n\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<IconTabFilter id=\"tab_attachment\" icon=\"sap-icon://attachment\" key=\"Attachments\" text=\"{i18n>ATTACHMENTS}\" iconColor=\"Neutral\">\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<UploadCollection id=\"fileupload\" beforeUploadStarts=\"OnuploadBefore\" typeMissmatch=\"onTypeMissmatch\" maximumFilenameLength=\"40\"\r\n\t\t\t\t\t\t\t\t\t\tmultiple=\"false\" showSeparators=\"All\" fileDeleted=\"onFileDeleted\" fileRenamed=\"onFileRenamed\" fileType=\"pdf,png,jpg,jpeg xls,xlsx\"\r\n\t\t\t\t\t\t\t\t\t\tuploadComplete=\"onUploadComplete\" filenameLengthExceed=\"onFilenameLengthExceed\" change=\"onAttachmentChange\" sameFilenameAllowed=\"true\"></UploadCollection>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<IconTabFilter id=\"salesTeam\" visible=\"false\" key=\"Parties Involved\" icon=\"sap-icon://group\" text=\"{i18n>SALES_TEAM}\" iconColor=\"Neutral\">\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Sales Tab content -->\r\n\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunitysalesTabContentExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t<Table id=\"Sales_Team\" noDataText=\"{i18n>NOPARTIES}\" text=\"{i18n>TEAM}\" items=\"{json>/OpportunitySalesTeamSet}\">\r\n\t\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Sales Tab Columns -->\r\n\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunitysalesTabColumnExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"salesTeamColumn1\" width=\"15%\" minScreenWidth=\"Small\" demandPopin=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"salesTeamColumn2\" width=\"65%\" minScreenWidth=\"XLarge\" demandPopin=\"true\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"salesTeamColumn3\" width=\"10%\" minScreenWidth=\"Desktop\" demandPopin=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{path: 'onlineOfflineMode>/bOffline', formatter : 'cus.crm.opportunity.util.Formatter.formatHideButtonInOfflineMode'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column id=\"salesTeamColumn4\" width=\"10%\" minScreenWidth=\"Desktop\" demandPopin=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{path: 'onlineOfflineMode>/bOffline', formatter : 'cus.crm.opportunity.util.Formatter.formatHideButtonInOfflineMode'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem id=\"salesTeamTemplate\" items=\"{json>/OpportunitySalesTeamSet}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Sales Tab Cells -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunitySalesTabCellsExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ObjectHeader id=\"image\" icon=\"{path :'json>ImgSrc',formatter : 'cus.crm.opportunity.util.Formatter.removeMarginInPhone'}\"></ObjectHeader>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<layout:VerticalLayout id=\"layout\" visible=\"{path : 'device>/isPhone',formatter : 'cus.crm.opportunity.util.Formatter.addLayoutPadding'}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layout:content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link id=\"salesPartnerName\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{parts : [{path :'json>PartnerName'},{path : 'json>PartnerNumber'}],formatter : 'cus.crm.opportunity.util.Formatter.formatBusinessCardCaller'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems=\"{json>/OpportunitySalesTeamSet}\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"PartnerNumber\" value=\"{json>PartnerNumber}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"PartnerFunctionCode\" value=\"{json>PartnerFunctionCode}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"Image\" value=\"{json>ImgSrc}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</customData>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<layout:HorizontalLayout id=\"hLayout\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <Label id=\"salespartnerFunction_Label\" text=\"{i18n>PARTNER_FUNCTION}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdesign=\"Bold\"></Label> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Text id=\"salespartnerFunction_Text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{path:'json>PartnerFunctionText' , formatter: 'cus.crm.opportunity.util.Formatter.salesteamplacement'}\"></Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layout:HorizontalLayout>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ObjectStatus id=\"salespartnerMobile_Text\" icon=\"sap-icon://outgoing-call\" text=\"{json>MobileNumber}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{path : 'json>MobileNumber', formatter : 'cus.crm.opportunity.util.Formatter.formatMobileIconVisibility'}\"></ObjectStatus>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</layout:content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</layout:VerticalLayout>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button id=\"participantEditButton\" type=\"Transparent\" tooltip=\"{i18n>TOOLTIP_EDIT}\" icon=\"sap-icon://edit\" press=\"onPartnerFunctionChange\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible=\"{path : 'json>PartnerFunctionCode',formatter : 'cus.crm.opportunity.util.Formatter.formatParticipant'}\"></Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button id=\"participantDeleteButton\" type=\"Transparent\" tooltip=\"{i18n>TOOLTIP_DECLINE}\" icon=\"sap-icon://decline\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress=\"onDeleteParticipant\" visible=\"{path : 'json>PartnerFunctionCode',formatter : 'cus.crm.opportunity.util.Formatter.formatParticipant'}\"></Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<IconTabFilter id=\"tab_competitor\" icon=\"sap-icon://competitor\" text=\"{i18n>COMPETITORS}\" key=\"Competitors\" iconColor=\"Neutral\" count=\"\">\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Competitor Tab Content -->\r\n\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityCompetitorTabContentExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t<List id=\"competitors\" items=\"{json>/OpportunityCompetitors}\" noDataText=\"{i18n>NOCOMPETITORS}\">\r\n\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional competitor list content -->\r\n\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"competitorListContentExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t<InputListItem id=\"Competitors\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"{parts :[{path : 'json>PartnerName'},{path : 'json>PartnerNumber'}],formatter : 'cus.crm.opportunity.util.Formatter.formatPartnerName'}\"\r\n\t\t\t\t\t\t\t\t\t\t\ticon=\"{json>ImgSrc}\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Button id=\"competitorDeleteButton\" type=\"Transparent\" tooltip=\"{i18n>TOOLTIP_DECLINE}\" icon=\"sap-icon://decline\" press=\"onDeleteCompetitor\"></Button>\r\n\t\t\t\t\t\t\t\t\t\t</InputListItem>\r\n\t\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<IconTabFilter id=\"tab_transactionHistory\" visible=\"false\" icon=\"sap-icon://work-history\" text=\"{i18n>TRANS_HISTORY}\"\r\n\t\t\t\t\t\t\t\tkey=\"TransactionHistory\" iconColor=\"Neutral\" count=\"\" tooltip=\"{i18n>TRANS_HISTORY}\">\r\n\t\t\t\t\t\t\t\t<content>\r\n\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Doc History Content -->\r\n\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityDocHistContentExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t<Table id=\"DocHistory_Tab\" items=\"{json>/OpportunityDocHistory}\" growing=\"true\" growingThreshold=\"10\" growingScrollToLoad=\"false\">\r\n\t\t\t\t\t\t\t\t\t\t<headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t\t<Toolbar id=\"DocHistoryHeaderToolbar\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{parts:[{path:'i18n>DOC_HISTORY_HEADER'},{path:'json>/OpportunityDocHistoryNum'}], formatter:'cus.crm.opportunity.util.Formatter.formatTabHeader'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t\t\t\t\t\t</headerToolbar>\r\n\t\t\t\t\t\t\t\t\t\t<columns>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Doc History Tab Columns in \r\n\t\t\t\t\t\t\t\t\t\tthe beginning -->\r\n\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityDocHistTabColoumStartExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column minScreenWidth=\"Tablet\" demandPopin=\"true\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>TRANS_ID}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column minScreenWidth=\"Tablet\" demandPopin=\"true\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>TRANS_TYPE}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column minScreenWidth=\"Tablet\" demandPopin=\"true\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>TRANS_DESC}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column minScreenWidth=\"Tablet\" demandPopin=\"true\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>CREATED_ON}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<Column minScreenWidth=\"Tablet\" demandPopin=\"true\" hAlign=\"Center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Text text=\"{i18n>RELATIONSHIP}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Doc History Tab Columns at \r\n\t\t\t\t\t\t\t\t\t\tthe beginning -->\r\n\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityDocHistTabColoumEndExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t</columns>\r\n\t\t\t\t\t\t\t\t\t\t<items>\r\n\t\t\t\t\t\t\t\t\t\t\t<ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Doc History Tab Cells at \r\n\t\t\t\t\t\t\t\t\t\t\t\tthe beginning -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityDocHistTabCellsStartExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link id=\"TransactionIDText\" text=\"{json>TransactionId}\" press=\"navigateDocHistory\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenabled=\"{path:'json>ObjectType' , formatter: 'cus.crm.opportunity.util.Formatter.FormatDocHistory'}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text id=\"TransactionDesText\" text=\"{json>TransTypeDesc}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text id=\"DescriptionText\" text=\"{json>Description}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text id=\"CreatedOnText\" text=\"{path: 'json>CreatedOn', type:'sap.ca.ui.model.type.Date', formatOptions:{style:'medium'}}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text id=\"relationship\" text=\"{json>Relationship}\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Extension point to add additional Doc History Tab Columns \r\n\t\t\t\t\t\t\t\t\t\t\t\tat the end -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityDocHistTabCellsEndExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t\t\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t\t\t\t\t\t\t</items>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</content>\r\n\t\t\t\t\t\t\t</IconTabFilter>\r\n\t\t\t\t\t\t\t<!-- Extension point to add additional Tabs at the end -->\r\n\t\t\t\t\t\t\t<core:ExtensionPoint name=\"opportunityTabBarItemLastExtension\"></core:ExtensionPoint>\r\n\t\t\t\t\t\t</items>\r\n\t\t\t\t\t</IconTabBar>\r\n\t\t\t\t\t<!-- Extension point to add additional Tabs on the Right -->\r\n\t\t\t\t\t<core:ExtensionPoint name=\"opportunityIcnTabBarRightExtension\"></core:ExtensionPoint>\r\n\t\t\t\t</ui:HorizontalLayout>\r\n\t\t\t</ui:VerticalLayout>\r\n\t\t</content>\r\n\t\t<footer id=\"footer\"></footer>\r\n\t</Page>\r\n</core:View>",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/appHelper/custFormatter.js": "/*sap.ui.define([], function() {\r\n\t\"use strict\";\r\n\treturn {\r\n\t\tformatStatus: function(sStatus) {\r\n\t\t\tdebugger;\r\n\t\t\treturn sStatus;\r\n\t\t}\r\n\t};\r\n\r\n});*/\r\n\r\njQuery.sap.declare(\"appHelper.custFormatter\");\r\n\r\nappHelper.custFormatter = {\r\n\t\r\ntimestampformat: function(date){\r\n\tvar n = date.toDateString();\r\n\tvar time = date.toLocaleTimeString();\r\nreturn n+\" \"+time;\r\n\r\n},\r\nvolumeFormatter1:function(val1){\r\n\tif(val1!==\"\" && val1!==\"0.00\"){\r\n\t\treturn val1;\r\n\t}\r\n},\r\n\tformatStatus: function(sStatus) {\r\n\r\n\t\tif (sStatus != null) {\r\n\t\t\tif (sStatus.toLowerCase() === \"open\") {\r\n\t\t\t\tthis.addStyleClass(\"cssOpen\");\r\n\t\t\t\r\n\t\t\t} else if (sStatus.toLowerCase() === \"warm\") {\r\n\t\t\t\tthis.addStyleClass(\"cssWarm\");\r\n\t\t\t\r\n\t\t\t} else if (sStatus.toLowerCase() === \"cold\") {\r\n\t\t\t\tthis.addStyleClass(\"cssCold\");\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\telse if (sStatus.toLowerCase() === \"hot\") {\r\n\t\t\t\tthis.addStyleClass(\"cssHot\");\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.addStyleClass(\"cssDrop\");\r\n\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn sStatus;\r\n\t}\r\n};",
		"cus/crm/opportunity/CRM_OPPRTNTYExtension/view/DuplicateTab.fragment.xml": "<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\" xmlns:form=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\">\r\n\t<Dialog title=\"Duplicate Records\" contentWidth=\"720px\" contentHeight=\"300px\" class=\"sapUiSizeCompact\">\r\n\t<content>\r\n\t\t\t<Table id=\"idDupliTable\" noDataText=\"No Data\" inset=\"false\" growing=\"true\" mode=\"SingleSelectLeft\" selectionChange=\"ItemPress\"\r\n\t\t\t items=\"{/results}\" growingScrollToLoad=\"true\">\r\n\t\t\t\t<!--<headerToolbar>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Title text=\"{i18n>PRODUCT_BASKET}\"/>\r\n\t\t\t\t\t\t<ToolbarSpacer id=\"productSpacer_S411\"></ToolbarSpacer>\r\n\t\t\t\t\t\t<Button id=\"ProductButton11\" icon=\"sap-icon://add\" enabled=\"false\" press=\"addProductTableRow\" tooltip=\"{i18n>ADD}\"></Button>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</headerToolbar>-->\r\n\t\t\t\t<columns>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"BpName\"/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Partner\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Address\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t\t<Column hAlign=\"Left\">\r\n\t\t\t\t\t\t<Text text=\"Percentage Match\"/>\r\n\t\t\t\t\t</Column>\r\n\t\t\t\t</columns>\r\n\t\t\t\t<items>\r\n\t\t\t\t\t<ColumnListItem press=\"ItemPress\"\r\n\t\t\t\tdetailPress=\"handleDetailPress\">\r\n\t\t\t\t\t\t<cells>\r\n\t\t\t\t\t\t\t<Text text=\"{BpName}\"/>\r\n\t\t\t\t\t\t\t<Text text=\"{Businesspartner}\"/>\r\n\t\t\t\t\t\t\t<Text text=\"{AddrShort}\"/>\r\n\t\t\t\t\t\t\t<Text text=\"{Percentage}\"/>\r\n\t\t\t\t\t\t</cells>\r\n\t\t\t\t\t</ColumnListItem>\r\n\t\t\t\t</items>\r\n\t\t\t</Table>\r\n\t\t</content>\r\n\t\t<beginButton>\r\n\t\t\t\t<Button text=\"Cancel and Create new Record\" id=\"CancelDup_id\" press=\"DuplicateCancel\"></Button>\r\n\t\t</beginButton>\r\n\t\t<endButton>\r\n\t\t\t<Button text=\"Continue with Selected Record\" id=\"ProceedDup_id\" visible=\"false\" press=\"DuplicateContinue\"></Button>\r\n\t\t</endButton>\r\n\t</Dialog>\r\n</core:FragmentDefinition>"
	}
});